/*! For license information please see main.99ee382b.chunk.js.LICENSE.txt */
(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[7],{167:function(e,t,a){"use strict";var n=a(12),s=a(13),r=a(15),i=a(14),l=a(0),c=a(1),o=a.n(c),d=a(70),u=a(200),h=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){window.MathJax&&window.MathJax.typeset&&window.MathJax.typeset()}},{key:"render",value:function(){var e=this.props,t=e.githubRepo,a=e.paper,n=e.thumbnail,s=e.displayProceeding,r=e.mainAuthorFullName,i=new Date(a.publishedDate),c=i.getDate(),h=i.toLocaleString("default",{month:"short"}),b=i.getFullYear(),p="".concat(c," ").concat(h," ").concat(b);return Object(l.jsxs)("div",{className:"pgr-card paper-github-repo item w-100 mb-0",children:[Object(l.jsx)(d.a,{lg:3,className:"item-image-col",children:"video"===n.type?Object(l.jsx)("iframe",{title:"video",width:"100%",src:n.source,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):Object(l.jsx)("a",{href:a.link,children:Object(l.jsx)("div",{className:"item-image",style:{backgroundImage:"url('".concat(n.source,"')")}})})}),Object(l.jsx)(d.a,{lg:9,className:"item-col",children:Object(l.jsxs)(u.a,{children:[Object(l.jsxs)(d.a,{lg:9,className:"item-content",children:[Object(l.jsx)("h1",{children:Object(l.jsx)("a",{href:a.link,children:a.title})}),Object(l.jsxs)("p",{className:"author-section",style:{paddingTop:"2px"},children:[s&&a.proceeding&&Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("span",{className:"item-conference-link",children:Object(l.jsx)("a",{href:a.proceeding.link,children:a.proceeding.name})})}),r&&Object(l.jsxs)(l.Fragment,{children:[s&&a.proceeding&&Object(l.jsx)(l.Fragment,{children:" \u2022 "}),Object(l.jsxs)("span",{className:"author-name-text",children:[r.split(" ").pop()," et al"]})]}),t&&Object(l.jsxs)(l.Fragment,{children:[" ","\u2022"," ",Object(l.jsx)("span",{className:"item-github-link",children:Object(l.jsx)("a",{href:t.link,style:{fontSize:"13px"},children:t.fullName})}),t.frameworkImageUrl&&Object(l.jsxs)(l.Fragment,{children:[" ","\u2022"," ",Object(l.jsx)("span",{children:Object(l.jsx)("img",{src:t.frameworkImageUrl,alt:"framework"})})]})]})]}),Object(l.jsx)("p",{className:"item-strip-abstract",children:a.shortDescription}),a.bestRank&&Object(l.jsx)("div",{className:"sota",children:Object(l.jsxs)("p",{children:["\xa0",1===a.bestRank.rank?Object(l.jsx)(l.Fragment,{children:"Ranked #1 on"}):Object(l.jsxs)(l.Fragment,{children:["Ranked #",a.bestRank.rank," on"]}),"\xa0",Object(l.jsxs)("a",{href:a.bestRank.benchmark.url,children:[a.bestRank.benchmark.name,"on ",a.bestRank.dataset]}),"\xa0",a.bestRank.description]})}),Object(l.jsx)("p",{children:a.tasks&&a.tasks.map((function(e){return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsx)("a",{href:e.url,children:Object(l.jsxs)("span",{className:"badge badge-primary",children:[Object(l.jsx)("img",{style:{marginRight:"0px"},src:e.thumbnail}),Object(l.jsx)("span",{children:e.name})]})})," "]},e.slug)}))})]}),Object(l.jsxs)(d.a,{lg:3,className:"item-interact text-center",children:[Object(l.jsxs)("div",{className:"entity-stars",children:[t?Object(l.jsxs)("span",{className:"badge badge-secondary",children:[Object(l.jsx)("ion-icon",{name:"star"})," ",t.stars.toLocaleString()]}):Object(l.jsx)("span",{className:"badge badge-secondary",style:{border:"none",backgroundColor:"transparent"},children:"\xa0"}),p&&Object(l.jsx)("div",{className:"stars-accumulated text-center",children:p})]}),Object(l.jsxs)("div",{className:"entity",style:{marginBottom:"20px"},children:[Object(l.jsxs)("a",{href:a.link,className:"badge badge-light",children:[Object(l.jsx)("ion-icon",{name:"document"})," Paper"]}),Object(l.jsx)("br",{}),Object(l.jsxs)("a",{href:a.link+"#code",className:"badge badge-dark ".concat(t?"":"badge-nocode"),children:[Object(l.jsx)("ion-icon",{name:t?"logo-github":"add"})," ",t?" Code":"Add Code"]})]})]})]})})]})}}]),a}(o.a.Component);h.defaultProps={displayProceeding:!1},t.a=h},208:function(e,t,a){},209:function(e,t,a){!function(){window.$=window.jQuery=a(57);var e=a(210);a(211),a(157),a(212),a(213),a(214);var t=a(215);window.yl=t.yl,a(216),t.dalInitFunction(),a(217),a(218),a(219),a(220),a(222),window.Sentry=a(202),window.Highcharts=a(154),a(223)(window.Highcharts),window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]]}};var n=document.createElement("script");n.src="https://production-assets.paperswithcode.com/static/js/mathjax/tex-chtml.js",n.onload=function(){window.MathJax.typeset()},document.head.appendChild(n),e.option({resizeDuration:0,fadeDuration:400}),window.frontend={ReactDOM:a(18),React:a(1),AuthorPage:a(365).default,RecentChangesPage:a(363).default,ReviewPage:a(364).default,EditPaperPage:a(283).default,SotaPage:a(362).default},a(361),window.run_after_frontend_loaded=window.run_after_frontend_loaded||[],window.run_after_frontend_loaded.forEach((function(e){return e()}))}()},215:function(e,t){var a=a||{};a.functions={},a.registerFunction=function(e,t){if(this.functions.hasOwnProperty(e))console.error('The DAL function "'+e+'" has already been registered.');else{if("function"!=typeof t)throw new Error("The custom DAL function must be a function.");this.functions[e]=t;var a=new CustomEvent("dal-function-registered."+e,{detail:{name:e,func:t}});window.dispatchEvent(a)}},e.exports={yl:a,dalInitFunction:function(){window.django=window.django||{},django.hasOwnProperty("jQuery")||"undefined"===jQuery||(django.jQuery=jQuery),function(e){e.fn.getFormPrefix=function(){var t=e(this).attr("name").split("-");for(var a in t){var n=t.slice(0,-a).join("-");if(n.length)if(e(":input[name^="+(n+="-")+"]").length)return n}return""},e.fn.getFormPrefixes=function(){var t=e(this).attr("name").split("-").slice(0,-1),a=[];for(i=0;i<t.length;i+=2){var n=t.slice(0,-i||t.length).join("-");if(n.length)e(":input[name^="+(n+="-")+"]").length&&a.push(n)}return a.push(""),a},"undefined"!==typeof dalLoadLanguage?dalLoadLanguage(e):document.addEventListener("dal-language-loaded",(function(t){dalLoadLanguage(e)}));var t=new CustomEvent("dal-init-function");document.dispatchEvent(t);var n=[];function s(t){if("undefined"!==typeof t&&"number"!==typeof t||(t=this),!(n.indexOf(t)>=0)){var s=e(t).attr("data-autocomplete-light-function");a.functions.hasOwnProperty(s)&&"function"==typeof a.functions[s]?a.functions[s](e,t):a.functions.hasOwnProperty(s)?window.addEventListener("dal-function-registered."+s,(function(n){a.functions[s](e,t)})):console.warn('Your custom DAL function "'+s+'" uses a deprecated event listener that will be removed in future versions. https://django-autocomplete-light.readthedocs.io/en/master/tutorial.html#overriding-javascript-code'),e(t).trigger("autocompleteLightInitialize"),n.push(t)}}if(e.fn.excludeTemplateForms=function(){return this.not("[id*=__prefix__]").filter((function(){return!this.id.match(/-empty-/)||this.id.match(/-\d+-empty-\d+-/)}))},window.__dal__initialize||(window.__dal__initialize=s,e(document).ready((function(){e("[data-autocomplete-light-function]").excludeTemplateForms().each(s)})),"MutationObserver"in window?new MutationObserver((function(t){for(var a,n,r=0;r<t.length;r++)if((a=t[r]).addedNodes.length>0)for(var i=0;i<a.addedNodes.length;i++)n=a.addedNodes[i],e(n).find("[data-autocomplete-light-function]").excludeTemplateForms().each(s)})).observe(document.documentElement,{childList:!0,subtree:!0}):e(document).on("DOMNodeInserted",(function(t){e(t.target).find("[data-autocomplete-light-function]").excludeTemplateForms().each(s)}))),document.csrftoken=function(t){var a=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),s=0;s<n.length;s++){var r=e.trim(n[s]);if(r.substring(0,t.length+1)==t+"="){a=decodeURIComponent(r.substring(t.length+1));break}}return a}("csrftoken"),null===document.csrftoken){var r=e('form :input[name="csrfmiddlewaretoken"]');r.length>0&&(document.csrftoken=r[0].value)}}(django.jQuery),function(e){"use strict";e.fn.djangoAdminSelect2=function(t){var a=e.extend({},t);return e.each(this,(function(t,n){!function(t,a){var n=e.extend({ajax:{data:function(e){return{term:e.term,page:e.page,app_label:t.data("app-label"),model_name:t.data("model-name"),field_name:t.data("field-name")}}}},a);t.select2(n)}(e(n),a)})),this},e((function(){e(".admin-autocomplete").not("[name*=__prefix__]").djangoAdminSelect2()})),e(document).on("formset:added",(function(e,t){return t.find(".admin-autocomplete").djangoAdminSelect2()}))}(django.jQuery),function(e,t){t.forwardHandlerRegistry=t.forwardHandlerRegistry||{},t.registerForwardHandler=function(e,a){t.forwardHandlerRegistry[e]=a},t.getForwardHandler=function(e){return t.forwardHandlerRegistry[e]},t.getFieldRelativeTo=function(t,a){for(var n=e(t).getFormPrefixes(),s=0;s<n.length;s++){var r="[name="+n[s]+a+"]",i=e(r);if(i.length)return i}return e()},t.getValueFromField=function(t){var a,n=1===(a=t).length&&"checkbox"===a.attr("type")&&void 0===a.attr("value")?"exists":1===a.length&&void 0!==a.attr("multiple")||function(){var t=!0;return e.each(a,(function(a,n){"checkbox"!==e(n).attr("type")&&(t=!1)})),t}()?"multiple":"single",s=e(t).serializeArray();0==s&&e(t).prop("disabled")&&(e(t).prop("disabled",!1),s=e(t).serializeArray(),e(t).prop("disabled",!0));var r=function(e){return e.hasOwnProperty("value")&&void 0!==e.value?e.value:null};return"multiple"===n?s.map((function(e){return r(e)})):"exists"===n?s.length>0:function(e){var t=function(e){return s.length>e?s[e]:null}(e);return null!==t?r(t):null}(0)},t.getForwards=function(a){var n,s,r,i;if(i="div.dal-forward-conf#dal-forward-conf-for-"+a.attr("id")+", div.dal-forward-conf#dal-forward-conf-for_"+a.attr("id"),0!==(n=(a.length>0?e(a[0].form):e()).find(i).find("script")).length){try{s=JSON.parse(n.text())}catch(l){return}if(Array.isArray(s))return r={},e.each(s,(function(e,n){var s,i;if("const"===n.type)r[n.dst]=n.val;else if("self"===n.type)i=n.hasOwnProperty("dst")?n.dst:"self",r[i]=t.getValueFromField(a);else if("field"===n.type){s=n.src,i=n.hasOwnProperty("dst")?n.dst:s;var l=t.getFieldRelativeTo(a,s);if(!l.length)return;r[i]=t.getValueFromField(l)}else if("javascript"===n.type){var c=t.getForwardHandler(n.handler);r[n.dst||n.handler]=c(a)}})),JSON.stringify(r)}}}(django.jQuery,a)}}},216:function(e,t){document.addEventListener("dal-init-function",(function(){yl.registerFunction("select2",(function(e,t){var a=e(t);function n(t,a){if(a){var n=e("<span>");return n.html(t),n}return t}function s(t){var s=void 0!==a.attr("data-html")||void 0!==a.attr("data-result-html");if(t.create_id){var r=e("<span>").addClass("dal-create");return s?r.html(t.text):r.text(t.text)}return n(t.text,s)}var r=null;a.attr("data-autocomplete-light-url")&&(r={url:a.attr("data-autocomplete-light-url"),dataType:"json",delay:250,data:function(e){var t={q:e.term,page:e.page,create:a.attr("data-autocomplete-light-create")&&!a.attr("data-tags"),forward:yl.getForwards(a)};return t},processResults:function(t,n){return a.attr("data-tags")&&e.each(t.results,(function(e,t){t.id=t.text})),t},cache:!0}),a.select2({tokenSeparators:a.attr("data-tags")?[","]:null,debug:!0,containerCssClass:":all:",placeholder:a.attr("data-placeholder")||"",language:a.attr("data-autocomplete-light-language"),minimumInputLength:a.attr("data-minimum-input-length")||0,allowClear:!a.is("[required]"),templateResult:s,templateSelection:function(e){return void 0!==e.selected_text?n(e.selected_text,void 0!==a.attr("data-html")||void 0!==a.attr("data-selected-html")):s(e)},ajax:r,with:null,tags:Boolean(a.attr("data-tags"))}),a.on("select2:selecting",(function(t){var n=t.params.args.data;if(!0===n.create_id){t.preventDefault();var s=a;e.ajax({url:a.attr("data-autocomplete-light-url"),type:"POST",dataType:"json",data:{text:n.id,forward:yl.getForwards(a)},beforeSend:function(e,t){e.setRequestHeader("X-CSRFToken",document.csrftoken)},success:function(t,a,n){s.append(e("<option>",{value:t.id,text:t.text,selected:!0})),s.trigger("change"),s.select2("close")}})}}))}))}))},283:function(e,t,a){"use strict";a.r(t),a.d(t,"ImageUploadWithPreview",(function(){return Q}));var n=a(74),s=a(21),r=a(5),i=a(8),l=a(12),c=a(13),o=a(15),d=a(14),u=a(0),h=a(19),b=a.n(h),p=a(1),j=a.n(p),f=a(105),m=a.n(f),g=a(44),v=a(22),O=a(200),x=a(70),w=a(37),y=a(153),C=a(54),k=a(66),N=a(87),D=a(150),S=a(16),A=a(9),R=a.n(A),_=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={loading:!0,isSaving:!1,isDirty:!1,paper:{},authorPapers:[],filledRepo:"",filledAuthor:null,filledPapers:null,filledUsername:null,filledEmail:null,filledPassword:null,filledPasswordConfirmation:null,canAttachDatasets:!1,register:!1,loggedIn:!1,error:null},e.fetchPaper=function(){var t=e.props.paperSlug;e.setState({loading:!0},(function(){return b.a.get("/api/v0/papers",{params:{slug:t}}).then((function(t){e.setState({loading:!1,isDirty:!1,paper:t.data,filledRepo:t.data.officialGithubrepo?t.data.officialGithubrepo.link:"",filledAuthor:t.data.authors.length?t.data.authors[0].id:null,canAttachDatasets:t.data.canAttachDatasets})}))}))},e.fetchMe=function(){b.a.get("/api/v0/me").then((function(t){e.setState({loggedIn:t.data.loggedIn})}))},e.loadingScreen=function(){return Object(u.jsx)("div",{style:{position:"fixed",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:Object(u.jsx)("p",{className:"text-center",children:Object(u.jsx)("span",{className:"spinner-border text-primary",style:{width:"4rem",height:"4rem"}})})})},e.fetchAuthorPapers=function(){var t=e.state.filledAuthor;e.setState({loading:!0},(function(){b.a.get("/api/v0/papers/by-author/",{params:{author_id:t}}).then((function(t){e.setState({loading:!1,authorPapers:t.data,filledPapers:new Set(t.data.map((function(e){return e.id}))),screen:"selectPapersScreen"})}))}))},e.editRepo=function(t){var a=e.state,n=a.filledRepo,s=a.paper;e.setState({isSaving:!0},(function(){b.a.post("/api/v0/papers/add-official-implementation/",{paper_id:s.id,implementation:n}).then((function(a){e.setState({isSaving:!1,error:null},(function(){t.push("edited-official-implementation"),e.fetchPaper()}))})).catch((function(t){t.response&&400===t.response.status?e.setState({isSaving:!1,error:t.response.data.error}):e.setState({isSaving:!1,screen:"errorScreen"})}))}))},e.removeRepo=function(t){var a=e.state.paper;e.setState({loading:!0},(function(){b.a.post("/api/v0/papers/remove-official-implementation/",{paper_id:a.id}).then((function(a){e.setState({loading:!1,error:null},(function(){t.push("removed-official-implementation"),e.fetchPaper()}))})).catch((function(t){t.response&&400===t.response.status?e.setState({loading:!1,error:t.response.data.error}):e.setState({loading:!1,screen:"errorScreen"})}))}))},e.errorScreen=function(){e.state.paper;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Error"}),Object(u.jsx)("p",{children:"We encountered an unexpected error and our team is investigating the problem. Please try again later."})]})},e.successScreen=function(){var t=e.state.paper;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Success"}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:Object(u.jsx)("a",{href:t.link,className:"badge badge-metadata clickable",children:"See Paper"})})})]})},e.claimPapers=function(){var t=e.state,a=t.filledAuthor,n=t.filledPapers,s=t.filledUsername,r=t.filledEmail,l=t.filledPassword,c=t.filledPasswordConfirmation,o=t.register;e.setState({loading:!0},(function(){b.a.post("/api/v0/papers/claim/",{author_id:a,paper_ids:Object(i.a)(n),username:s,email:r,password:l,password_confirmation:c,register:o}).then((function(t){e.setState({loading:!1,screen:"successScreen"})}))}))},e.loginAndRegisterScreen=function(){var t=e.state.register;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Create Account"}),Object(u.jsx)("p",{children:"Your PwC account can be used to:"}),Object(u.jsxs)("ul",{children:[Object(u.jsx)("li",{children:"Manage code for your papers on arXiv"}),Object(u.jsx)("li",{children:"Manage your results published on benchmarks"})]}),Object(u.jsx)("p",{children:"To complete the process, register below."}),Object(u.jsx)(O.a,{className:"justify-content-md-center mt-4",children:Object(u.jsxs)(x.a,{md:8,children:[Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Username"}),Object(u.jsx)(w.a.Control,{type:"text",maxLength:"150",required:!0,onChange:function(t){return e.setState({filledUsername:t.target.value})}})]}),t&&Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Email"}),Object(u.jsx)(w.a.Control,{type:"email",maxLength:"254",required:!0,onChange:function(t){return e.setState({filledEmail:t.target.value})}})]}),Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Password"}),Object(u.jsx)(w.a.Control,{type:"password",required:!0,onChange:function(t){return e.setState({filledPassword:t.target.value})}})]}),t&&Object(u.jsxs)(w.a.Group,{children:[Object(u.jsx)(w.a.Label,{children:"Confirm Password"}),Object(u.jsx)(w.a.Control,{type:"password",required:!0,onChange:function(t){return e.setState({filledPasswordConfirmation:t.target.value})}})]}),Object(u.jsxs)("div",{className:"mt-5 text-center",children:[Object(u.jsx)("span",{className:"badge badge-metadata clickable mr-2",onClick:e.claimPapers,children:t?"Sign Up":"Log In"}),"or",Object(u.jsx)("span",{className:"text-primary clickable ml-2",style:{textDecoration:"underline"},onClick:function(){return e.setState({register:!t})},children:t?"login with existing account":"register a new account"})]})]})})]})},e.togglePaper=function(t){var a=e.state.filledPapers,n=parseInt(t.getAttribute("data-paper-id"));t.checked?a.add(n):a.delete(n),e.setState({filledPapers:new Set(Object(i.a)(a))})},e.selectPapersScreen=function(){var t=e.state,a=t.authorPapers,n=t.filledPapers,s=t.loggedIn;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Select Papers"}),Object(u.jsx)("p",{children:"Are these papers yours? Untick if we've matched incorrectly."}),Object(u.jsx)("table",{children:Object(u.jsxs)("tbody",{children:[Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"TITLE"}),Object(u.jsx)("th",{className:"text-center",children:"YEAR"}),Object(u.jsx)("th",{className:"text-center"})]}),a.map((function(t){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[Object(u.jsx)("a",{href:t.link,children:t.title}),Object(u.jsx)("br",{}),Object(u.jsx)("span",{className:"author-span",children:e.intersperse(t.authors.map((function(e){return Object(u.jsx)("a",{href:e.link,children:e.fullName},e.id)}))," \u2022 ")})]}),Object(u.jsx)("td",{className:"text-center",children:t.year}),Object(u.jsx)("td",{className:"text-center",children:Object(u.jsx)("input",{type:"checkbox","data-paper-id":t.id,checked:n.has(t.id),onChange:function(t){return e.togglePaper(t.target)}})})]},t.id)}))]})}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:Object(u.jsx)("span",{onClick:s?e.claimPapers:function(){return e.setState({screen:"loginAndRegisterScreen"})},className:"badge badge-metadata clickable",children:"Claim My Papers"})})})]})},e.claimPageScreen=function(){var t=e.state.paper;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Claim Page"}),Object(u.jsx)("p",{children:"Which author are you?"}),Object(u.jsx)("select",{className:"code-input",name:"authors",id:"authors",onChange:function(t){return e.setState({filledAuthor:t.target.value})},children:t.authors.filter((function(e){return e.isPlaceholder})).map((function(e){return Object(u.jsx)("option",{value:e.id,children:e.fullName},e.id)}))}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:Object(u.jsx)("span",{onClick:e.fetchAuthorPapers,className:"badge badge-metadata clickable",children:"That's Me!"})})})]})},e.codeEditedScreen=function(){var t,a=e.state,n=a.paper,s=a.canAttachDatasets;return t=s?Object(u.jsx)(g.b,{to:"attach-datasets",className:"badge badge-metadata clickable",children:"Attach Datasets"}):Object(u.jsx)("a",{href:n.link,className:"badge badge-metadata clickable",children:"View Paper"}),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Code Attached"}),Object(u.jsxs)("p",{children:[s?"":"Done. ","Official code now shows on ",Object(u.jsx)("a",{href:n.link,target:"_blank",children:"Papers with Code"})," and on ",Object(u.jsx)("a",{href:"https://arxiv.org/abs/"+n.arxiv_id,target:"_blank",children:"arXiv"}),"."]}),s&&Object(u.jsx)("p",{children:"As a next step, you can link datasets introduced and used in your paper."}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:t})})]})},e.datasetsEditedScreen=function(){var t=e.state.paper;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"\ud83c\udf89 Datasets Updated"}),Object(u.jsxs)("p",{children:["Done. You can now see the datasets on ",Object(u.jsx)("a",{href:"".concat(t.link,"#datasets"),children:"Papers with Code"})," and also on ",Object(u.jsx)("a",{href:"https://arxiv.org/abs/"+t.arxiv_id,children:"arXiv"}),"."]}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:Object(u.jsx)("a",{href:t.link,className:"badge badge-metadata clickable",children:"View Paper"})})})]})},e.codeRemovedScreen=function(){var t,a=e.state,n=a.paper,s=a.canAttachDatasets;return t=s?Object(u.jsx)(g.b,{to:"attach-datasets",className:"badge badge-metadata clickable",children:"Attach Datasets"}):Object(u.jsx)("a",{href:n.link,className:"badge badge-metadata clickable",children:"View Paper"}),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{children:"Official code removed"}),Object(u.jsxs)("p",{children:["Done. We've removed the official code, you can see your paper on ",Object(u.jsx)("a",{href:n.link,children:"Papers with Code"})," and also on ",Object(u.jsx)("a",{href:"https://arxiv.org/abs/"+n.arxiv_id,children:"arXiv"}),"."]}),s&&Object(u.jsx)("p",{children:"As a next step, you can link datasets introduced and used in your paper."}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:t})})]})},e.welcomeScreen=function(){var t=e.state,a=t.paper,n=t.canAttachDatasets,s=0!==a.mentionedDatasets.length||0!==a.introducedDatasets.length;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h1",{children:["Link Your Code ",n?" & Datasets":""]}),Object(u.jsxs)("p",{children:["Link code",n?" and datasets":""," to your paper so it shows to readers on arXiv. This is the open data record of your paper:"]}),Object(u.jsxs)("div",{className:"row status-paper",children:[Object(u.jsx)("div",{className:"col-lg-4 status-paper-image",children:Object(u.jsx)("a",{href:a.link,children:"video"===a.thumbnail.type?Object(u.jsx)("iframe",{width:"100%",src:a.thumbnail.source,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0}):Object(u.jsx)("img",{src:a.thumbnail.source})})}),Object(u.jsx)("div",{className:"col-lg-8 status-paper-description",children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("h1",{children:Object(u.jsx)("a",{href:a.link,children:a.title})}),Object(u.jsx)("span",{className:"author-span",children:e.intersperse(a.authors.map((function(e){return Object(u.jsx)("a",{href:e.link,children:e.fullName},e.id)}))," \u2022 ")}),Object(u.jsxs)("div",{className:"artefact-links",children:[Object(u.jsxs)("a",{href:a.link,className:"badge badge-artefact badge-paper",target:"_blank",children:[Object(u.jsx)("ion-icon",{name:"document"})," Paper"]}),Object(u.jsxs)("a",{href:a.link+"#code",target:"_blank",className:"badge badge-artefact ".concat(a.officialGithubrepo?"":"badge-artefact-disabled"," badge-code"),children:[Object(u.jsx)("ion-icon",{name:"logo-github"})," Code"]}),n&&Object(u.jsxs)("a",{href:a.link+"#datasets",target:"_blank",className:"badge badge-artefact ".concat(s?"":"badge-artefact-disabled"," badge-datasets"),children:[Object(u.jsx)("ion-icon",{name:"images-outline"})," Datasets"]}),Object(u.jsxs)("a",{href:a.link+"#evaluation",className:"badge badge-artefact ".concat(a.hasResults?"":"badge-artefact-disabled"," badge-results"),target:"_blank",children:[Object(u.jsx)("ion-icon",{name:"barcode-outline"})," Results"]})]})]})})]}),a.officialGithubrepo&&Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("p",{children:"Our records have the following official repository. If it is incorrect you can change it."}),Object(u.jsxs)("div",{className:"code-preview",children:[Object(u.jsx)("ion-icon",{name:"logo-".concat(a.officialGithubrepo.hosting)}),Object(u.jsx)("a",{href:a.officialGithubrepo.link,children:a.officialGithubrepo.link})]})]}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:a.officialGithubrepo?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(g.b,{to:"/edit_paper/".concat(a.slug,"/edit-official-implementation"),className:"badge badge-metadata",id:"arxiv-change-code",children:"Change Repo"}),n&&Object(u.jsx)(g.b,{to:"/edit_paper/".concat(a.slug,"/attach-datasets"),className:"badge badge-metadata clickable",children:"Link Datasets"})]}):Object(u.jsxs)(g.b,{to:"/edit_paper/".concat(a.slug,"/edit-official-implementation"),className:"badge badge-metadata",id:"arxiv-add-code",children:["Add Code ",n&&Object(u.jsx)(u.Fragment,{children:"& Datasets"})]})})})]})},e.onUnload=function(t){var a=e.state,n=a.isDirty,s=a.screen;if(n&&"errorScreen"!==s)return t.preventDefault(),t.returnValue="Do you want to discard unsaved changes?"},e}return Object(c.a)(a,[{key:"intersperse",value:function(e,t){return 0===e.length?[]:e.slice(1).reduce((function(e,a,n){return e.concat([t,a])}),[e[0]])}},{key:"componentDidMount",value:function(){b.a.defaults.headers.common["X-CSRFToken"]=this.props.csrfToken,this.fetchPaper(),this.fetchMe(),window.addEventListener("beforeunload",this.onUnload)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.onUnload)}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.screen,n=e.paper,s=e.error,r=e.isSaving,i=e.canAttachDatasets;if(t)return this.loadingScreen();if("errorScreen"===a)return this.errorScreen();var l,c=[{title:"Your Paper",path:"/edit_paper/".concat(n.slug),icon:Object(u.jsx)("ion-icon",{name:"document"})},{title:"Official Code",path:"/edit_paper/".concat(n.slug,"/edit-official-implementation"),icon:Object(u.jsx)("ion-icon",{name:"code-outline"})}];return i&&(c.push({title:"Datasets",path:"/edit_paper/".concat(n.slug,"/attach-datasets"),icon:Object(u.jsx)("ion-icon",{name:"images-outline"})}),l=[Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId/attach-datasets",children:[Object(u.jsx)(I,{activeStep:3,steps:c}),Object(u.jsx)(z,{paper:n,error:s,page:this,introduced:!0},"attach-datasets")]}),Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId/attached-datasets",children:[Object(u.jsx)(I,{activeStep:3,steps:c}),this.datasetsEditedScreen()]})]),Object(u.jsx)(g.a,{children:Object(u.jsx)(x.a,{lg:8,className:"edit-paper",children:Object(u.jsx)("div",{className:"edit-paper-box",children:Object(u.jsxs)(v.c,{children:[Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId/edit-official-implementation",children:[i&&Object(u.jsx)(I,{activeStep:2,steps:c}),Object(u.jsx)(M,{paper:n,error:s,page:this,isSaving:r,canAttachDatasets:i})]}),Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId/edited-official-implementation",children:[i&&Object(u.jsx)(I,{activeStep:2,steps:c}),this.codeEditedScreen()]}),Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId/removed-official-implementation",children:[i&&Object(u.jsx)(I,{activeStep:2,steps:c}),this.codeRemovedScreen()]}),l,Object(u.jsxs)(v.a,{path:"/edit_paper/:paperId",children:[i&&Object(u.jsx)(I,{activeStep:1,steps:c}),this.welcomeScreen()]})]})})})})}}]),a}(j.a.Component);function I(e){var t=e.activeStep,a=e.steps,n=100/a.length,s=100-n,r=s*(t-1)/(a.length-1);return Object(u.jsxs)("div",{className:"d-flex justify-content-around mb-4",style:{position:"relative"},children:[Object(u.jsx)("div",{className:"edit-paper-step-bar",style:{width:"".concat(s,"%"),height:"4px",left:"".concat(n/2,"%"),position:"absolute",top:"21px",zIndex:-2}}),Object(u.jsx)("div",{className:"edit-paper-step-bar active",style:{width:"".concat(r,"%"),height:"4px",left:"".concat(n/2,"%"),position:"absolute",top:"21px",zIndex:-1}}),a.map((function(e,a){var s=e.title,r=e.path,i=e.icon,l=a+1===t?"active":a<t?"done":"";return Object(u.jsxs)(g.b,{to:r,className:"edit-paper-step ".concat(l),style:{width:"".concat(n,"%")},children:[Object(u.jsx)("span",{className:"bullet",children:i}),Object(u.jsxs)("span",{className:"step-title",children:[a+1,". ",s]})]},a)}))]})}var E=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).inputRef=j.a.createRef(),n}return Object(c.a)(a,[{key:"onChange",value:function(e){var t=this.props.onChange;t(e)}},{key:"componentDidMount",value:function(){var e=this;$(this.inputRef.current).datepicker({format:"yyyy-mm-dd",autoclose:!0}).on("changeDate",(function(t){e.onChange(t.target.value)})).on("hide",(function(t){e.onChange(t.format())}))}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,n=t.error,s=void 0===n?null:n,r=t.placeholder,i=void 0===r?null:r;return Object(u.jsx)("input",{ref:this.inputRef,className:"form-control ".concat(s?"is-invalid":""),value:a,onChange:function(t){return e.onChange(t.target.value)},type:"text",placeholder:i,style:{width:"100%",fontSize:"14px",height:"30px",backgroundColor:"#fff"}})}}]),a}(j.a.Component);function M(e){var t=e.paper,a=e.error,n=e.page,s=e.isSaving,r=e.canAttachDatasets,i=Object(v.f)();return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{style:{opacity:s?.5:null},children:[Object(u.jsx)("h1",{children:"Link Your Code"}),Object(u.jsx)("p",{children:"Paste your GitHub/GitLab/BitBucket repository below and you're all set. This will mark this repository as the official repository for your paper."}),Object(u.jsxs)("div",{className:"author-code",children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3 github-text",children:"Repository URL"}),Object(u.jsx)("div",{className:"col-md-9",children:Object(u.jsx)("input",{defaultValue:t.officialGithubrepo?t.officialGithubrepo.link:"",onChange:function(e){return n.setState({filledRepo:e.target.value})},onKeyPress:function(e){"Enter"===e.key&&n.editRepo(i)},name:"q",className:"form-control code-input ".concat(a?"is-invalid":""),id:"arxiv-add-code-input",type:"text",placeholder:"e.g. http://www.github.com/name/resnet"})})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-3"}),Object(u.jsxs)("div",{className:"col-md-9 invalid-feedback d-block",children:[a,"\xa0"]})]})]}),Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsxs)("div",{className:"col-lg-12 text-center",children:[Object(u.jsx)("div",{children:Object(u.jsx)("span",{onClick:function(){return n.editRepo(i)},className:"badge badge-metadata clickable",id:"arxiv-add-code-attach-button",children:"Attach Code"})}),t.officialGithubrepo&&Object(u.jsxs)("div",{className:"remove-code-div",children:["or\xa0",Object(u.jsx)("span",{onClick:function(){return n.removeRepo(i)},className:"remove-code-link clickable",id:"arxiv-remove-official-code",children:"Remove the official repository"})]}),r&&Object(u.jsx)("div",{className:"skip-code-step",children:Object(u.jsx)(g.b,{to:"attach-datasets",className:"clickable",children:"skip this step"})})]})})]}),s&&n.loadingScreen()]})}var T=function(e){var t,a=e.data,n=a.name,s=a.fullName,r=a.image,i=a.icon,l=a.description,c=a.url,o=a.isNew,d=s!==n&&""!==s?"".concat(n," (").concat(s,")"):n;t=r?Object(u.jsx)("img",{src:r,style:{width:"40px",height:"40px"}}):Object(u.jsx)("div",{style:{width:"40px",height:"40px"},children:Object(u.jsx)("i",{className:"fad fa-".concat(i," dataset-img-icon"),style:{color:"#00b16c"}})});var h=o?Object(u.jsx)(m.a,{children:l}):l;return Object(u.jsxs)("div",{className:"media",children:[Object(u.jsx)("div",{className:"mr-3",children:t}),Object(u.jsxs)("div",{className:"media-body",children:[Object(u.jsx)("a",{href:c,target:c&&"#"===c[0]?null:"_blank",className:"name",style:{fontSize:"14px",color:"#333"},children:d}),Object(u.jsx)("div",{style:{height:"16px",overflowY:"hidden",color:"#888",fontWeight:"normal"},children:h})]})]})},B=function(e){var t,a,n=e.dataset,s=n.name,r=n.fullName,i=n.image,l=n.icon,c=n.description,o=n.isNew,d=e.editPrompt,h=void 0===d?null:d;t=""!==s?Object(u.jsx)("span",{className:"dataset-name",children:r!==s&&""!==r?"".concat(s," (").concat(r,")"):s}):Object(u.jsx)("span",{className:"dataset-name dataset-name-placeholder",children:"New Dataset"}),a=i?Object(u.jsx)("img",{className:"dataset-image",src:i}):Object(u.jsx)("div",{className:"dataset-image",children:Object(u.jsx)("i",{className:"fad fa-".concat(l," dataset-img-icon")})});var b=o?Object(u.jsx)(m.a,{children:c}):c;return Object(u.jsxs)("div",{className:"media basic-dataset-card",children:[Object(u.jsx)("div",{className:"mr-3",children:a}),Object(u.jsxs)("div",{className:"media-body",children:[t,Object(u.jsx)("div",{className:"dataset-description",children:b}),h]})]})},F=function(e){var t=e.data;return Object(u.jsx)(S.f.Option,Object(r.a)(Object(r.a)({},e),{},{children:Object(u.jsx)(B,{dataset:t})}))},Q=function(e){var t=Object(p.useState)(e.url),a=Object(s.a)(t,2),n=a[0],r=a[1],i=Object(p.useState)(e.url),l=Object(s.a)(i,2),c=l[0],o=l[1],d=j.a.useRef(null);Object(p.useEffect)((function(){if("string"!==typeof n){if(n){var t=URL.createObjectURL(n);return o(t),function(){return URL.revokeObjectURL(t)}}o(e.initialImage)}else o(n)}),[n]);var h=j.a.useRef(!0);e.onChange&&Object(p.useEffect)((function(){h.current?h.current=!1:e.onChange(n,c)}),[c]);return Object(u.jsxs)("div",{className:"upload-image-preview",style:{position:"relative",textAlign:"center",overflow:"hidden"},children:[Object(u.jsx)("input",{type:"file",ref:d,onChange:function(e){e.target.files&&0!==e.target.files.length?r(e.target.files[0]):r(void 0)},style:{display:"none"}}),c&&Object(u.jsx)("img",{style:{width:"120px",height:"120px",objectFit:"cover"},src:c}),Object(u.jsxs)("button",{className:"edit-preview-button",style:{},onClick:function(e){d.current.click()},children:[Object(u.jsx)("i",{className:"fas fa-edit"}),"\xa0Edit Image"]})]})},U=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.url,a=e.isMulti,s=e.forwardParams,i=e.value,l=e.onChange,c=Object(n.a)(e,["url","isMulti","forwardParams","value","onChange"]);return Object(u.jsx)(N.a,Object(r.a)(Object(r.a)({loadOptions:function(e,a,n){var r=n.page;return b.a.get(t,{params:{q:e,page:r,forward:s}}).then((function(e){return{options:e.data.results.map((function(e){return{value:e.id,label:e.text}})),hasMore:e.data.pagination.more,additional:{page:r+1}}}))},value:i,onChange:l,isMulti:a,additional:{page:1}},c),{},{isClearable:!1,components:{IndicatorSeparator:null,DropdownIndicator:null},className:"react-dal-select",debounceTimeout:75,styles:{valueContainer:function(e){return Object(r.a)(Object(r.a)({},e),{},{padding:"0px"})},input:function(e){return Object(r.a)(Object(r.a)({},e),{},{padding:"0px",margin:"0px 2px"})},control:function(e){return Object(r.a)(Object(r.a)({},e),{},{minHeight:"30px",border:"1px solid #ddd",backgroundColor:"#fff"})},multiValue:function(e,t){return t.data.hasOwnProperty("isFixed")&&t.data.isFixed?Object(r.a)(Object(r.a)({},e),{},{backgroundColor:"#f9f9f9",border:"1px solid #ddd"}):e},multiValueRemove:function(e,t){return t.data.hasOwnProperty("isFixed")&&t.data.isFixed?Object(r.a)(Object(r.a)({},e),{},{display:"none"}):e}}}))}}]),a}(j.a.Component);U.defaultProps={isMulti:!1,forwardParams:{}};var q=function(e){var t=e.label,a=e.children,n=e.optional,s=void 0===n||n,r=e.icon,i=e.error,l=void 0===i?null:i,c=s?t:Object(u.jsxs)(u.Fragment,{children:[t,"*"]}),o=Object(u.jsxs)("div",{className:"inline-form-error",style:{fontSize:"14px",color:"#dc3545"},children:[null!=l?l:null,"\xa0"]});return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{style:{fontSize:"14px",color:"#495057"},children:[r&&Object(u.jsxs)(u.Fragment,{children:[r,"\xa0"]}),c]}),a,o]})},L=function(e){var t,a=e.label,n=e.value,s=e.onChange,r=e.className,i=void 0===r?"":r,l=e.error,c=void 0===l?null:l,o=e.multiline,d=void 0!==o&&o,h=e.optional,b=void 0===h||h,p=e.icon,j=void 0===p?null:p,f=e.placeholder,m=void 0===f?"edit":f,g=d?"textarea":"input",v={width:"100%",fontSize:"14px",height:d?null:"30px",backgroundColor:"#fff"},O=d?8:null;return t=Object(u.jsx)(g,{className:"form-control ".concat(c?"is-invalid":""),type:"text",value:n,style:v,onChange:function(e){return s(e.target.value)},placeholder:m,rows:O}),d&&(t=Object(u.jsx)("div",{children:t})),Object(u.jsx)("div",{className:"mb-1 ".concat(i),children:Object(u.jsx)(q,{label:a,icon:j,optional:b,error:c,children:t})})},P=function(e){var t,a=e.paper,n=e.dataset,s=e.errors,i=e.introducedByIsEditable,l=function(t){e.onChange(Object(r.a)(Object(r.a)({},n),t))},c=function(e){return s.hasOwnProperty(e)?s[e]:null},o=Object(u.jsx)("a",{href:"/datasets/license",target:"_blank",className:"datasets-license-info",children:Object(u.jsx)("ion-icon",{name:"information-circle-outline"})});i&&(t=Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(q,{label:"First introduced by",icon:Object(u.jsx)("ion-icon",{name:"document-outline"}),error:c("introducedBy"),children:Object(u.jsx)(U,{url:"/sota/autocomplete/paper/",width:"200px",value:n.introducedBy,style:{width:"100%"},onChange:function(e){return l({introducedBy:e,introduced:e.value===a.id})}})})}));var d=c("image");return Object(u.jsxs)("div",{id:"new-dataset".concat(e.sectionId),className:"container",style:{padding:"8px",fontSize:"14px"},children:[Object(u.jsxs)("div",{className:"row mb-3",children:[Object(u.jsxs)("div",{className:"col-12 col-md-4",children:[Object(u.jsx)("div",{style:{border:"1px solid",borderColor:d?"#dc3545":"#ccc",borderRadius:"4px",padding:"3px"},children:Object(u.jsx)(Q,{url:n.image,onChange:function(e,t){return l({image:t,imageFile:e})},initialImage:n.initialImage})}),Object(u.jsxs)("div",{className:"inline-form-error",style:{fontSize:"14px",color:"#dc3545"},children:[d||null,"\xa0"]})]}),Object(u.jsxs)("div",{className:"col-12 col-md-8",children:[Object(u.jsx)(L,{name:"name",label:"Name",value:n.name,optional:!1,error:c("name"),placeholder:"Dataset Name",onChange:function(e){return l({name:e,label:e})}}),Object(u.jsx)(L,{label:"Full Name",value:n.fullName,error:c("fullName"),onChange:function(e){return l({fullName:e})},placeholder:"Optional Full Name"})]})]}),Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-12",children:[Object(u.jsx)(L,{label:"Description",multiline:!0,value:n.description,optional:!1,error:c("description"),onChange:function(e){return l({description:e})}}),Object(u.jsxs)("div",{className:"row mb-1",children:[t,Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(q,{label:"Introduction date",icon:Object(u.jsx)("ion-icon",{name:"calendar-outline"}),error:c("introducedDate"),children:Object(u.jsx)(E,{value:n.introducedDate,onChange:function(e){return l({introducedDate:e})},error:c("introducedDate"),placeholder:"edit"})})})]}),Object(u.jsx)("div",{className:"row",children:Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(L,{label:"Homepage",value:n.homepageUrl,error:c("homepageUrl"),onChange:function(e){return l({homepageUrl:e})},icon:Object(u.jsx)("ion-icon",{name:"link-outline"})})})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(L,{label:Object(u.jsxs)(u.Fragment,{children:["License",o]}),value:n.licenseName,error:c("licenseName"),onChange:function(e){return l({licenseName:e})},icon:Object(u.jsx)("i",{className:"fab fa-creative-commons-by"})})}),Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(L,{label:"URL to license terms",value:n.licenseUrl,error:c("licenseUrl"),onChange:function(e){return l({licenseUrl:e})}})})]}),Object(u.jsx)("div",{className:"row mb-1",children:Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(q,{label:"Modalities",icon:Object(u.jsx)("ion-icon",{name:"shapes-outline"}),error:c("modalities"),children:Object(u.jsx)(U,{url:"/dataset-collection-autocomplete/",isMulti:!0,width:"200px",value:n.modalities,onChange:function(e){return l({modalities:e})},forwardParams:{area_name:"Modalities"}})})})}),Object(u.jsx)("div",{className:"row mb-1",children:Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(q,{label:"Languages",icon:Object(u.jsx)("ion-icon",{name:"language-outline"}),error:c("languages"),children:Object(u.jsx)(U,{url:"/dataset-collection-autocomplete/",isMulti:!0,width:"200px",value:n.languages,onChange:function(e){return l({languages:e})},forwardParams:{area_name:"Languages"}})})})}),Object(u.jsx)("div",{className:"row mb-1",children:Object(u.jsx)("div",{className:"col-12 col-md-6",children:Object(u.jsx)(q,{label:"Tasks",icon:Object(u.jsx)("ion-icon",{name:"cog-outline"}),error:c("tasks"),children:Object(u.jsx)(U,{url:"/task-autocomplete/",isMulti:!0,width:"200px",value:n.tasks,onChange:function(e){return l({tasks:e})}})})})})]})})]})},H=Object(N.b)(D.a);function G(e){var t=j.a.useRef(null),a=e.getNewOptionData,i=e.datasets,l=e.onChange,c=e.onCreate,o=Object(p.useState)(1),d=Object(s.a)(o,2),h=d[0],f=d[1];return Object(u.jsx)("div",{children:Object(u.jsx)(H,{selectRef:t,SelectComponent:D.a,getNewOptionData:a,onCreateOption:function(e){var n=Object(r.a)(Object(r.a)({},a(e,e)),{},{value:-h,url:"#new-dataset".concat(-h)});c(n),f(h+1),t.current.select.blur()},formatCreateLabel:function(e){return Object(u.jsxs)(u.Fragment,{children:['Add a new dataset "',Object(u.jsx)("strong",{children:e}),'"']})},loadOptions:function(e,t,a){var s=a.page;return b.a.get("/detailed-dataset-autocomplete/",{params:{q:e,page:s,forward:{canonical_only:!0,disable_create_option:!0}}}).then((function(e){return{options:e.data.results.map((function(e){var t=e.id,a=e.text,s=e.full_name,i=e.image,l=Object(n.a)(e,["id","text","full_name","image"]);return Object(r.a)({id:t,value:t,label:a,fullName:s,image:i?"".concat(i):null},l)})),hasMore:e.data.pagination.more,additional:{page:s+1}}}))},backspaceRemovesValue:!1,className:"react-datasets-select",classNamePrefix:"react-datasets-select",components:{DropdownIndicator:null,LoadingIndicator:null,MultiValueLabel:T,Option:F},styles:{multiValue:function(e,t){var a=t.data,n=a.introduced?"#f0f8ff":"#f9f9f9",s=a.introduced?"#c0e8ff":"#e0e0e0";return Object(r.a)(Object(r.a)({},e),{},{backgroundColor:n,borderColor:s})}},closeMenuOnSelect:!1,isClearable:!1,isMulti:!0,loadOptionsOnMenuOpen:!0,debounceTimeout:150,additional:{page:1},value:i,cacheUniqs:[h],onChange:l,placeholder:"Search for datasets..."})})}function K(e){var t=e.dataset,a=e.onChange,n=e.onRemove,i=e.paper,l=e.introducedByIsEditable,c=Object(p.useState)(t.id>=0),o=Object(s.a)(c,2),d=o[0],h=o[1],b=R.a.some(t.errors,(function(e,t){return null!=e&&e.length>0})),j=Object(u.jsxs)("div",{className:"container d-flex justify-content-between dataset-card-large",style:{padding:"8px",fontSize:"14px",cursor:"pointer",backgroundColor:b?"#fee":"#f9f9f9",borderRadius:d?"6px":"6px 6px 0px 0px"},onClick:function(){return h(!d)},children:[Object(u.jsx)(B,{dataset:Object(r.a)(Object(r.a)({},t),{},{isNew:!0}),editPrompt:Object(u.jsxs)("div",{style:{fontSize:"12px",color:"#666",textAlign:"right",display:"inline-block"},children:[Object(u.jsx)("i",{className:"fas fa-edit"}),"Edit"]})}),Object(u.jsx)("button",{onClick:function(e){e.stopPropagation(),n()},className:"btn btn-sm p-3",style:{width:"40px",textAlign:"center",fontSize:"18px",padding:"0px"},children:"\xd7"})]}),f=Object(u.jsx)(P,{sectionId:t.value,dataset:t,onChange:a,introducedByIsEditable:l,paper:i,errors:t.errors}),m=b?"#dc3545":"#ccc";return Object(u.jsxs)("div",{className:"mt-3 editable-dataset",style:{borderRadius:"6px",border:"1px solid ".concat(m),boxShadow:"1px 1px 8px #ddd"},children:[j,Object(u.jsx)(y.a,{in:!d,className:"editable-dataset-content",children:Object(u.jsxs)("div",{children:[Object(u.jsx)("hr",{className:"mt-0"}),f]})})]})}function Y(e){var t,a=e.datasets,n=e.onChange,l=e.getNewOptionData,c=e.introducedByIsEditable,o=void 0===c||c,d=e.paper,h=void 0===d?null:d,b=e.initialIntroducedDate,j=void 0===b?null:b,f=e.disableCreation,m=void 0!==f&&f,g=function(e,t){var s=a||[],r=R.a.findIndex(s,{value:t});if(-1!==r){var l=Object(i.a)(s);l[r]=e,n(l)}},v=function(e){var t=a||[],s=R.a.findIndex(t,{value:e});-1!==s&&n([].concat(Object(i.a)(t.slice(0,s)),Object(i.a)(t.slice(s+1))))},O=Object(p.useState)(1),x=Object(s.a)(O,2),w=x[0],y=x[1],N=function(){var e=a||[],t=Object(r.a)(Object(r.a)({},l(null,"")),{},{value:-w});null!=j&&(t.introducedDate=j),n([].concat(Object(i.a)(e),[t])),y(w+1)},D=(a||[]).map((function(e){return Object(u.jsx)(K,{dataset:e,onChange:function(t){return g(t,e.value)},onRemove:function(){return S(e.value)},introducedByIsEditable:o,paper:h},e.value)})),S=function(e){var t=R.a.find(a||[],{value:e});"undefined"!==typeof t&&(t.isNew&&function(e){var t=l(null,"");return null!=j&&(t.introducedDate=j),!R.a.isEqual(R.a.omit(e,"value","imageFile"),R.a.omit(t,"imageFile"))}(t)?(E(t),F(!0)):v(e))},A=Object(p.useState)({}),_=Object(s.a)(A,2),I=_[0],E=_[1],M=Object(p.useState)(!1),T=Object(s.a)(M,2),B=T[0],F=T[1];return m||(t=Object(u.jsx)("div",{style:{paddingTop:"4px"},children:Object(u.jsxs)("button",{onClick:function(){return N()},className:"btn btn-sm btn-outline-primary",children:[Object(u.jsx)("i",{className:"fas fa-plus-circle"}),"\xa0",a&&a.length>0?"Add more datasets":"Add a new dataset"]})})),Object(u.jsxs)(u.Fragment,{children:[D,Object(u.jsx)("div",{style:{display:"inline-block",paddingBottom:"15px",paddingTop:"15px",fontSize:"14px"},children:t}),Object(u.jsxs)(C.a,{show:B,onHide:function(){return F(!1)},centered:!0,children:[Object(u.jsx)(C.a.Header,{closeButton:!0,children:Object(u.jsxs)(C.a.Title,{children:["Are you sure you want to remove ",I.name?Object(u.jsx)("strong",{children:I.name}):"this dataset","?"]})}),Object(u.jsxs)(C.a.Body,{children:["The details you provided for ",I.name?I.name:"this dataset"," will be lost."]}),Object(u.jsxs)(C.a.Footer,{children:[Object(u.jsx)(k.a,{variant:"secondary",onClick:function(){return F(!1)},children:"Cancel"}),Object(u.jsx)(k.a,{variant:"primary",onClick:function(){return e=I.value,v(e),void F(!1);var e},children:"Remove"})]})]})]})}function z(e){var t=e.paper,a=(e.error,e.page),l=Object(v.f)(),c=Object(p.useState)(!1),o=Object(s.a)(c,2),d=o[0],h=o[1],f=Object(p.useState)(!1),m=Object(s.a)(f,2),g=m[0],O=m[1],x=j.a.useRef();j.a.useEffect((function(){var e=l.block((function(t,n){return!a.state.isDirty||(x.current=function(){e(),a.setState({isDirty:!1}),O(!1),"PUSH"===n?l.push(t):l.goBack()},O(!0),!1)}));return function(){e()}}),[]);var N,D=function(e){var t=e.id,a=e.image,s=e.introduced_by,i=e.introduced_date,l=e.homepage_url,c=e.license_name,o=e.license_url,d=e.modalities,u=e.languages,h=e.tasks,b=Object(n.a)(e,["id","image","introduced_by","introduced_date","homepage_url","license_name","license_url","modalities","languages","tasks"]);return Object(r.a)({value:t,id:t,isNew:!1,image:a?"".concat(a):"".concat(MEDIA_URL,"datasets/default.gif"),initialImage:a?"".concat(a):"".concat(MEDIA_URL,"datasets/default.gif"),introducedBy:{value:s.id,label:s.title},introducedDate:i,homepageUrl:l,licenseName:c,licenseUrl:o,modalities:d.map((function(e){return{value:e.id,label:e.name}})),languages:u.map((function(e){return{value:e.id,label:e.name}})),tasks:h.map((function(e){return{value:e.id,label:e.name,isFixed:e.locked}}))},b)},S=Object(p.useState)(t.introducedDatasets.map((function(e){return Object(r.a)({introduced:!0,errors:[]},e)})).map(D)),A=Object(s.a)(S,2),R=A[0],_=A[1],I=function(e){return a.setState({isDirty:!0},(function(){return _(e)}))},E=Object(p.useState)(t.mentionedDatasets.map((function(e){return Object(r.a)({introduced:!1},e)})).map(D)),M=Object(s.a)(E,2),T=M[0],B=M[1],F=Object(p.useState)([]),Q=Object(s.a)(F,2),U=Q[0],q=Q[1],L=function(e){return a.setState({isDirty:!0},(function(){return q(e)}))},P=function(){var e=function(e,t){var a=new FormData;a.append("form-TOTAL_FORMS",e.length.toString()),a.append("form-INITIAL_FORMS",e.filter((function(e){return"undefined"!==typeof e.id})).length.toString()),a.append("form-MAX_NUM_FORMS",""),e.forEach((function(e,t){var n=e.id,s=e.name,r=e.fullName,i=e.description,l=e.introducedBy,c=e.introducedDate,o=e.homepageUrl,d=e.licenseName,u=e.licenseUrl,h=e.imageFile,b=e.modalities,p=e.languages,j=e.tasks,f="form-".concat(t,"-");"undefined"!==typeof n&&a.append(f+"id",n),a.append(f+"name",s),a.append(f+"full_name",r),a.append(f+"description",i),a.append(f+"paper",null!=l?l.value.toString():""),a.append(f+"introduced_date",c),a.append(f+"url",o),a.append(f+"license_name",d),a.append(f+"license_url",u),a.append(f+"image",h),(b||[]).forEach((function(e){var t=e.value;return a.append(f+"modalities",t)})),(p||[]).forEach((function(e){var t=e.value;return a.append(f+"languages",t)})),(j||[]).forEach((function(e){var t=e.value;return a.append(f+"tasks",t)}))}));var n=JSON.stringify((t||[]).map((function(e){return e.id})));return a.append("mentioned_datasets_ids",n),a}([].concat(Object(i.a)(z?R:[]),Object(i.a)(Z?U:[])),Z?T:[]);e.append("paper_id",t.id),h(!0),b.a.post("/api/v0/papers/attach-datasets/",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){a.setState({isDirty:!1}),l.push("attached-datasets"),a.fetchPaper()})).catch((function(e){if(e.response&&400===e.response.status)if("Validation errors"===e.response.data.error){var t=e.response.data.forms_errors.map((function(e){var t=e.name,a=e.__all__,s=e.full_name,i=e.license_name,l=e.license_url,c=e.url,o=e.paper,d=e.introduced_date,u=Object(n.a)(e,["name","__all__","full_name","license_name","license_url","url","paper","introduced_date"]);return"undefined"!==typeof a&&(t=["Repeated dataset Name."]),Object(r.a)({name:t,fullName:s,homepageUrl:c,introducedBy:o,introducedDate:d,licenseName:i,licenseUrl:l},u)}));z&&I(R.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{errors:t.shift()})}))),Z&&L(U.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{errors:t.shift()})}))),h(!1)}else a.setState({loading:!1,error:e.response.data.error});else a.setState({loading:!1,screen:"errorScreen"})}))},H=Object(p.useState)(0!==t.introducedDatasets.length),K=Object(s.a)(H,2),z=K[0],V=K[1],J=function(e){0===t.introducedDatasets.length||e||a.setState({isDirty:!0}),V(e)},W=Object(p.useState)(0!==t.mentionedDatasets.length),X=Object(s.a)(W,2),Z=X[0],$=X[1],ee=function(e){0===t.mentionedDatasets.length||e||a.setState({isDirty:!0}),$(e)},te=function(e,t){return{label:t,name:t,isNew:!0,fullName:"",description:"Click to add a brief description of the dataset (Markdown and LaTeX enabled).\n\nProvide:\n\n* a high-level explanation of the dataset characteristics\n* explain motivations and summary of its content\n* potential use cases of the dataset\n",homepageUrl:"",licenseName:"",licenseUrl:"",introducedBy:null,introducedDate:"",introduced:!1,modalities:[],languages:[],tasks:[],image:"".concat(MEDIA_URL,"datasets/default.gif"),imageFile:null,initialImage:"".concat(MEDIA_URL,"datasets/default.gif"),errors:{}}},ae=Object(u.jsx)(y.a,{in:z,children:Object(u.jsx)("div",{children:Object(u.jsx)(Y,{datasets:R,onChange:I,getNewOptionData:function(e,a){return Object(r.a)(Object(r.a)({},te(0,a)),{},{introducedBy:{value:t.id,label:t.title}})},introducedByIsEditable:!1,initialIntroducedDate:null!=t?t.published:null})})}),ne=Object(u.jsx)(y.a,{in:Z,children:Object(u.jsxs)("div",{children:[Object(u.jsx)(G,{datasets:T,onChange:function(e){return a.setState({isDirty:!0},(function(){return B(e)}))},onCreate:function(e){return L([].concat(Object(i.a)(U),[e]))},getNewOptionData:te}),Object(u.jsx)(Y,{datasets:U,onChange:L,getNewOptionData:te,disableCreation:!0,paper:t})]})});return d&&(N=a.loadingScreen()),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)(C.a,{show:g,onHide:function(){return O(!1)},centered:!0,children:[Object(u.jsx)(C.a.Header,{closeButton:!0,children:Object(u.jsx)(C.a.Title,{children:"Are you sure you want to leave this step?"})}),Object(u.jsx)(C.a.Body,{children:"Your changes from this step are not saved."}),Object(u.jsxs)(C.a.Footer,{children:[Object(u.jsx)(k.a,{variant:"secondary",onClick:function(){return O(!1)},children:"Cancel"}),Object(u.jsx)(k.a,{variant:"danger",onClick:function(){return x.current()},children:"Discard Changes"})]})]}),Object(u.jsxs)("div",{style:{opacity:d?.5:null},children:[Object(u.jsx)("h1",{children:"Link Datasets"}),Object(u.jsxs)("div",{className:"paper-page-edit-dataset-modal",children:[Object(u.jsx)("h5",{children:"1. Does your paper introduce a new dataset?"}),Object(u.jsxs)("div",{className:"pb-3",children:[Object(u.jsx)(w.a.Check,{className:"mr-5",inline:!0,label:"Yes",type:"radio",checked:z,onChange:function(){return J(!0)}}),Object(u.jsx)(w.a.Check,{inline:!0,label:"No",type:"radio",checked:!z,onChange:function(){return J(!1)}})]}),ae,Object(u.jsx)("h5",{className:"mt-4",children:"2. Does your paper use a dataset from another paper?"}),Object(u.jsxs)("div",{className:"pb-3",children:[Object(u.jsx)(w.a.Check,{className:"mr-5",inline:!0,label:"Yes",type:"radio",checked:Z,onChange:function(){return ee(!0)}}),Object(u.jsx)(w.a.Check,{inline:!0,label:"No",type:"radio",checked:!Z,onChange:function(){return ee(!1)}})]}),ne,Object(u.jsx)("div",{className:"row call-to-action",children:Object(u.jsx)("div",{className:"col-lg-12 text-center",children:Object(u.jsx)("span",{onClick:function(){return P()},className:"badge badge-metadata clickable",children:"Attach Datasets"})})})]})]}),N]})}t.default=_},361:function(e,t){window.$(document).ready((function(){if($("#official-pgr-form").length){var e=$("#official-pgr-ids"),t=$(".radios-version-element"),a=$(".checkboxes-version-element"),n=$("#official-pgr-multiple-switch"),s=$(".official-pgr-checkbox"),r=$(".official-pgr-radio");s.filter(":checked").length>1?i():l(),s.on("change",c),r.on("change",o),n.on("change",(function(e){return e.target.checked?i():l()}))}function i(){t.hide(),a.show(),n.prop("checked",!0),c()}function l(){t.show(),a.hide(),n.prop("checked",!1),o()}function c(){e.val(s.filter(":checked").map((function(e,t){return t.value})).get().join(","))}function o(){e.val(r.filter(":checked").val())}}))},362:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(26),r=a(12),i=a(13),l=a(15),c=a(14),o=a(0),d=a(1),u=a.n(d),h=a(18),b=a.n(h),p=a(21),j=a(8),f=a(17),m=a(73),g=a(37),v=u.a.lazy((function(){return Promise.all([a.e(1),a.e(15),a.e(4)]).then(a.bind(null,577))})),O=u.a.lazy((function(){return Promise.all([a.e(1),a.e(14),a.e(12)]).then(a.bind(null,581))}));function x(e){var t=e.row;if(0!==Object.keys(t.mlmodel).length){var a=t.mlmodeldetails?Object(o.jsxs)(o.Fragment,{children:[t.mlmodel_short,Object(o.jsx)("br",{}),Object(o.jsxs)("span",{className:"small",children:["(",t.mlmodeldetails,")"]})]}):t.mlmodel_short,n=null;null!==t.external_source_url?n=t.external_source_url:null!==t.mlmodel.url&&(n=t.mlmodel.url);var s=n?Object(o.jsx)("a",{href:n,children:a}):a;return Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper-title method-name",children:s})})}return t.paper.id&&t.method_details?Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper-title method-name",children:Object(o.jsxs)("a",{style:{fontSize:"1rem"},href:t.paper.url,children:[t.method_short,Object(o.jsx)("br",{}),Object(o.jsxs)("span",{className:"small",children:["(",t.method_details,")"]})]})})}):t.paper.id&&!t.method_details?Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper-title method-name",children:Object(o.jsx)("a",{style:{fontSize:"1rem"},href:t.paper.url,children:t.method_short})})}):!t.paper.id&&t.method_details?Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper-title method-name",children:Object(o.jsxs)("a",{style:{fontSize:"1rem"},href:t.paper.url,children:[t.method_short,Object(o.jsx)("br",{}),Object(o.jsxs)("span",{className:"small",children:["(",t.method_details,")"]})]})})}):Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper-title method-name",children:t.method_short})})}function w(e){var t=e.row;return t.paper.id?Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"meta-information",children:Object(o.jsx)("a",{href:t.paper.url,children:t.paper.title})})}):Object(o.jsx)("td",{})}var y=a(76),C=a.n(y),k=a(107),N=a(19),D=a.n(N),S=a(54),A=a(378),R=a(376),I=a(66),E=a(87),M=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={key:0,modalShow:!1,nextRow:null,showEdit:!1,showCreateTagForm:!1,createTagName:"",createTagColor:"#2771D3"},e.manageTags=function(){USER_IS_AUTHENTICATED?e.setState({modalShow:!0}):$("#loginModal").modal("show")},e.endManageTags=function(){e.setState({modalShow:!1})},e.deleteRowTag=function(t,a){D.a.delete("/api/internal/evaluation-table-row-tags/",{params:{row_id:t,tag_id:a}}),e.props.onDeleteRowTag&&e.props.onDeleteRowTag(t,a),e.setState({key:e.state.key+1})},e.linkRowTag=function(t,a){D.a.post("/api/internal/evaluation-table-row-tags/",{row_id:t,tag_id:a.id}),e.props.onLinkRowTag&&e.props.onLinkRowTag(t,a),e.setState({key:e.state.key+1})},e.createAndLinkRowTag=function(){var t=e.state,a=t.createTagName,n=t.createTagColor;D.a.post("/api/internal/tags/",{name:a,color:n}).then((function(t){e.linkRowTag(e.props.row.row_id,t.data)})),e.setState({showCreateTagForm:!1})},e.searchTag=function(){var t=Object(k.a)(C.a.mark((function t(a,n){var s,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.length/10+1,t.next=3,D.a.get("/api/internal/tags/search/",{params:{q:a,page:s}});case 3:return r=t.sent,t.abrupt("return",{options:r.data.results.filter((function(t){return!e.state.nextRow.tags.find((function(e){return e.id===t.id}))})).map((function(e){return{value:e,label:e.name}})),hasMore:r.data.has_more});case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}(),e.showEdit=function(){e.setState({showEdit:!0})},e.hideEdit=function(){e.setState({showCreateTagForm:!1,showEdit:!1})},e.openCreateTagForm=function(t){t.preventDefault(),e.setState({showCreateTagForm:!0})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({nextRow:this.props.row}),D.a.defaults.headers.common["X-CSRFToken"]=CSRF_TOKEN}},{key:"render",value:function(){var e=this,t=this.props,a=t.row,n=t.toggleTags,s=this.state,r=s.modalShow,i=s.nextRow,l=(s.showEdit,s.showCreateTagForm),c=s.createTagName,d=s.createTagColor,u=a.tags,h=this.props.tagEditEnabled?"show-edit":"",b=u.length?"":"show-edit-center";return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("td",{className:"sota-row-tags-cell text-center ".concat(h," ").concat(b),onMouseEnter:this.showEdit,onMouseLeave:this.hideEdit,children:[0!==u.length&&u.map((function(t){return Object(o.jsx)("span",{className:"badge sota-row-tags",style:{backgroundColor:t.color},onClick:function(){return n&&e.props.toggleTags(t.id)},children:t.name},t.id)})),Object(o.jsx)("span",{className:"edit-tags",onClick:function(){return e.manageTags()},children:Object(o.jsx)("ion-icon",{name:"add-circle-outline"})})]}),Object(o.jsxs)(S.a,{className:"sota-row-tags-modal",show:r,onHide:this.endManageTags,children:[Object(o.jsx)(S.a.Header,{closeButton:!0,children:Object(o.jsx)("h5",{className:"modal-title",children:"Manage tags"})}),Object(o.jsxs)(S.a.Body,{children:[i&&Object(o.jsx)(A.a,{className:"mb-3",children:i.tags.map((function(t){return Object(o.jsxs)(R.a,{className:"mr-2 mb-2",children:[Object(o.jsx)(I.a,{className:"text-nowrap",variant:"secondary",style:{backgroundColor:t.color,opacity:.7},children:t.name}),Object(o.jsx)(I.a,{variant:"secondary",onClick:function(){return e.deleteRowTag(i.row_id,t.id)},children:Object(o.jsx)("i",{className:"fa fa-trash-alt"})})]},t.id)}))}),!l&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h6",{className:"mb-3",children:"Link existing tag"}),Object(o.jsx)(E.a,{loadOptions:this.searchTag,onChange:function(t){var a=t.value;return e.linkRowTag(i.row_id,a)},className:"mb-3"},this.state.key)]}),!l&&Object(o.jsxs)("div",{className:"modal-help-text",children:["Not in the list?",Object(o.jsx)("br",{}),Object(o.jsxs)("a",{href:"add-tag",onClick:this.openCreateTagForm,children:[Object(o.jsx)("ion-icon",{name:"add"}),"Create a new tag"]})]}),l&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h6",{children:"Create new tag"}),Object(o.jsxs)("div",{className:"row",children:[Object(o.jsx)("div",{className:"col m-0 pt-0 pb-0 pl-3 pr-3",children:Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{className:"col-form-label",children:"Name:"}),Object(o.jsx)("input",{value:c,onChange:function(t){return e.setState({createTagName:t.target.value})},maxLength:"32",className:"textinput textInput form-control"})]})}),Object(o.jsx)("div",{className:"col m-0 pt-0 pb-0 pl-3 pr-3",children:Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{className:"col-form-label",children:"Color:"}),Object(o.jsx)("input",{value:d,onChange:function(t){return e.setState({createTagColor:t.target.value})},type:"color",className:"form-control"})]})})]}),Object(o.jsxs)("div",{className:"text-right",children:[Object(o.jsx)(I.a,{className:"border-0",variant:"secondary",onClick:function(){return e.setState({showCreateTagForm:!1})},children:"Cancel"})," ",Object(o.jsx)(I.a,{className:"border-0",variant:"primary",onClick:this.createAndLinkRowTag,children:"Create"})]})]})]})]})]})}}]),a}(u.a.Component),T="data:image/png;base64,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";function B(e){var t=e.row;if(t.paper.id||null!==t.external_source_url){var a="";if(null!==t.external_source_url){var n=Object(o.jsx)("ion-icon",{name:"enter-outline"});(t.external_source_url.includes("eval.ai")||t.external_source_url.includes("evalai.cloudcv.org"))&&(n=Object(o.jsx)("img",{src:T,height:"14",width:"14"})),a=Object(o.jsx)("a",{href:t.external_source_url,target:"_blank",children:n})}else a=null!==t.paper.review_url?Object(o.jsx)("a",{href:t.paper.review_url,target:"_blank",children:Object(o.jsx)("ion-icon",{name:"enter-outline"})}):Object(o.jsx)("a",{href:t.paper.url+"#results",target:"_blank",children:Object(o.jsx)("ion-icon",{name:"enter-outline"})});return Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper",children:a})})}return Object(o.jsx)("td",{})}function F(e){var t=e.row;return t.paper.code?Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"github",children:Object(o.jsx)("a",{href:t.paper.url+"#code",children:Object(o.jsx)("ion-icon",{name:"logo-github"})})})}):Object(o.jsx)("td",{})}var Q=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=b.a.findDOMNode(this);b.a.unmountComponentAtNode(e),e.outerHTML=this.createComment()}},{key:"createComment",value:function(){var e=this.props.text;return this.props.trim&&(e=e.trim()),"\x3c!-- ".concat(e," --\x3e")}},{key:"render",value:function(){return Object(o.jsx)("td",{})}}]),a}(u.a.Component);function U(e){var t=e.row,a="",n=Object(o.jsx)("ion-icon",{name:"layers-outline"});if(null!==t.external_source_url)(t.external_source_url.includes("eval.ai")||t.external_source_url.includes("evalai.cloudcv.org"))&&(n=Object(o.jsx)("img",{src:T,height:"14",width:"14"})),a=Object(o.jsx)("a",{href:t.external_source_url,target:"_blank",children:n});else{if(0===Object.keys(t.mlmodel).length||!t.mlmodel.url)return Object(o.jsx)("td",{});a=Object(o.jsx)("a",{href:t.mlmodel.url,children:n})}return Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"paper",children:a})})}Q.defaultProps={trim:!0};var q=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={tagEditEnabled:!1},e.highligh=function(t){return e.props.highlight&&e.props.highlight.id===t.paper.id?"row-highlight":""},e.toggleEditVisibility=function(){e.setState({tagEditEnabled:!e.state.tagEditEnabled})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.alwaysShowPaperColumn||_.some(this.props.data,"paper.title");return Object(o.jsx)("div",{className:"view-sota-table",children:Object(o.jsxs)("table",{className:"table-striped",children:[Object(o.jsx)("thead",{children:Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{style:{textAlign:"center"},children:"Rank"}),Object(o.jsx)("th",{style:{width:"30%"},children:"Model"}),this.props.metrics.map((function(t){return Object(o.jsx)("th",{className:"text-center",onClick:e.props.selectMetric.bind(null,t.name),children:Object(o.jsxs)("span",{className:"metric-column-header-text",style:{fontWeight:e.props.selectedMetric===t.name?"bold":""},children:[t.name,t.is_fixed&&Object(o.jsx)("a",{href:"https://www.computerprogress.com/collaborate",style:{fontSize:"14px",marginLeft:"2px",position:"relative",top:"3px"},children:Object(o.jsx)("ion-icon",{name:"information-circle-outline"})}),Object(o.jsx)("i",{className:"sort-arrow fas ".concat(e.props.selectedMetric===t.name?"metric-highest"===e.props.selectedMetricDirection?"fa-arrow-alt-up":"fa-arrow-alt-down":"")})]})},t.name)})),this.props.showUsesColumn&&Object(o.jsx)("th",{style:{textAlign:"center"},children:"Extra Training Data"}),t&&Object(o.jsx)("th",{style:{width:"38%"},children:"Paper"}),this.props.showCodeColumn&&Object(o.jsx)("th",{className:"text-center",children:"Code"}),this.props.showResultColumn&&Object(o.jsx)("th",{className:"text-center",children:"Result"}),this.props.showModelDetailsColumn&&Object(o.jsx)("th",{className:"text-center",children:"Details"}),Object(o.jsx)("th",{className:"text-center",children:"Year"}),this.props.showTagsColumn&&Object(o.jsxs)("th",{className:"text-center",children:["Tags",Object(o.jsx)("span",{className:"tags-header-edit",onClick:function(){return e.toggleEditVisibility()},children:Object(o.jsx)("i",{className:"fas fa-edit"})})]})]})}),Object(o.jsx)("tbody",{children:this.props.data.map((function(a,n){return Object(o.jsxs)("tr",{className:e.highligh(a),children:[Object(o.jsx)(Q,{text:"".concat(a.row_id)}),Object(o.jsx)("td",{className:"text-center",children:n+1}),Object(o.jsx)(x,{row:a}),e.props.metrics.map((function(e){return Object(o.jsx)("td",{className:"metric-report text-center",children:a.metrics[e.name]},e.name)})),e.props.showUsesColumn&&Object(o.jsx)("td",{style:{textAlign:"center"},children:Object(o.jsx)("ion-icon",{name:a.uses_additional_data?"checkmark":"close"})}),t&&Object(o.jsx)(w,{row:a}),e.props.showCodeColumn&&Object(o.jsx)(F,{row:a}),e.props.showResultColumn&&Object(o.jsx)(B,{row:a}),e.props.showModelDetailsColumn&&Object(o.jsx)(U,{row:a}),Object(o.jsx)("td",{children:Object(o.jsx)("div",{className:"meta-information date",children:a.evaluation_date?new Date(a.evaluation_date).getFullYear():""})}),e.props.showTagsColumn&&Object(o.jsx)(M,{row:a,onDeleteRowTag:e.props.onDeleteRowTag,onLinkRowTag:e.props.onLinkRowTag,toggleTags:e.props.toggleTags,tagEditEnabled:e.state.tagEditEnabled})]},a.row_id)}))})]})})}}]),a}(u.a.Component),L=a.p+"static/media/spin-1s-32px.1ec4a49d.gif";function P(){return Object(o.jsx)("div",{className:"text-center",children:Object(o.jsx)("img",{src:L})})}var H=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var i;Object(r.a)(this,a),(i=t.call(this,e)).clearFilter=function(e){e.preventDefault();var t,a=[],n=Object(f.a)(i.state.defaultMetrics);try{for(n.s();!(t=n.n()).done;){var s=t.value;a.push(i.state.allTableMetrics[s])}}catch(r){n.e(r)}finally{n.f()}i.setState({metric:i.props.tableMetrics[0].name,dimension:"date",filter:"all",tagFilter:new Set,selectedFixedMetrics:new Set,metricsSelected:i.state.defaultMetrics.slice(),tableMetrics:a},(function(){i.updateData(),i.updateUrl()}))},i.highlightTag=function(e,t){$(".highcharts-point.tag-".concat(e)).css("fill","#0297b1")},i.unhighlightTag=function(e){$(".highcharts-point.tag-".concat(e)).css("fill","")},i.onDeleteRowTag=function(e,t){var a=i.props.tableData.find((function(t){return t.row_id===e})),n=a.tags.findIndex((function(e){return e.id===t}));a.tags.splice(n,1),i.updateData()},i.onLinkRowTag=function(e,t){var a=i.props.tableData.find((function(t){return t.row_id===e}));-1===a.tags.findIndex((function(e){return e.id===t.id}))&&a.tags.push(t),i.updateData()},i.toggleTagFilter=function(e){var t=i.state.tagFilter;t.has(e)?t.delete(e):t.add(e),i.setState({tagFilter:new Set(Object(j.a)(t))},(function(){i.updateData(),i.updateUrl()}))},i.toggleFixedMetric=function(e){var t=i.state,a=t.selectedFixedMetrics,n=t.metricsSelected,s=t.allTableMetrics,r=s[0].name;if(a.has(e)){a.delete(e);var l=n.indexOf(e);l>-1&&n.splice(l,1)}else a.add(e),r=s[e].name;var c=new Set([].concat(Object(j.a)(n),Object(j.a)(a)));c=Array.from(c).sort();var o,d=[],u=Object(f.a)(c);try{for(u.s();!(o=u.n()).done;){var h=o.value;d.push(s[h])}}catch(b){u.e(b)}finally{u.f()}i.setState({selectedFixedMetrics:new Set(Object(j.a)(a)),metricsSelected:c,tableMetrics:d,metric:r},(function(){i.updateData(),i.updateUrl()}))},i.showUsesAdditionalDataColumn=function(e){for(var t=0;t<e.length;t++)if(e[t].uses_additional_data)return!0;return!1},i.onConfigChange=function(e){var t=e.target,a=t.name,n=t.value;"metric"===a&&n===i.state.dimension?i.setState({metric:n,dimension:"date"},(function(){i.updateUrl(),i.updateData()})):i.setState(Object(s.a)({},a,n),(function(){"metric"!==a&&"dimension"!==a||i.updateUrl(a),i.updateData()}))};var l={all:i.convertChartData(e.chartData.all),no_additional_data:i.convertChartData(e.chartData.no_additional_data),uses_additional_data:i.convertChartData(e.chartData.uses_additional_data)},c=e.tableData.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{evaluationDateObject:e.evaluation_date&&new Date(e.evaluation_date)})})),o=new URLSearchParams(window.location.search),d=o.get("metric"),h=d&&e.tableMetrics.find((function(e){return e.name===d}))?d:e.tableMetrics[0].name,b=o.get("dimension"),p="date";b&&e.tableMetrics.find((function(e){return e.name===b}))&&b!==h&&(p=b);for(var g=!1,v=[],O=[],x=[],w=0;w<e.tableMetrics.length;w++){var y=e.tableMetrics[w];y.is_fixed?(g=!0,O.push(w),y.name==h&&v.push(w)):(v.push(w),x.push(w))}for(var C=[],k=0,N=v;k<N.length;k++){var D=N[k];C.push(e.tableMetrics[D])}i.state={state:"view",chartData:l,allTableMetrics:e.tableMetrics,tableMetrics:C,tableData:c,saveSpinner:"off",showUsesColumn:i.showUsesAdditionalDataColumn(e.tableData),filter:"all",metric:h,metricDirection:i.getMetricDirection(e.tableMetrics[0].name),dimension:p,competition:"all",hasCompetition:e.hasCompetition,hasFixedMetrics:g,tagFilter:new Set,allTags:new Set,metricsSelected:v,allFixedMetrics:O,selectedFixedMetrics:new Set,defaultMetrics:x};var S,A=Object(f.a)(i.props.tableData);try{for(A.s();!(S=A.n()).done;){var R,_=S.value,I=Object(f.a)(_.tags);try{for(I.s();!(R=I.n()).done;){var E=R.value;i.state.allTags.add(E.id)}}catch(U){I.e(U)}finally{I.f()}}}catch(U){A.e(U)}finally{A.f()}var M,T=o.get("tag_filter"),B=T?T.split(",").map((function(e){return parseInt(e)})):[],F=Object(f.a)(B);try{for(F.s();!(M=F.n()).done;){var Q=M.value;i.state.tagFilter.add(Q)}}catch(U){F.e(U)}finally{F.f()}return i.state.allTags.add(0),i.editTableRef=u.a.createRef(),i.state.filteredChartData=i.computeChartData(),i.state.filteredTableData=i.computeTableData(),i.selectMetric=i.selectMetric.bind(Object(m.a)(i)),i.updateData=i.updateData.bind(Object(m.a)(i)),i}return Object(i.a)(a,[{key:"selectMetric",value:function(e){this.setState({metric:e},this.updateData)}},{key:"getMetricDirection",value:function(e){return this.props.tableMetrics.find((function(t){return t.name===e})).is_loss?"metric-lowest":"metric-highest"}},{key:"convertChartData",value:function(e){return{yAxis:e.yAxis,data:{trend:Object(n.a)(Object(n.a)({},e.data.trend),{},{click:this.onClick,dataPoints:e.data.trend.dataPoints.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{x:new Date(e.x)})}))}),other:Object(n.a)(Object(n.a)({},e.data.other),{},{click:this.onClick,dataPoints:e.data.other.dataPoints.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{x:new Date(e.x)})}))})}}}},{key:"updateUrl",value:function(){var e={};this.state.metric!==this.props.tableMetrics[0].name&&(e.metric=this.state.metric),"date"!==this.state.dimension&&(e.dimension=this.state.dimension),this.state.tagFilter.size&&(e.tag_filter=Object(j.a)(this.state.tagFilter).join(","));var t=Object.entries(e).map((function(e){var t=Object(p.a)(e,2),a=t[0],n=t[1];return"".concat(encodeURIComponent(a),"=").concat(encodeURIComponent(n))})).join("&");t=t?"?"+t:window.location.pathname,window.history.pushState("","",t)}},{key:"updateData",value:function(){this.setState({filteredChartData:this.computeChartData(),filteredTableData:this.computeTableData(),metricDirection:this.getMetricDirection(this.state.metric)})}},{key:"hasAnyFilter",value:function(){return"all"!==this.state.filter||this.state.metric!==this.props.tableMetrics[0].name||"date"!==this.state.dimension||0!==this.state.tagFilter.size}},{key:"filteredTableData",value:function(){var e=this.state,t=e.tableData,a=e.filter,n=e.tagFilter,s=e.allTags,r=e.competition,i=e.hasCompetition,l=e.metric,c=e.dimension,o=e.selectedFixedMetrics,d=e.hasFixedMetrics,u=e.allTableMetrics;if(t=t.slice(),"all"!==a){var h="with-data"===a;t=t.filter((function(e){return e.uses_additional_data===h}))}if(this.hasAnyFilter()&&(t=t.filter((function(e){var t=e.raw_metrics[l],a="date"===c?e.evaluationDateObject:e.raw_metrics[c];return t&&a}))),n.size&&n.size<s.size+1&&(t=t.filter((function(e){var t=new Set(Object(j.a)(e.tags.map((function(e){return e.id}))));return 0===t.size&&(t=new Set([0])),new Set(Object(j.a)(n).filter((function(e){return t.has(e)}))).size}))),d&&o.size){var b,p=[],m=Object(f.a)(o);try{for(m.s();!(b=m.n()).done;){var g=b.value;p.push(u[g].name)}}catch(v){m.e(v)}finally{m.f()}t=t.filter((function(e){var t,a=!0,n=Object(f.a)(p);try{for(n.s();!(t=n.n()).done;){var s=t.value;s in e.raw_metrics&&null!=e.raw_metrics[s]||(a=!1)}}catch(v){n.e(v)}finally{n.f()}return a}))}return i&&"published"===r&&(t=t.filter((function(e){return null!==e.paper.id}))),t}},{key:"sortedTableData",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.getMetricDirection(t),s="metric-lowest"===n?1:-1;a&&(s*=-1);var r="metric-highest"===n?-1/0:1/0;return Object(j.a)(e).sort((function(e,a){var n=e.raw_metrics[t];n=null!==n?n:r;var i=a.raw_metrics[t];return(n-(i=null!==i?i:r))*s}))}},{key:"computeTableData",value:function(){var e=this.state.metric,t=this.filteredTableData();return this.sortedTableData(t,e)}},{key:"computeChartData",value:function(){var e=this.state,t=e.metric,a=e.dimension,s=this.props.sotaColor,r=this.getMetricDirection(t),i=this.filteredTableData();"date"===a?i.sort((function(e,t){return e.evaluationDateObject-t.evaluationDateObject})):(i=this.sortedTableData(i,a,!0),a.includes("param")||i.reverse());var l={click:void 0,markerSize:10,showInLegend:!0,toolTipContent:"{name}: {y}",yValueFormatString:"#.#     %"},c={data:{other:Object(n.a)(Object(n.a)({},l),{},{color:"#ddd",name:"Other models",type:"scatter",dataPoints:[]}),trend:Object(n.a)(Object(n.a)({},l),{},{color:s,type:"line",dataPoints:[]}),stddevOther:{type:"errorbar",dataPoints:[]},stddevTrend:{type:"errorbar",dataPoints:[]}},yAxis:{title:t,includeZero:!1,gridColor:"#ddd"},xAxis:{title:"date"===a?"":a}};c.xAxis.type="date"===a?"datetime":"linear";var o="metric-highest"===r?"highest":"lowest";c.data.trend.name="Top 1 Accuracy"===t&&"metric-highest"===r?"State-of-the-art models":"Models with ".concat(o," ").concat(t),"date"!==a&&(c.data.trend.name="Pareto frontier");var d,u=1/0,h=-1/0,b=Object(f.a)(i);try{for(b.s();!(d=b.n()).done;){var p=d.value,j=p.raw_metrics[t],m="date"===a?p.evaluationDateObject:p.raw_metrics[a];if(j&&m){var g={name:p.method,url:p.paper.url,x:m,y:j,stddev:parseFloat(p.metrics[t].split("\xb1")[1]),className:p.tags.length?p.tags.map((function(e){return"tag-".concat(e.id)})).join(" "):"tag-0"};"metric-highest"===r&&j>h||"metric-lowest"===r&&j<u?(c.data.trend.dataPoints.push(g),g.stddev&&c.data.stddevTrend.dataPoints.push(Object(n.a)(Object(n.a)({},g),{},{x:g.x,low:g.y-g.stddev,high:g.y+g.stddev}))):(c.data.other.dataPoints.push(g),g.stddev&&c.data.stddevOther.dataPoints.push(Object(n.a)(Object(n.a)({},g),{},{x:g.x,low:g.y-g.stddev,high:g.y+g.stddev}))),u=Math.min(u,j),h=Math.max(h,j)}}}catch(O){b.e(O)}finally{b.f()}var v=h-u;return c.yAxis.minimum=u-.1*v,c.yAxis.maximum=h+.1*v,c}},{key:"renderEditButton",value:function(){var e=this,t=this.props,a=t.loginRequired;return t.editable?a?Object(o.jsx)("button",{id:"evaluation-table-edit-button",className:"badge badge-edit-sota",type:"button","data-toggle":"modal","data-cy":"edit-sota-table","data-target":"#loginModal",children:"Edit Leaderboard"}):Object(o.jsx)("button",{id:"evaluation-table-edit-button",className:"badge badge-edit-sota","data-cy":"edit-sota-table",type:"button",onClick:function(){e.setState({state:"edit"})},children:"Edit Leaderboard"}):null}},{key:"renderMirrorUrl",value:function(){return""}},{key:"renderView",value:function(){var e=this,t=this.props,a=t.tabId,n=t.isFirstTab,s=t.isCommunity,r=t.tableData,i=this.state.metric,l=Object(o.jsx)("div",{className:"col-auto",children:Object(o.jsx)(g.a.Control,{as:"select",name:"metric",value:i,onChange:this.onConfigChange,style:{height:"initial",marginBottom:"10px"},children:this.state.tableMetrics.map((function(e){var t=e.name;return Object(o.jsx)("option",{value:t,children:t},t)}))})}),c=Object(o.jsx)("div",{className:"col-auto",children:Object(o.jsxs)(g.a.Control,{as:"select",name:"dimension",value:this.state.dimension,onChange:this.onConfigChange,style:{height:"initial",marginBottom:"10px"},children:[Object(o.jsx)("option",{value:"date",children:"Date"},"date"),this.state.tableMetrics.filter((function(e){return e.name!==i})).map((function(e){var t=e.name;return Object(o.jsx)("option",{value:t,children:t},t)}))]})}),u="";this.state.showUsesColumn&&(u=Object(o.jsx)("div",{className:"col-auto",children:Object(o.jsxs)(g.a.Control,{id:"select-filter",as:"select",name:"filter",onChange:this.onConfigChange,style:{height:"initial",marginBottom:"10px"},value:this.state.filter,children:[Object(o.jsx)("option",{value:"all",children:"All models"}),Object(o.jsx)("option",{value:"without-data",children:"Models not using extra training data"}),Object(o.jsx)("option",{value:"with-data",children:"Models using extra training data"})]})}));var h="";this.state.hasCompetition&&(h=Object(o.jsx)("div",{className:"col-auto",children:Object(o.jsxs)(g.a.Control,{id:"select-filter",as:"select",name:"competition",onChange:this.onConfigChange,style:{height:"initial",marginBottom:"10px"},children:[Object(o.jsx)("option",{value:"all",children:"All competition entries"}),Object(o.jsx)("option",{value:"published",children:"Published models only"})]})}));var b,p=n?" active":"",j={},m=[],O=Object(f.a)(this.props.tableData);try{for(O.s();!(b=O.n()).done;){var x,w=b.value,y=Object(f.a)(w.tags);try{for(y.s();!(x=y.n()).done;){var C=x.value;void 0===j[C.id]?(m.push(C),j[C.id]=1):j[C.id]++}}catch(A){y.e(A)}finally{y.f()}}}catch(A){O.e(A)}finally{O.f()}m.sort((function(e,t){return j[t.id]-j[e.id]})),m.push({id:0,name:"untagged",color:"#bbbbbb"});var k,N=[],D=Object(f.a)(this.state.allFixedMetrics);try{for(D.s();!(k=D.n()).done;){var S=k.value;N.push({id:S,name:this.state.allTableMetrics[S].name,color:"#333"})}}catch(A){D.e(A)}finally{D.f()}return Object(o.jsxs)("div",{className:"tab-pane fade show".concat(p),id:a,role:"tabpanel","aria-labelledby":"leaderboard",children:[Object(o.jsx)("div",{className:"row",id:"evaluation-chart-div",children:Object(o.jsxs)("div",{className:"col-md-12",style:{marginBottom:"10px"},children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"sota-select col-md-12",id:"edit",children:[Object(o.jsx)("div",{className:"float-left",children:Object(o.jsx)("div",{className:"dropdown edit-button"})}),Object(o.jsx)("div",{className:"float-right pull-right text-right",children:Object(o.jsxs)("div",{style:{marginBottom:"20px"},className:"form-row align-items-center",children:[Object(o.jsx)("label",{className:"col-auto",style:{marginBottom:"10px"},children:"View"}),l,Object(o.jsxs)("label",{className:"col-auto",style:{marginBottom:"10px"},children:[" ","by"," "]}),c,u&&Object(o.jsx)("label",{className:"col-auto",style:{marginBottom:"10px"},children:"for"}),u,h]})})]})}),Object(o.jsx)("div",{className:"sota-chart-container",id:"evaluation-chart-container",children:Object(o.jsx)(d.Suspense,{fallback:Object(o.jsx)(P,{}),children:Object(o.jsx)(v,{chart:this.state.filteredChartData,mockPaperUrl:this.props.mockPaperUrl})})})]})}),Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-12 sota-row-tags-filter",id:"tags",children:[Object(o.jsx)("span",{className:"filter",children:"Filter:"})," ",m.map((function(t){var a=e.state.tagFilter.has(t.id)?t.color:"#aaa";return Object(o.jsx)("span",{className:"badge sota-row-tags",style:{backgroundColor:a},onClick:function(){return e.toggleTagFilter(t.id)},onMouseEnter:function(){return e.highlightTag(t.id,t.color)},onMouseLeave:function(){return e.unhighlightTag(t.id)},children:t.name},t.id)})),N.map((function(t){var a=e.state.selectedFixedMetrics.has(t.id)?t.color:"#aaa";return Object(o.jsx)("span",{className:"badge sota-row-tags",style:{backgroundColor:a},onClick:function(){return e.toggleFixedMetric(t.id)},children:t.name},-t.id)})),Object(o.jsx)("div",{className:"float-right pull-right text-right",children:this.renderEditButton()})]})}),this.state.filteredTableData.length!==r.length&&Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"sota-filters-message",children:["Showing ",this.state.filteredTableData.length," out of"," ",r.length," rows."," ",Object(o.jsx)("a",{href:"clear-filter",onClick:this.clearFilter,children:"(clear all filters)"})]})}),this.renderMirrorUrl(),Object(o.jsx)(q,{highlight:this.props.highlight,metrics:this.state.tableMetrics,data:this.state.filteredTableData,showUsesColumn:this.state.showUsesColumn,selectedMetric:i,selectedMetricDirection:this.state.metricDirection,selectMetric:this.selectMetric,showCodeColumn:this.props.includeCode,alwaysShowPaperColumn:this.props.alwaysShowPaperColumn,showResultColumn:!s,showModelDetailsColumn:s,showTagsColumn:!0,toggleTags:this.toggleTagFilter,onDeleteRowTag:this.onDeleteRowTag,onLinkRowTag:this.onLinkRowTag})]})}},{key:"renderEdit",value:function(){var e=this,t=this.props,a=t.tabId,n=t.isFirstTab?" active":"";return Object(o.jsxs)("div",{className:"tab-pane fade show".concat(n),id:a,role:"tabpanel","aria-labelledby":"leaderboard",children:[Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12",children:[Object(o.jsxs)("div",{className:"sota-edit-message",children:[Object(o.jsx)("b",{children:"Instructions"})," : Right-click to add/remove/reorder columns and rows, double-click to edit. When saved, rows will reorder using the leftmost metric.",this.state.hasFixedMetrics&&Object(o.jsxs)("span",{children:[Object(o.jsx)("br",{}),"This table has additional metrics maintained by "," ",Object(o.jsx)("a",{href:"https://www.computerprogress.com/",children:"computerprogress.com"}),"."]})]}),Object(o.jsxs)("div",{className:"sota-edit-message",children:[Object(o.jsx)("b",{children:"Standard deviation"})," : You can use the \xb1 symbol followed by a number."]})]})}),Object(o.jsx)(O,{ref:this.editTableRef,metrics:this.state.tableMetrics,data:this.props.tableData,saveSpinner:this.state.saveSpinner,paperAutocompleteUrl:this.props.paperAutocompleteUrl,onSave:this.onSave,onCancel:function(){e.setState({state:"view"})}})]})}},{key:"render",value:function(){return Object(o.jsx)(d.Suspense,{fallback:Object(o.jsx)(P,{}),children:"edit"===this.state.state?this.renderEdit():this.renderView()})}},{key:"editTable",get:function(){return this.editTableRef.current}}]),a}(u.a.Component);H.defaultProps={isFirstTab:!1,sotaColor:"#21ccc7",editable:!0,includeCode:!0,alwaysShowPaperColumn:!0,isCommunity:!1};var G=H;function K(e){var t=e.name,a=e.imagePath,n=e.iconName,s=e.color;return null!==a&&"undefined"!==typeof a?Object(o.jsx)("div",{className:"card-background-image",style:{backgroundImage:"url(".concat(a,")")}}):Object(o.jsxs)("div",{className:"card-background-image",style:{backgroundColor:s,opacity:.3},children:[Object(o.jsx)("i",{className:"fad fa-".concat(n," dataset-img-icon")}),Object(o.jsx)("span",{className:"dataset-img-text",children:t})]})}function Y(e){var t=e.name,a=e.fullName,n=null;return null!==a&&"undefined"!==typeof a&&""!==a&&a!==t&&(n=Object(o.jsxs)("span",{className:"full-name",children:[" (",a,")"]})),Object(o.jsxs)("span",{className:"name",children:[t,n]})}function z(e){var t=e.name,a=e.fullName,n=e.url,s=e.imagePath,r=e.iconName,i=e.description,l=e.color;return Object(o.jsx)("div",{className:"sota-dataset-wide-box",children:Object(o.jsx)("a",{href:n,children:Object(o.jsxs)("div",{className:"row justify-content-center align-items-center",children:[Object(o.jsx)("div",{className:"col-6 col-sm-2 item-image",children:K({name:t,imagePath:s,iconName:r,color:l})}),Object(o.jsxs)("div",{className:"col-sm-10",children:[Y({name:t,fullName:a}),Object(o.jsx)("div",{className:"description",children:Object(o.jsx)("p",{children:i})})]})]})})})}var V=a(105),J=a.n(V);function W(){return Object(o.jsx)("div",{className:"text-center",children:Object(o.jsx)("img",{src:L})})}var X=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).showUsesAdditionalDataColumn=function(e){for(var t=0;t<e.length;t++)if(e[t].uses_additional_data)return!0;return!1},n.onConfigChange=function(e){var t=e.target,a=t.name,r=t.value;n.setState(Object(s.a)({},a,r),n.updateData)},n.state={state:"view",highlight:e.highlight},n}return Object(i.a)(a,[{key:"selectMetric",value:function(e){this.setState({metric:e},this.updateData)}},{key:"getMetricDirection",value:function(e){return this.props.tableMetrics.find((function(t){return t.name===e})).is_loss?"metric-lowest":"metric-highest"}},{key:"convertChartData",value:function(e){return{yAxis:e.yAxis,data:{trend:Object(n.a)(Object(n.a)({},e.data.trend),{},{click:this.onClick,dataPoints:e.data.trend.dataPoints.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{x:new Date(e.x)})}))}),other:Object(n.a)(Object(n.a)({},e.data.other),{},{click:this.onClick,dataPoints:e.data.other.dataPoints.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{x:new Date(e.x)})}))})}}}},{key:"renderHighlight",value:function(){var e=this;return"view"===this.state.state&&this.state.highlight?Object(o.jsx)("div",{className:"alert alert-warning alert-dismissible fade show",role:"alert",style:{backgroundColor:"#fffba1"},children:Object(o.jsxs)("div",{style:{paddingTop:"10px"},children:['Highlighting mentions of paper "',this.state.highlight.title,'"',Object(o.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",style:{marginTop:"8px"},id:"id_highlight_close_button",onClick:function(t){return e.setState({highlight:null})},children:Object(o.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})}):""}},{key:"renderDatasetsTab",value:function(){var e,t=this.props,a=t.dataset,s=t.datasetDetails,r=t.newDatasetUrl,i=t.datasetsSearchUrl;return e="undefined"===typeof s||null===s||0==s.length?Object(o.jsxs)("div",{className:"dataset-no-canonical-badge",children:[Object(o.jsx)("i",{className:"far fa-database",style:{fontSize:"16px",position:"relative",top:"1px",color:"#777"}}),"\xa0",Object(o.jsx)("span",{className:"dataset-name",children:a})," is not associated with any dataset. Add it as a variant to one of the ",Object(o.jsx)("a",{href:i(a),children:"existing datasets"})," or ",Object(o.jsx)("a",{href:r(a),children:"create a new dataset page"}),"."]}):s.map((function(e){return Object(o.jsx)(z,Object(n.a)({},e),e.url)})),Object(o.jsx)("div",{className:"tab-pane fade",id:"datasets",role:"tabpanel","aria-labelledby":"datasets",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:e})})})}},{key:"renderDescriptionTab",value:function(){var e=this.props.description;return"undefined"===typeof e||null===e?null:Object(o.jsx)("div",{className:"tab-pane fade",id:"description",role:"tabpanel","aria-labelledby":"description",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsx)(J.a,{children:e})})})})}},{key:"renderTabs",value:function(){var e=this.props,t=e.description,a=e.communityData,n=e.communityMetrics,s=e.tableData,r=e.tableMetrics,i=!0,l=!_.isEmpty(s.filter((function(e){return null!==e.evaluation_date})))&&!_.isEmpty(r),c=!_.isEmpty(a.filter((function(e){return null!==e.evaluation_date})))&&!_.isEmpty(n);"undefined"!==typeof t&&null!==t&&""!==t||(i=!1);var d="",u="",h="",b="";if(l&&(d=Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)("a",{"data-toggle":"tab",className:"active nav-link",href:"#leaderboard",children:"Leaderboard"})})),c){var p=l?"":" active";u=Object(o.jsx)("li",{className:"nav-item nav-item-d",children:Object(o.jsx)("a",{"data-toggle":"tab",className:"nav-link".concat(p),href:"#community",children:"Community Models"})})}return h=Object(o.jsx)("li",{className:"nav-item nav-item-d",children:Object(o.jsx)("a",{"data-toggle":"tab",className:"nav-link",href:"#datasets",children:"Dataset"})}),i&&(b=Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsxs)("a",{"data-toggle":"tab",className:"nav-link",href:"#description",children:[Object(o.jsx)("ion-icon",{name:"information-circle-outline"}),"Description"]})})),Object(o.jsx)("div",{className:"leaderboard-tabs row",children:Object(o.jsx)("div",{className:"col-md-12",children:Object(o.jsxs)("ul",{className:"nav nav-tabs",children:[d,u,h,b]})})})}},{key:"renderView",value:function(){var e,t,a=this.props,n=a.task,s=a.dataset,r=a.loginRequired,i=a.chartData,l=a.mockPaperUrl,c=a.tableMetrics,d=a.tableData,u=a.communityChartData,h=a.communityMetrics,b=a.communityData,p=a.paperAutocompleteUrl,j=a.hasCompetition,f=this.state.highlight,m=!_.isEmpty(d),g=!_.isEmpty(b);return m&&(e=Object(o.jsx)(G,{tabId:"leaderboard",task:n,dataset:s,loginRequired:r,chartData:i,mockPaperUrl:l,tableMetrics:c,tableData:d,paperAutocompleteUrl:p,highlight:f,hasCompetition:j,isFirstTab:!0,editable:!0})),g&&(t=Object(o.jsx)(G,{tabId:"community",task:n,dataset:s,loginRequired:r,chartData:u,mockPaperUrl:l,tableMetrics:h,tableData:b,sotaColor:"#ff7f0e",isFirstTab:!m,editable:!1,highlight:f,includeCode:!1,alwaysShowPaperColumn:!1,paperAutocompleteUrl:p,isCommunity:!0})),Object(o.jsxs)("div",{className:"tab-content",id:"benchmark-tabContent",children:[e,t,this.renderDatasetsTab(),this.renderDescriptionTab()]})}},{key:"render",value:function(){return Object(o.jsxs)("div",{children:[this.renderHighlight(),Object(o.jsx)("div",{className:"leaderboard-title",children:Object(o.jsx)("div",{className:"row",children:Object(o.jsxs)("div",{className:"col-md-12 sota-header",children:["edit"===this.state.state?Object(o.jsxs)("h1",{children:['Editing "',this.props.task," on"," ",this.props.dataset,'"']}):Object(o.jsxs)("h1",{children:[this.props.task," on ",this.props.dataset]}),this.renderTabs()]})})}),Object(o.jsx)(d.Suspense,{fallback:Object(o.jsx)(W,{}),children:"edit"===this.state.state?this.renderEdit():this.renderView()})]})}},{key:"editTable",get:function(){return this.editTableRef.current}}]),a}(u.a.Component),Z=new(function(){function e(){Object(r.a)(this,e),this.container=null,this.table=null,this.component=null,this.sotaPageComponent=u.a.createRef()}return Object(i.a)(e,[{key:"show",value:function(e){var t=e.container,a=e.breadcrumbs,n=e.highlight,s=e.loginRequired,r=e.task,i=e.dataset,l=e.chartData,c=e.tableMetrics,d=e.tableData,u=e.communityChartData,h=e.communityMetrics,p=e.communityData,j=e.paperAutocompleteUrl,f=e.datasetsSearchUrl,m=e.newDatasetUrl,g=e.mockPaperUrl,v=e.datasetDetails,O=e.description,x=e.mirrorUrl,w=e.hasCompetition;this.container=t,this.component=Object(o.jsx)(X,{ref:this.sotaPageComponent,breadcrumbs:a,highlight:n,task:r,dataset:i,loginRequired:s,chartData:l,mockPaperUrl:g,tableMetrics:c,tableData:d,communityChartData:u,communityMetrics:h,communityData:p,paperAutocompleteUrl:j,datasetsSearchUrl:f,newDatasetUrl:m,datasetDetails:v,description:O,mirrorUrl:x,hasCompetition:w}),b.a.render(this.component,t)}},{key:"hide",value:function(){this.component&&(b.a.unmountComponentAtNode(this.container),this.component=null)}}]),e}());t.default=Z},363:function(e,t,a){"use strict";a.r(t);var n=a(21),s=a(17),r=a(5),i=a(8),l=a(12),c=a(13),o=a(15),d=a(14),u=a(0),h=a(19),b=a.n(h),p=a(1),j=a.n(p),f=a(377),m=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.filterAutomatic,a=e.onFilterAutomatic;return Object(u.jsx)(f.a,{type:"checkbox",variant:"primary-outline",checked:t,onChange:function(e){null!=a&&a(e.currentTarget.checked)},children:"Hide automatic entries"})}}]),a}(j.a.Component),g=a(200),v=a(380),O=a(70),x=a(9),w=a.n(x),y=a(66),C=a(153),k=a(74),N=a(375),D=function(e){var t=e.inProgress,a=e.size,n=e.variant,s=e.children,i=Object(k.a)(e,["inProgress","size","variant","children"]),l=t?Object(u.jsx)(N.a,{animation:"border",role:"status",variant:n,size:a,children:Object(u.jsx)("span",{className:"sr-only",children:"Loading..."})}):s;return Object(u.jsx)(y.a,Object(r.a)(Object(r.a)({variant:n,size:a},i),{},{children:l}))},S=a(171),A=function(e,t){var a=function(e){return[e.task.toString().trim(),e.dataset.toString().trim(),e.metric.toString().trim(),e.model.toString().trim(),e.value.toString().trim(),e.external.toString().trim()]},s=function(e){return{task:e[0],dataset:e[1],metric:e[2],model:e[3],value:e[4],external:e[5]}},r=function(e,t,a){"undefined"===typeof a&&(a=e.length);for(var n=0;n<a&&e[n]===t[n];)n++;return n===a?0:e[n]<t[n]?-1:1},l=e.map(a).sort(r),c=t.map(a).sort(r),o=0,d=0,u=[],h=[],b=[],p=function(e,t){for(var a=[],n=[],s=0,l=0;s<e.length&&l<t.length;){var c=e[s],o=t[l],d=r(c,o);0===d?(s++,l++):d<0?(a.push(c),s++):(n.push(o),l++)}return[a=[].concat(Object(i.a)(a),Object(i.a)(e.slice(s))),n=[].concat(Object(i.a)(n),Object(i.a)(t.slice(l)))]}(c,l),j=Object(n.a)(p,2);for(c=j[0],l=j[1];o<c.length&&d<l.length;){var f=c[o],m=l[d];o++,d++;for(var g=Object(i.a)(m.slice(0,0)),v=0;v<m.length;v++){var O=f[v],x=m[v];if(O===x)g.push(x);else{var w=4===v?S.diffChars:S.diffWords;g.push(w(O,x))}}b.push(g)}return u=[].concat(Object(i.a)(u),Object(i.a)(c.slice(o))),h=[].concat(Object(i.a)(h),Object(i.a)(l.slice(d))),{deletions:u.map(s),additions:h.map(s),modifications:b.map(s)}};function R(e){return e instanceof Date||(e=new Date(e)),new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString()}function _(e){return R(e).slice(0,10)}function I(e){var t=R(e);return"".concat(t.slice(0,10)," ").concat(t.slice(11,16))}var E=a(171),M=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={open:!1},e.ref=j.a.createRef(),e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){null!=window.MathJax.typeset&&null!=this.ref.current&&window.MathJax.typeset([this.ref.current])}},{key:"render",value:function(){var e=this,t=this.props,a=t.labelOpen,n=t.labelClose,s=t.children,r=this.state.open;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(y.a,{className:"show-hide",onClick:function(){return e.setState({open:!r})},"aria-expanded":r,children:r?n:a}),Object(u.jsx)(C.a,{in:r,children:Object(u.jsx)("div",{ref:this.ref,children:s})})]})}}]),a}(j.a.Component),T=function(e){return"object"!==typeof e?e:e.map((function(e,t){return e.added?null:e.removed?Object(u.jsx)("del",{children:e.value},t):Object(u.jsx)("span",{children:e.value},t)}))},B=function(e){return"object"!==typeof e?e:e.map((function(e,t){return e.added?Object(u.jsx)("ins",{children:e.value},t):e.removed?null:e.value}))},F=function(e){if("object"!==typeof e)return e;var t=T(e),a=B(e);return Object(u.jsxs)(u.Fragment,{children:[t,Object(u.jsx)("br",{}),a]})},Q=function(e,t,a){var n=e.split(" ");return n.length<=t+a?e:[].concat(Object(i.a)(n.slice(0,t)),["(\u2026)"],Object(i.a)(n.slice(n.length-a))).join(" ")},U=function(e){if("object"!==typeof e)return"[NO CHANGES]";var t=Object.values(e).length-1;return e.map((function(e,a){return e.added?Object(u.jsx)("ins",{children:e.value},a):e.removed?Object(u.jsx)("del",{children:e.value},a):Object(u.jsx)("span",{children:Q(e.value,0===a?0:5,a===t?0:5)},a)}))},q=function(e){if("object"!==typeof e)return e;for(var t=0,a=[];t<e.length;){for(;t<e.length&&!e[t].removed;)a.push(e[t]),t++;if(t<e.length){for(var n=t+1;n<e.length-2&&e[n].added&&""===e[n+1].value.trim()&&e[n+2].removed;)n+=3;var s=[e[t]],i=[];for(t++;t+2<n;)i.push(e[t]),i.push(Object(r.a)(Object(r.a)({},e[t+1]),{},{added:!0})),s.push(Object(r.a)(Object(r.a)({},e[t+1]),{},{removed:!0})),s.push(e[t+2]),t+=3;a.push.apply(a,s.concat(i))}}return a},L=function(e){var t=e.task,a=e.dataset,n=e.metric,s=e.value,r=e.model,i=e.external;return Object(u.jsxs)("tr",{className:"result-review-blob",children:[Object(u.jsx)("td",{children:F(s)}),Object(u.jsx)("td",{children:F(n)}),Object(u.jsx)("td",{children:F(r)}),Object(u.jsx)("td",{children:F(a)}),Object(u.jsx)("td",{children:F(t)}),Object(u.jsx)("td",{children:F(i)})]})},P=function(e){var t=e.className,a=e.header,n=e.results;if(0===n.length)return null;for(var s=[],i=0,l=function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("th",{children:"Value"}),Object(u.jsx)("th",{children:"Metric"}),Object(u.jsx)("th",{children:"Model"}),Object(u.jsx)("th",{children:"Dataset"}),Object(u.jsx)("th",{children:"Task"}),Object(u.jsx)("th",{children:"Extra Data"})]},"header-".concat(e))},c=0;c<n.length;c++){var o=n[c];0===c&&(s.push(l(i)),i++);var d=Object(u.jsx)(L,Object(r.a)({},o),c);s.push(d)}return Object(u.jsxs)("div",{className:"records-card ".concat(t),children:[Object(u.jsx)("h5",{children:a}),Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:s})})]})},H=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={versionsExpanded:!1,squashed:null,status:null,updatedStatus:null,updatedStatusDate:null},e.ignoreFieldsAll={PaperGithubRepo:new Set(["in_paper_abstract","in_paper_page1","in_paper_fulltext"])},e.recordsFromArchive=function(e){var t=e.fields,a=t.task,s=t.metrics,r=t.methodology,i=t.dataset,l=t.uses_additional_data,c=r,o=null===l?" ":l?"yes":"no";return Object.entries(s).map((function(e){var t=Object(n.a)(e,2),s=t[0],r=t[1];return{task:null!=a?a.name:"[ERROR]",dataset:null!=i?i.name:"[ERROR]",model:c,metric:s,value:r||"",external:o}}))},e.paperElement=function(e){return null!=e?Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.title}):null},e.arxivLink=function(e){return null!=e&&e.arxiv_id?Object(u.jsx)("a",{href:"https://arxiv.org/abs/".concat(e.arxiv_id),target:"_blank",children:e.arxiv_id}):null},e.datasetElement=function(e){return null!=e?Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.name}):null},e.datasetLoaderElement=function(e){if(null==e||"undefined"===typeof e)return null;var t=e.repository?Object(u.jsx)("a",{href:e.repository._url,target:"_blank",children:e.repository.full_name}):null,a=Object(u.jsx)("div",{className:"mb-2",style:{marginLeft:"10px",color:"#666"},children:w.a.isEmpty(e.frameworks)?"no frameworks":e.frameworks.sort().join(", ")});return e.url?[t," (",Object(u.jsx)("a",{href:e.url,target:"_blank",children:e.url}),")",a]:[t,a]},e.formatEditors=function(t){if(0===(t=t.filter((function(e){return null!=e&&e.username}))).length)return Object(u.jsx)("div",{});var a,n=["by ",(t=(t=w.a.uniqBy(t,"username")).map((function(t){var a="user";return t.active?t.moderator&&(a+=" moderator"):a+=" inactive",Object(u.jsx)("a",{href:"#",onClick:function(a){return e.handleUserClicked(t.model_id,a)},className:a,target:"_blank",children:t.username})})))[0]],r=Object(s.a)(t.slice(1));try{for(r.s();!(a=r.n()).done;){var i=a.value;n.push(", ",i)}}catch(l){r.e(l)}finally{r.f()}return n},e.squashResults=function(t){for(var a=w.a.groupBy(t,"model_id"),n=[],s=[],r=[],l=0,c=Object.values(a);l<c.length;l++){var o=c[l],d=e.squashObjectItems(o).users;r.push.apply(r,Object(i.a)(d)),o[0].is_baseline&&o[0].active&&n.push.apply(n,Object(i.a)(e.recordsFromArchive(o[0])));var h=o[o.length-1];h.active&&s.push.apply(s,Object(i.a)(e.recordsFromArchive(h)))}var b=A(s,n),p=b.additions,j=b.modifications,f=b.deletions;if(!(0!==p.length||0!==f.length||0!==j.length))return null;var m=t[0].paper,g=e.paperElement(m);return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("span",{className:"recent-changes-header",children:["Benchmark results for ",g]}),Object(u.jsx)(P,{className:"added-results-card",results:p,header:"\u2022Added Results (+".concat(p.length,"):")}),Object(u.jsx)(P,{className:"modified-results-card",results:j,header:"\u2022Updated Results (".concat(j.length,"):")}),Object(u.jsx)(P,{className:"removed-results-card",results:f,header:"\u2022Removed Results (-".concat(f.length,"):")}),Object(u.jsx)("div",{children:e.formatEditors(r)})]})},e.squashRepos=function(t){for(var a=t[t.length-1].paper,n=e.paperElement(a),s=w.a.groupBy(t,"model_id"),r=0,l=0,c=0,o=[],d=[],h=0,b=Object.values(s);h<b.length;h++){var p=b[h],j=e.squashObjectItems(p),f=j.oldState,m=j.newState,g=j.users;if(!w.a.isEqual(f.fields.show,m.fields.show)||!w.a.isEqual(f.fields.is_official,m.fields.is_official)){d.push.apply(d,Object(i.a)(g));var v="";!1===f.fields.show&&!0===m.fields.show?(v="+",r++):!0===f.fields.show&&!1===m.fields.show?(v="\u2212",l++):v="\u2022";var O=p[p.length-1].repository,x=e.formatRepository(O),y=null!=O&&""!==(O.about||"")?Object(u.jsx)("div",{className:"description",children:O.about}):null,C=void 0;f.fields.is_official!==m.fields.is_official&&(c++,C=Object(u.jsxs)("div",{children:["\u2022Marked as ",m.fields.is_official?"official":"community"]})),o.push(Object(u.jsxs)("div",{className:"repository",children:[v,x,C,y]}))}}if(0===o.length)return null;var k=c>0?"updates of":l>0?r>0?"updates of":"removed from":"added to",N=Object(u.jsxs)("span",{className:"recent-changes-header",children:["Code ",k," paper ",n]}),D=e.formatEditors(d);return[N,Object(u.jsx)("div",{children:o}),Object(u.jsx)("div",{children:D})]},e.handleApproval=function(t,a){var n=e.props,s=n.onRequestApproved,r=n.onRequestRejected;a&&null!=s?s(t):a||null==r||r(t)},e.arxivDatasetCard=function(t){if(!t.name||!t.paper||t.is_landing_hidden)return null;var a,n;a=t.image?Object(u.jsx)("img",{src:MEDIA_URL+t.image}):Object(u.jsx)("div",{className:"pwc-data-card-image-placeholder",style:{backgroundColor:"#62AEE4"},children:Object(u.jsx)("span",{children:t.name[0]})});var s,r=t.num_papers-1;return 1===r?n=Object(u.jsx)("div",{className:"pwc-data-name-meta",children:"1 paper also uses this dataset"}):r>1&&(n=Object(u.jsxs)("div",{className:"pwc-data-name-meta",children:[r," papers also use this dataset"]})),s=t.paper.arxiv_id?Object(u.jsxs)("div",{className:"pwc-data-name-introduced",children:["\u2605 introduced in ",e.arxivLink(t.paper)]}):Object(u.jsx)("div",{className:"pwc-data-name-introduced",children:"introduced in non-arXiv paper"}),Object(u.jsxs)("div",{className:"pwc-data-card",children:[Object(u.jsx)("div",{className:"pwc-data-card-image",children:a}),Object(u.jsxs)("div",{className:"pwc-data-card-name",children:[Object(u.jsx)("span",{className:"pwc-data-name",children:t.name}),n,s]})]})},e.formatModerationRequest=function(t){var a=t.model_name,n=t.requester,s=t.moderator,r=t.request,l=r.id,c=r.action,o=r.status,d=r.progress,h=Object(u.jsx)(D,{variant:"outline-success",title:"Approve",size:"sm",className:"button-approve",inProgress:"approving"===d,disabled:null!=d,onClick:function(){return e.handleApproval(l,!0)},children:"Approve"}),b=Object(u.jsx)(D,{variant:"outline-danger",title:"Reject",size:"sm",className:"button-reject",inProgress:"rejecting"===d,disabled:null!=d,onClick:function(){return e.handleApproval(l,!1)},children:"Reject"}),p=Object(u.jsxs)("div",{children:[b,"\xa0",h]}),j=o.charAt(0).toUpperCase()+o.slice(1),f=[j];"approved"!==o&&"rejected"!==o||f.push(" ",e.formatEditors([s]));var m=Object(u.jsx)("div",{children:f});if("PaperGithubRepo"===a){var g,v=t.paper,O=t.repository,x=""!==(O.about||"")?Object(u.jsx)("div",{className:"description",children:O.about}):null,w=e.paperElement(v),y=Object(u.jsxs)("span",{children:[j," request for code changes of paper ",w]}),C=e.formatRepository(O);switch(c){case"set_is_official":var k=r.params.is_official?"the official":"a community";g=Object(u.jsxs)("span",{children:[Object(u.jsxs)("b",{children:["mark as ",k]})," implementation"]});break;case"remove_official_repo":g=Object(u.jsxs)("span",{children:[Object(u.jsx)("b",{children:"remove the official"})," repository"]});break;default:return"Unrecognized action ".concat(c," on ").concat(a)}return Object(u.jsxs)(u.Fragment,{children:[y,Object(u.jsx)("div",{children:Object(u.jsxs)("div",{className:"repository",children:[Object(u.jsxs)("div",{children:["Request to ",g]}),"\u2022",C,x]})}),Object(u.jsxs)("div",{children:["Requested ",e.formatEditors([n])]}),"pending"===o?p:m]})}if("Dataset"===a){var N,S,A=t.request.params,R=t.fields;switch(c){case"update_moderated_fields":var _=!R.verified_name&&!R.verified_paper_id;N=Object(u.jsxs)("span",{children:[j," request to ",_?"publish":"update"," ",e.datasetElement(R)," dataset on arXiv"]});var I=e.arxivDatasetCard({name:R.verified_name,paper:R.verified_paper,image:R.verified_image,num_papers:R.cached_num_papers,is_landing_hidden:R.is_landing_hidden}),E=e.arxivDatasetCard({name:A.name,paper:A.paper,image:A.image,num_papers:R.cached_num_papers,is_landing_hidden:R.is_landing_hidden});S="approved"===o||"rejected"===o?Object(u.jsx)("div",{className:"my-4",children:I}):[Object(u.jsxs)("div",{className:"my-4",children:[I,Object(u.jsx)("span",{className:"d-md-inline d-none",children:" \u2192 "}),Object(u.jsx)("div",{className:"d-md-none my-2 text-center",style:{width:"300px"},children:"\u2193"}),E]})].concat(Object(i.a)(e.diffFieldValues("name",R.verified_name,A.name)),Object(i.a)(e.diffFieldValues("unified_paper_info",R.verified_paper,A.paper)),[Object(u.jsx)("div",{className:"recent-changes-small-imgs",children:e.diffFieldValues("image",R.verified_image,A.image)})]);break;default:return"Unrecognized action ".concat(c," on ").concat(a)}return Object(u.jsxs)(u.Fragment,{children:[N,Object(u.jsx)("div",{children:Object(u.jsx)("div",{className:"repository",children:Object(u.jsx)("div",{children:S})})}),Object(u.jsxs)("div",{children:["Requested ",e.formatEditors([n])]}),"pending"===o?p:m]})}return"Task"===a?Object(u.jsxs)(u.Fragment,{children:[j," request to update the image of ",Object(u.jsx)("a",{rel:"noreferrer",target:"_blank",href:t.origin_url,children:t.fields.name})," task.",Object(u.jsx)("p",{}),Object(u.jsx)("p",{children:Object(u.jsx)("img",{alt:"task",src:"".concat(MEDIA_URL).concat(t.request.params.image),style:{maxWidth:300,maxHeight:300}})}),Object(u.jsxs)("p",{children:["Requested ",e.formatEditors([n])]}),"pending"===o?p:m]}):"PageMeta"===a?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("p",{children:[j," request to update ",Object(u.jsx)("a",{rel:"noreferrer",target:"_blank",href:t.origin_url,children:"this page"})," meta"]}),t.errors&&Object(u.jsxs)("div",{className:"alert alert-danger",role:"alert",children:[Object(u.jsx)("h4",{className:"alert-heading",children:"Errors"}),Object(u.jsx)("pre",{children:JSON.stringify(t.errors,null,4)})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Model name:"})," ",t.request.params.model_name]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Model id:"})," ",t.request.params.model_id]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Description:"})," ",t.request.params.description?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("br",{})," ",t.request.params.description]}):Object(u.jsx)("span",{className:"badge badge-danger",children:"null"})]}),Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Image enabled:"})," ",t.request.params.image_enabled?"Yes":"No"]}),t.request.params.image_extension&&Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Image type:"})," ",t.request.params.image_extension]}),t.request.params.image_content&&Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Image:"}),Object(u.jsx)("br",{}),Object(u.jsx)("img",{alt:"meta",src:"data:image/png;base64, "+t.request.params.image_content,style:{maxWidth:300,maxHeight:300}})]}),null===t.request.params.image_url&&Object(u.jsxs)("div",{children:[Object(u.jsx)("b",{children:"Image:"})," ",Object(u.jsx)("span",{className:"badge badge-danger",children:"null"})]}),Object(u.jsxs)("div",{children:["Requested ",e.formatEditors([n])]}),"pending"===o?p:m]}):"Unrecognized action ".concat(c," on ").concat(a)},e.getLink=function(e){return null===e||"undefined"===typeof e?null:Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.name})},e.getLinkWithUrl=function(e){return null===e||"undefined"===typeof e?null:Object(u.jsx)("a",{href:e.url,target:"_blank",children:e.url})},e.getPaperLink=function(e){return null===e||"undefined"===typeof e?null:Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.title})},e.getEvaluationTableRowLink=function(t){return null===t||"undefined"===typeof t?null:Object(u.jsxs)("span",{children:[Object(u.jsx)("a",{href:t.evaluationtable._url,target:"_blank",children:t.evaluationtable.slug}),Object(u.jsx)("br",{}),Object(u.jsxs)("span",{className:"recent-changes-subtitle",children:["Paper: ",e.getPaperLink(t.paper),Object(u.jsx)("br",{}),"Model: ",t.fields.evaluationtablerow.methodology]})]})},e.getMethodLink=function(e){if(null===e)return Object(u.jsx)("a",{children:"[HARD DELETED]"});var t=e.full_name!==e.name&&null!=e.full_name?"".concat(e.full_name," (").concat(e.name,")"):e.name;return Object(u.jsx)("a",{href:e._url,target:"_blank",children:t})},e.getDatasetLink=function(e){if(null===e)return Object(u.jsx)("a",{children:"[HARD DELETED]"});var t=e.name;return null!=e.full_name&&""!==e.full_name&&e.full_name!==e.name&&(t="".concat(e.name," (").concat(e.full_name,")")),Object(u.jsx)("a",{href:e._url,target:"_blank",children:t})},e.getCollectionLink=function(e){return null===e?Object(u.jsx)("a",{children:"[HARD DELETED]"}):Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.name})},e.squashObjectItems=function(e){var t,a;return e[0].is_baseline?(t=e[0],a=e.slice(1)):(t={fields:{}},a=e),{oldState:t,newState:e[e.length-1],users:a.map((function(e){return e.user}))}},e.diffSimpleTextValues=function(e,t,a,n){var s=null==a||""==a||w.a.isEqual(a,{}),r=E.diffWords(a||"",n||""),i=T(r),l=B(r),c=s?"set":['changed from "',i,'"'];return Object(u.jsxs)("h5",{children:["\u2022",t," ",c,' to "',l,'"']},e)},e.diffFieldValues=function(t,a,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=[],c=null==a||""==a||w.a.isEqual(a,{}),o=null==n||""==n||w.a.isEqual(n,{}),d={title:"Title",name:"Name",full_name:"Full name",url:"URL",url_abs:"URL of abstract ",url_pdf:"URL",abstract:"Abstract"};if((!c||!o)&&!w.a.isEqual(a,n))if(d.hasOwnProperty(t)){var h=d[t];l.push(e.diffSimpleTextValues(t,h,a,n))}else switch(t){case"area_id":var b,p=e.getLink(r.area),j=e.getLink(i.area);b=null===a?Object(u.jsxs)("h5",{children:["\u2022Assigned to ",j]}):null===n?Object(u.jsxs)("h5",{children:["\u2022Removed from ",p]}):Object(u.jsxs)("h5",{children:["\u2022Moved from ",p," to ",j]}),l.push(b);break;case"authors":var f=c?"":a.join(", "),m=o?"":n.join(", ");l.push(e.diffSimpleTextValues(t,"Authors",f,m));break;case"unified_paper_info":var g,v=e.paperElement(a),O=e.paperElement(n);g=c?Object(u.jsxs)("h5",{children:["\u2022Introduced-by paper set to ",O]}):o?Object(u.jsxs)("h5",{children:["\u2022Removed ",v," as introduced-by paper"]}):Object(u.jsxs)("h5",{children:["\u2022Introduced-by paper changed from ",Object(u.jsx)("del",{children:v})," to ",Object(u.jsx)("ins",{children:O}),";"]}),l.push(g);break;case"introduced_date":var x=c?"set":["changed from ",a];l.push(Object(u.jsxs)("h5",{children:["\u2022Introduction date ",x," to ",n]}));break;case"is_landing_hidden":var y=n?"hidden":"published";l.push(Object(u.jsxs)("h5",{children:["\u2022Landing page has been ",y]}));break;case"description":case"footer":var C=q(E.diffWords(a||"",n||"")),k="description"===t?"Description":"Footer",N="description"===t?s.description_html:s.footer_html,D=c?"added":"updated";l.push(Object(u.jsxs)("div",{children:[Object(u.jsxs)("h5",{children:["\u2022",k," ",D]}),U(C)]})),l.push(Object(u.jsx)(M,{labelOpen:"Show updated",labelClose:"Hide updated",children:Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:N}})}));break;case"image":var S=c?"added":"changed";l.push(Object(u.jsxs)("h5",{children:["\u2022Image ",S]}));var A=[];c||(A.push(Object(u.jsx)("img",{src:MEDIA_URL+a},"old")),A.push(" ",Object(u.jsx)("ion-icon",{name:"arrow-forward-outline"})," ")),A.push(Object(u.jsx)("img",{src:MEDIA_URL+n},"new")),l.push(Object(u.jsx)("div",{className:"entry-image",children:A}))}return l},e.diffObjectItems=function(t,a,n){var s,r=t.oldState,l=t.newState,c=t.users,o=[];for(var d in l.fields){var h=r.fields[d]||null,b=l.fields[d];o.push.apply(o,Object(i.a)(e.diffFieldValues(d,h,b,l.fields,r,l)))}if(0===o.length&&!w.a.get(l,"is_updated",!1))return[];var p=n(l.fields);s=w.a.isEqual(r.fields,{})?Object(u.jsxs)("span",{className:"recent-changes-header",children:["New ",a," ",p]}):Object(u.jsxs)("span",{className:"recent-changes-header",children:["Changes to ",a," ",p]});var j=Object(u.jsx)("div",{children:e.formatEditors(c)});return[s].concat(o,[j])},e.diffMethods=function(t){return e.diffObjectItems(t,"method",e.getMethodLink)},e.diffPapers=function(t){return e.diffObjectItems(t,"paper",e.paperElement)},e.diffTasks=function(t){return e.diffObjectItems(t,"task",e.getLink)},e.diffDatasets=function(t){return e.diffObjectItems(t,"dataset",e.getDatasetLink)},e.diffCollections=function(t){return e.diffObjectItems(t,"collection",e.getCollectionLink)},e.diffTags=function(t){return e.diffObjectItems(t,"tag",e.getLink)},e.squashMethodCollections=function(t){var a=e.squashObjectItems(t);return e.diffObjectItems(a,"method collection",e.getLink)},e.squashTaskTags=function(t){return e.squashManyToMany(t,"task",(function(e){return e>1?"Subtasks":"Subtask"}),(function(t){return Object(u.jsxs)(u.Fragment,{children:[e.getLink(t.fields.tag)," under ",e.getLink(t.fields.area)," area"]})}),(function(t){return e.getLink(t.fields.task)}))},e.squashPaperTasks=function(t){return e.squashManyToMany(t,"paper",(function(e){return e>1?"Tasks":"Task"}),(function(t){return e.paperElement(t.paper)}),(function(t){return e.getLink(t.fields.task)}))},e.squashTaskDataset=function(t){return e.squashManyToMany(t,"dataset",(function(e){return e>1?"Tasks":"Task"}),(function(t){return e.datasetElement(t.fields.dataset)}),(function(t){return e.getLink(t.fields.task)}))},e.squashPaperDatasets=function(t){return e.squashManyToMany(t,"paper",(function(e){return e>1?"Datasets":"Dataset"}),(function(t){return e.paperElement(t.paper)}),(function(t){return e.datasetElement(t.fields.dataset)}))},e.squashPaperMethods=function(t){return e.squashManyToMany(t,"paper",(function(e){return e>1?"Methods":"Method"}),(function(t){return e.paperElement(t.paper)}),(function(t){return e.getLink(t.method)}))},e.squashMethodCollectionMembers=function(t){return e.squashManyToMany(t,"collection",(function(e){return e>1?"Methods":"Method"}),(function(t){return e.getLink(t.collection)}),(function(t){return e.getMethodLink(t.method)}))},e.squashDatasetCollectionMembers=function(t){return e.squashManyToMany(t,"dataset",(function(e){return e>1?"Categories":"Category"}),(function(t){return e.getDatasetLink(t.fields.dataset)}),(function(t){return e.getLink(t.collection)}))},e.squashCollectionItem=function(t){return e.squashManyToMany(t,"collection",(function(e){return e>1?"Items":"Item"}),(function(t){return e.getCollectionLink(t.collection)}),(function(t){return w.a.get(t,"paper")?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ion-icon",{name:"document-outline",style:{fontSize:"13px"}}),e.paperElement(t.paper)]}):w.a.get(t,"fields.dataset")?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ion-icon",{name:"server-outline",style:{fontSize:"13px"}}),e.getDatasetLink(t.fields.dataset)]}):w.a.get(t,"method")?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("ion-icon",{name:"school-outline",style:{fontSize:"13px"}}),e.getMethodLink(t.method)]}):void 0}))},e.squashDatasetVariants=function(t){return e.squashManyToMany(t,"dataset",(function(e){return e>1?"Dataset variants":"Dataset variant"}),(function(t){return e.getDatasetLink(t.main)}),(function(t){return e.getDatasetLink(t.variant)}))},e.squashDatasetLoaders=function(t){return e.squashManyToMany(t,"dataset",(function(e){return e>1?"Dataset loaders":"Dataset loader"}),(function(t){return e.getDatasetLink(t.fields.dataset)}),(function(t){return e.datasetLoaderElement(t.fields)}))},e.squashMethodDependencies=function(t){return e.squashManyToMany(t,"method",(function(e){return e>1?"Dependencies":"Dependency"}),(function(t){return e.getLink(t.method)}),(function(t){return e.getMethodLink(t.dependency)}))},e.squashEvaluationTableRowTag=function(t){return e.squashManyToMany(t,"evaluationtable",(function(e){return e>1?"Tags":"Tag"}),(function(t){return e.getEvaluationTableRowLink(t)}),(function(t){return e.getLink(t.fields.tag)}))},e.squashEvaluationTableRowReport=function(t){return console.log(t),e.squashManyToMany(t,"evaluationtable",(function(e){return e>1?"Reports":"Report"}),(function(t){return e.getEvaluationTableRowLink(t)}),(function(t){return e.getLinkWithUrl(t.fields)}))},e.squashManyToMany=function(t,a,n,s,r){for(var l=[],c=w.a.groupBy(t,"model_id"),o=0,d=0,h=[],b=0,p=Object.values(c);b<p.length;b++){var j=p[b],f=e.squashObjectItems(j).users;h.push.apply(h,Object(i.a)(f));var m=void 0,g=void 0;if(j[0].is_baseline?(m=j[0].fields).active=j[0].active:m=1===j[0].model_version?{active:!1}:{active:null},(g=j[j.length-1].fields).active=j[j.length-1].active,m.active!==g.active){var v=void 0;g.active?(o++,v="+"):(d++,v="\u2212");var O=r(j[j.length-1]);l.push(Object(u.jsxs)("div",{className:"recent-change-many-to-many-action",children:[v,O]}))}}if(0===l.length)return null;var x=s(t[t.length-1]),y=n(o+d),C=o>0?d>0?"updates of":"added to":"removed from",k=Object(u.jsxs)("span",{className:"recent-changes-header",children:[y," ",C," ",a," ",x]}),N=Object(u.jsx)("div",{children:e.formatEditors(h)});return[k].concat(l,[N])},e.squash=function(t){if(0===t.length)return[];var a=t[0].model_name,n=w.a.sortBy(t,"model_version");switch(a){case"EvaluationTableRow":return e.squashResults(n);case"PaperGithubRepo":return e.squashRepos(n);case"Method":return e.diffMethods(e.squashObjectItems(n));case"MethodCollection":return e.squashMethodCollections(n);case"MethodCollectionMember":return e.squashMethodCollectionMembers(n);case"MethodDependency":return e.squashMethodDependencies(n);case"PaperMethod":return e.squashPaperMethods(n);case"PaperTask":return e.squashPaperTasks(n);case"PaperDataset":return e.squashPaperDatasets(n);case"Paper":return e.diffPapers(e.squashObjectItems(n));case"Task":return e.diffTasks(e.squashObjectItems(n));case"TaskTags":return e.squashTaskTags(n);case"Dataset":return e.diffDatasets(e.squashObjectItems(n));case"TaskDataset":return e.squashTaskDataset(n);case"DatasetLoader":return e.squashDatasetLoaders(n);case"DatasetCollectionMember":return e.squashDatasetCollectionMembers(n);case"DatasetVariant":return e.squashDatasetVariants(n);case"Collection":return e.diffCollections(e.squashObjectItems(n));case"CollectionItem":return e.squashCollectionItem(n);case"Tag":return e.diffTags(e.squashObjectItems(n));case"EvaluationTableRowTag":return e.squashEvaluationTableRowTag(n);case"EvaluationTableRowReport":return e.squashEvaluationTableRowReport(n);default:var s=e.squashObjectItems(n).users;return Object(u.jsxs)("span",{children:["Unrecognized updates to ",a," by ",e.formatEditors(s)]})}},e.renderItemVersion=function(t,a){var n,s,r,i,l,c,o,d,h;for(var b in null===a&&(a=t),t.fields){var p=t.fields[b],j=w.a.get(a.fields,b,null),f=w.a.isEqual(j,p)?"":"updated-field";switch(b){case"name":n=Object(u.jsx)("span",{className:f,children:p});break;case"full_name":s=p?Object(u.jsxs)("span",{className:f,children:["(",p,")"]}):Object(u.jsx)("span",{children:"\xa0"});break;case"url":Object(u.jsx)("h5",{className:f,children:Object(u.jsx)("a",{href:p,children:p})});break;case"introduced_date":Object(u.jsx)("h5",{className:f,children:p});break;case"unified_paper_info":d=Object(u.jsxs)("h5",{className:f,children:["Introduced by: ",e.paperElement(p)]});break;case"is_landing_hidden":r=Object(u.jsxs)("h5",{className:f,children:["Landing page: ",p?"hidden":"published"]});break;case"description":break;case"description_html":i=Object(u.jsxs)("div",{className:f,children:[Object(u.jsx)("h5",{children:"Description:"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:p}})]});break;case"footer":break;case"footer_html":h=Object(u.jsxs)("div",{className:f,children:[Object(u.jsx)("h5",{children:"Footer:"}),Object(u.jsx)("div",{dangerouslySetInnerHTML:{__html:p}})]});break;case"image":l=Object(u.jsxs)("div",{className:f,children:["Image:",Object(u.jsx)("div",{className:"entry-image",children:p&&Object(u.jsx)("img",{src:MEDIA_URL+p})})]});break;case"thumbnail":c=Object(u.jsxs)("div",{className:f,children:["Thumbnail:",Object(u.jsx)("div",{className:"entry-image thumbnail",children:p&&Object(u.jsx)("img",{src:MEDIA_URL+p})})]});break;case"icon":o=Object(u.jsxs)("div",{className:f,children:["Icon:",Object(u.jsx)("div",{className:"entry-image thumbnail",children:p&&Object(u.jsx)("img",{src:MEDIA_URL+p})})]})}}return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"row",children:Object(u.jsxs)("div",{className:"col-12",children:[t.model_name,": ",n," ",s]})}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsxs)("div",{className:"col-3",children:[l," ",c," ",o," ",r," ",d]}),Object(u.jsxs)("div",{className:"col-9",children:[i,h]})]})]})},e.handleUserClicked=function(t,a){a.preventDefault(),e.props.onUserClicked&&e.props.onUserClicked(t)},e.toggleVersions=function(t){var a=e.state.versionsExpanded;e.setState({versionsExpanded:!a})},e.handleRevertClicked=function(t,a,n,s){var r=e.props.onRevert;r&&r(t,a,n,s)},e.renderVersions=function(t){var n=e.state.versionsExpanded,s=null!=t[0].request,r=t[0].model_name;if(s||!a.RevertibleModels.includes(r))return null;var i=[];return n&&function(){for(var a=w.a.sortBy(t,"model_version"),n=a[a.length-1].model_version,s=null,r=function(t){var r=a[t],l=I(r.date),c=t===a.length-1,o=w.a.get(r,"revert.progress",null),d=void 0;if(c)d="Current version";else if(null!==o)switch(o){case"reverting":d="Reverting";break;case"refresh":d="New changes detected. Review below and try again";break;case"reverted":d="Reverted";break;case"error":d="Error"}else d="Revert to this version";var h=Object(u.jsxs)(D,{variant:"outline-primary",title:d,size:"sm",className:"button-revert",inProgress:"reverting"===o,disabled:c||null!=o&&"refresh"!==o,onClick:function(){return e.handleRevertClicked(r.model_name,r.model_id,r.model_version,n)},children:[Object(u.jsx)("i",{className:"fas fa-history"}),"\xa0",d]}),b=void 0;null!==r.user&&r.user.username&&(b=Object(u.jsxs)("span",{children:[" ",e.formatEditors([r.user])]})),i.push(Object(u.jsxs)("div",{className:"item-version",children:[Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{className:"recent-changes-header",children:["[",l,"]"]}),"\xa0",Object(u.jsxs)("span",{children:["(version ",r.model_version,b,")"]}),h]}),Object(u.jsx)("div",{className:"clearfix"}),e.renderItemVersion(r,s)]})),s=r},l=0;l<a.length;l++)r(l)}(),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("button",{className:"btn btn-outline-primary btn-sm button-versions",onClick:e.toggleVersions,children:"Show versions"}),Object(u.jsx)("div",{className:"versions",children:i})]})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){b.a.defaults.headers.common["X-CSRFToken"]=CSRF_TOKEN}},{key:"formatRepository",value:function(e){var t=null;return null!==e&&(t=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("div",{className:"name d-inline-block",children:Object(u.jsx)("a",{href:e._url,target:"_blank",children:e.full_name})}),Object(u.jsxs)("span",{style:{width:"4rem",display:"inline-block"},children:[Object(u.jsx)("ion-icon",{name:"star",style:{position:"relative",top:"2px"}}),e.stars]})]})),t}},{key:"changeStatus",value:function(e){e!==this.getStatus()&&(0,this.props.changeEntriesStatus)(this.props.entries,e)}},{key:"getStatus",value:function(){var e=this.props.entries,t=function(e){return e.recent_changes?e.recent_changes.status:null},a=t(e[e.length-1]);if(a&&"new"!==a)return a;for(var n=e.length-2;n>=0;n--){var s=t(e[n]);if(s&&"new"!==s)return"warning"===s?"warning":"new"}return"new"}},{key:"getUpdatedStatus",value:function(){var e=this.props.entries,t=e[e.length-1];return t.recent_changes?t.recent_changes.updated_status:null}},{key:"componentDidUpdate",value:function(e,t,a){if(e!==this.props){var n=this.props.entries;if(0===n.length)this.setState({squashed:null,status:null,updatedStatus:null,updatedStatusDate:null});else{var s,r=null!=n[0].request;s=r?this.formatModerationRequest(n[0]):this.squash(n);var i=r?"request":this.getStatus(),l=r?"request":this.getUpdatedStatus();null!==s&&0!==s.length||(i=null,l=null),this.setState({squashed:s,status:i,updatedStatus:l})}}t.status!==this.state.status&&this.props.onStatusChanged&&this.props.onStatusChanged(t.status,this.state.status)}},{key:"componentDidMount",value:function(){this.props.onStatusChanged&&this.props.onStatusChanged(null,this.state.status),this.componentDidUpdate({},this.state)}},{key:"componentWillUnmount",value:function(){this.props.onStatusChanged&&this.props.onStatusChanged(this.state.status,null)}},{key:"render",value:function(){var e=this,t=this.props,a=t.entries,n=t.debugMode;if(0===a.length)return Object(u.jsx)("div",{});var s=null!=a[0].request,r=this.state,i=r.status,l=r.updatedStatus,c=r.squashed;if(null===c||0===c.length){if(!n||s)return Object(u.jsx)("div",{});i=this.getStatus(),l=this.getUpdatedStatus(),c=Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("span",{className:"recent-changes-header",children:["DEBUG: empty group (id: ",a[a.length-1].recent_changes.id,")"]}),Object(u.jsx)("div",{children:this.squash([a[a.length-1]])})]})}var o=a[0].model_name,d=null;if(s)switch(a[0].request.status){case"pending":d="help-circle-outline";break;case"approved":d="checkmark-circle-outline";break;case"rejected":d="close-circle-outline";break;case"obsolete":d="ellipse-outline"}else switch(o){case"PaperGithubRepo":d="git-pull-request-outline";break;case"EvaluationTableRow":d="bar-chart";break;case"Method":case"MethodCollection":case"MethodDependency":case"MethodCollectionMember":case"PaperMethod":d="school-outline";break;case"Paper":d="document-outline";break;case"Task":case"PaperTask":case"TaskTags":d="cog-outline";break;case"Dataset":case"DatasetCollectionMember":case"DatasetVariant":case"PaperDataset":case"DatasetLoader":d="server-outline";break;case"Collection":case"CollectionItem":d="list-outline"}var h=null!==d?Object(u.jsx)("ion-icon",{name:d,style:{position:"relative",top:"2px",paddingRight:"5px"}}):null,b=function(e){return R(e).slice(11,16)}(a[a.length-1].date),p=null!==l&&i!==l?"item-updated-status":"",j=!s&&!a[a.length-1].hasOwnProperty("is_updated");return Object(u.jsxs)("div",{className:"item item-".concat(i," ").concat(p),children:[Object(u.jsx)("span",{className:"icon",children:h}),Object(u.jsxs)("span",{className:"recent-changes-header",children:["[",b,"]"]})," ",c,this.renderVersions(a),j&&Object(u.jsxs)("p",{className:"buttons",children:[Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.changeStatus("new")},className:"badge badge-".concat("new"===i?"info":"secondary"),children:"new"})," ",Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.changeStatus("ok")},className:"badge badge-".concat("ok"===i?"success":"secondary"),children:"ok"})," ",Object(u.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return e.changeStatus("warning")},className:"badge badge-".concat("warning"===i?"warning":"secondary"),children:"warning"})," "]}),j&&null!==l&&i!==l&&Object(u.jsxs)("div",{children:["The most recent status is ",l]})]})}}]),a}(j.a.Component);H.RevertibleModels=["Task","Dataset","Method","MethodCollection","Collection"];var G=H,K=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={hasError:!1,stacktrace:null},n}return Object(c.a)(a,[{key:"render",value:function(){return this.state.hasError?Object(u.jsxs)("div",{className:"item",style:{backgroundColor:"#fff0f0"},children:[Object(u.jsx)("span",{className:"recent-changes-header",style:{color:"red"},children:"Unhandled Recent Changes UI exception"}),Object(u.jsx)("h5",{children:"Stacktrace:"}),Object(u.jsx)("pre",{children:this.state.stacktrace.stack.toString()}),Object(u.jsx)("h5",{children:"Changes:"}),Object(u.jsx)("div",{children:JSON.stringify(this.props.entries)})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,stacktrace:e}}}]),a}(j.a.Component),Y=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(e=t.call.apply(t,[this].concat(s))).state={statusesCounts:{}},e.groupEntries=function(e,t){var a;switch(e){case"EvaluationTableRow":a=function(e){return null!==e.fields.paper_id?[!0,e.fields.paper_id]:[!1,e.fields.evaluation_table_id]};break;case"PaperGithubRepo":case"PaperTask":case"PaperMethod":case"PaperDataset":a=function(e){return e.fields.paper_id};break;case"MethodCollectionMember":case"CollectionItem":a=function(e){return e.fields.collection_id};break;case"DatasetCollectionMember":case"TaskDataset":case"DatasetLoader":a=function(e){return e.fields.dataset_id};break;case"MethodDependency":a=function(e){return e.fields.method_id};break;case"EvaluationTableRowTag":case"EvaluationTableRowReport":a=function(e){return e.fields.evaluation_table_row_id};break;default:a="model_id"}var n=w.a.groupBy(t,a);return w.a.map(n,(function(t,a){var n=w.a.reject(t,"is_updated");return{date:n.length?n[n.length-1].date:t[t.length-1].date,key:"".concat(e,"-").concat(a),entries:t}}))},e.handleChildStatusChanged=function(t,a){e.setState((function(e){var n=Object(r.a)({},e.statusesCounts);return null!==t&&(n[t]=n[t]-1),null!==a&&(n[a]=(n[a]||0)+1),Object(r.a)(Object(r.a)({},e),{},{statusesCounts:n})}))},e}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){w.a.isEqual(t.statusesCounts,this.state.statusesCounts)||this.props.onStatusChanged&&this.props.onStatusChanged(this.state.statusesCounts)}},{key:"render",value:function(){for(var e=this,t=this.props,a=t.entries,s=t.isFetching,r=w.a.groupBy(a,"model_name"),l=[],c=0,o=Object.entries(r);c<o.length;c++){var d,h=Object(n.a)(o[c],2),b=h[0],p=h[1],j=this.groupEntries(b,p);(d=l).push.apply(d,Object(i.a)(j))}l=w.a.orderBy(l,"date","desc");for(var f=function(t){var a=t.key,n=t.entries;return Object(u.jsx)(K,{entries:n,children:Object(u.jsx)(G,{groupId:a,entries:n,onUserClicked:e.props.onUserClicked,onRevert:e.props.onRevert,fetchRecentChanges:e.props.fetchRecentChanges,pageFilter:e.props.pageFilter,changeEntriesStatus:e.props.changeEntriesStatus,onStatusChanged:e.handleChildStatusChanged,debugMode:e.props.debugMode},a)})},m=[],g=0;g<l.length-1;g++){m.push(f(l[g]));var v=_(l[g+1].date);v!=_(l[g].date)&&m.push(Object(u.jsx)("div",{className:"date-separator",children:v},v))}return 0!==l.length&&m.push(f(l[l.length-1])),Object(u.jsx)("div",{style:{opacity:s?.3:1},children:m.length?m:Object(u.jsx)("p",{children:s?"Loading\u2026":"No changes to show."})})}}]),a}(j.a.Component),z=a(67),V=a.n(z),J=function(e,t,a){if(null==a||!t in e)return null;var n=w.a.get(e[t],a,null);return null===n?null:Object(r.a)(Object(r.a)({},n),n.fields)},W=function(e,t){var a,i=[],l=Object(s.a)(e);try{for(l.s();!(a=l.n()).done;){var c=a.value;if(c=Object(r.a)(Object(r.a)({},c),{},{fields:Object(r.a)({},c.fields)}),w.a.has(c,"request.params")){var o=Object(r.a)({},c.request.params);"paper_id"in o&&(o.paper=J(t,"Paper",o.paper_id)),c.request=Object(r.a)(Object(r.a)({},c.request),{},{params:o})}if("user_id"in c&&(c.user=J(t,"User",c.user_id)),"requester_id"in c&&(c.requester=J(t,"User",c.requester_id)),"moderator_id"in c&&(c.moderator=J(t,"User",c.moderator_id)),"paper_id"in c.fields&&(c.paper=J(t,"Paper",c.fields.paper_id)),"verified_paper_id"in c.fields&&(c.fields.verified_paper=J(t,"Paper",c.fields.verified_paper_id)),"githubrepo_id"in c.fields&&(c.repository=J(t,"GithubRepo",c.fields.githubrepo_id)),"task_id"in c.fields&&(c.fields.task=J(t,"Task",c.fields.task_id)),"area_id"in c.fields&&(c.fields.area=J(t,"Area",c.fields.area_id)),"tag_id"in c.fields&&("task_id"in c.fields?c.fields.tag=J(t,"Task",c.fields.tag_id):c.fields.tag=J(t,"Tag",c.fields.tag_id)),"evaluation_table_row_id"in c.fields&&(c.fields.evaluationtablerow=J(t,"EvaluationTableRow",c.fields.evaluation_table_row_id),"evaluation_table_id"in c.fields&&(c.evaluationtable=J(t,"EvaluationTable",c.fields.evaluation_table_id))),"dataset_id"in c.fields&&(c.fields.dataset=J(t,"Dataset",c.fields.dataset_id)),"method_id"in c.fields&&(c.method=J(t,"Method",c.fields.method_id)),"dependency_id"in c.fields&&(c.dependency=J(t,"Method",c.fields.dependency_id)),"collection_id"in c.fields&&("DatasetCollectionMember"===c.model_name?c.collection=J(t,"DatasetCollection",c.fields.collection_id):"MethodCollectionMember"===c.model_name?c.collection=J(t,"MethodCollection",c.fields.collection_id):"CollectionItem"===c.model_name&&(c.collection=J(t,"Collection",c.fields.collection_id))),"DatasetVariant"===c.model_name?(c.main=J(t,"Dataset",c.fields.main_id),c.variant=J(t,"Dataset",c.fields.variant_id)):"DatasetLoader"===c.model_name&&(c.fields.repository=J(t,"GithubRepo",c.fields.repo_id)),"metrics"in c.fields){var d=w.a.map(c.fields.metrics,(function(e,a){return[J(t,"Metric",a),e]}));d=w.a.filter(d,(function(e){var t=Object(n.a)(e,2),a=t[0];t[1];return null!=a})),d=w.a.map(d,(function(e){var t=Object(n.a)(e,2),a=t[0],s=t[1];return[a.name,s]})),c.fields.metrics=Object.fromEntries(d)}i.push(c)}}catch(u){l.e(u)}finally{l.f()}return i},X=function(e,t){var a,n={},l=new Set([].concat(Object(i.a)(Object.keys(e)),Object(i.a)(Object.keys(t)))),c=Object(s.a)(l);try{for(c.s();!(a=c.n()).done;){var o=a.value;n[o]=Object(r.a)(Object(r.a)({},w.a.get(e,o,{})),w.a.get(t,o,{}))}}catch(d){c.e(d)}finally{c.f()}return n},Z=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={queue:[],isFetching:!0},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onUserClicked,a=e.onRequestApproved,n=e.onRequestRejected,s=e.queue;if(e.isFetching)return Object(u.jsx)(N.a,{animation:"border",role:"status",variant:"primary",children:Object(u.jsx)("span",{className:"sr-only",children:"Loading..."})});if(0===s.length)return Object(u.jsx)("div",{className:"pb-3",children:"\ud83c\udf89 Moderation Queue is empty"});var r=w.a.map(s,(function(e){return Object(u.jsx)(G,{entries:[e],onUserClicked:t,onRequestRejected:n,onRequestApproved:a},e.request.id)}));return Object(u.jsx)("div",{children:r})}}]),a}(j.a.Component),$=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={archiveRecords:[],denormalizedRecords:[],queue:[],denormalizedQueue:[],relatedRecords:{},last_id:null,fetched_id:null,isFetchingQueue:!0,isFetchingRecords:!1,detailsIsOpen:!1,userDetailsId:null,isBlocking:!1,blockingStatus:null,hasMorePages:null,filterAutomatic:!1,filter:null,statusesCounts:{},stats:null,debugMode:!1},e.recentChangesRequestId=0,e.updateRecords=function(t){var a=e.state,n=a.archiveRecords,s=a.queue,r=a.relatedRecords,i=X(r,t),l=W(n,i),c=W(s,i);e.setState({denormalizedRecords:l,denormalizedQueue:c,relatedRecords:i})},e.changeEntriesStatus=function(t,a){e.recentChangesRequestId++;var n=t[t.length-1];n.recent_changes.status=a,e.updateRecords({}),b.a.patch("/api/internal/recent-changes/".concat(n.recent_changes.id,"/"),{status:a}).then((function(t){var a=t.data.stats;e.setState({stats:a})}))},e.fetchModerationQueue=function(){e.setState({isFetchingQueue:!0});b.a.get("/api/v0/moderation/queue/",{params:{filter_status:"pending",deduplicate:!0}}).then((function(t){var a=t.data,n=a.queue,s=a.related;e.setState({queue:n}),e.updateRecords(s)})).finally((function(){return e.setState({isFetchingQueue:!1})}))},e.fetchRecentChanges=function(){var t=e.props.page,a=e.state.filter;e.setState({isFetchingRecords:!0});var n={page:t,filter_status:a},s=++e.recentChangesRequestId;b.a.get("/api/v0/recent_changes/",{params:n}).then((function(t){if(s===e.recentChangesRequestId){var a=t.data,n=a.page.has_next_page,r=a.changes,i=a.related,l=a.stats;e.setState({archiveRecords:r,hasMorePages:n,stats:l}),e.updateRecords(i)}})).finally((function(){return e.setState({isFetchingRecords:!1})}))},e.openDetails=function(t){e.setState({detailsIsOpen:!0,userDetailsId:t})},e.closeDetails=function(){e.setState({detailsIsOpen:!1,blockingStatus:null})},e.onHashChanged=function(){var t=/^#?(\d*)$/.exec(location.hash);if(null!==t){var a=t[1];e.state.last_id!==a&&e.setState({last_id:a})}},e.blockUser=function(t,a){var n={user_id:t,block:a};e.setState({isBlocking:!0,blockingStatus:null}),b.a.post("/api/v0/moderation/users/block/",n).then((function(t){var a=t.data.related;e.updateRecords(a)})).catch((function(t){e.setState({blockingStatus:t.response.data.error})})).finally((function(){return e.setState({isBlocking:!1})}))},e.updateRequestProgress=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=e.state,l=s.queue,c=s.relatedRecords,o=w.a.findIndex(l,{request:{id:t}});if(-1!==o){var d=Object(i.a)(l),u=l[o];d[o]=Object(r.a)(Object(r.a)({},u),{},{errors:n,request:Object(r.a)(Object(r.a)({},u.request),{},{progress:a})}),e.setState({queue:d,denormalizedQueue:W(d,c)})}},e.updateRevertProgress=function(t,a,n,s){var l=e.state,c=l.archiveRecords,o=l.relatedRecords,d={model_name:t,model_id:a,model_version:n},u=w.a.findIndex(c,d);if(-1!==u){var h=Object(i.a)(c),b=c[u];h[u]=Object(r.a)(Object(r.a)({},b),{},{revert:{progress:s}});var p=W(h,o);e.setState({archiveRecords:h,denormalizedRecords:p})}},e.handleRequestApproval=function(t,a){var n={request_id:t,approve:a};e.updateRequestProgress(t,a?"approving":"rejecting"),b.a.post("/api/v0/moderation/queue/",n).then((function(t){var a=t.data,n=a.queue,s=a.related,r=e.state.queue,l=[].concat(Object(i.a)(n),Object(i.a)(r));l=w.a.uniqBy(l,"request.id"),l=w.a.orderBy(l,"request.id","desc"),e.setState({queue:l}),e.updateRecords(s)})).catch((function(a){var n=a.response.data;e.updateRequestProgress(t,null,n)}))},e.handleRevert=function(t,a,n,r){var l={model_name:t,model_id:a,model_version:n,current_model_version:r};e.updateRevertProgress(t,a,n,"reverting"),b.a.post("/api/v0/moderation/revert/",l).then((function(r){var l,c=r.data,o=c.changes,d=c.related,u=e.state.archiveRecords,h=Object(s.a)(o);try{for(h.s();!(l=h.n()).done;){l.value.is_updated=!0}}catch(b){h.e(b)}finally{h.f()}e.setState({archiveRecords:[].concat(Object(i.a)(u),Object(i.a)(o))}),e.updateRecords(d),e.updateRevertProgress(t,a,n,"reverted")})).catch((function(r){if(r.response&&409===r.response.status){var l,c=r.response.data,o=c.changes,d=c.related,u=e.state.archiveRecords,h=Object(s.a)(o);try{for(h.s();!(l=h.n()).done;){l.value.is_updated=!0}}catch(b){h.e(b)}finally{h.f()}e.setState({archiveRecords:[].concat(Object(i.a)(u),Object(i.a)(o))}),e.updateRecords(d),e.updateRevertProgress(t,a,n,"refresh")}else e.updateRevertProgress(t,a,n,"error")}))},e.formatUserDetails=function(t){if(null===t)return null;var a=e.state.relatedRecords.User[t];if(null===a)return null;a=Object(r.a)(Object(r.a)({},a),a.fields);var n,s=e.state,i=s.isBlocking,l=s.blockingStatus;if(a.moderator)n=Object(u.jsx)("div",{children:"This user is a moderator"});else{var c=i?Object(u.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):null;n=Object(u.jsxs)("button",{className:"btn btn-outline-danger button-block",onClick:function(){return e.blockUser(a.model_id,a.active)},children:[c,i?"":a.active?"Block":"Unblock"]})}var o=Object(u.jsx)("div",{children:l});return Object(u.jsxs)("div",{className:"user-details-modal",children:[Object(u.jsxs)("div",{children:["Username: ",a.username]}),Object(u.jsxs)("div",{children:["Email: ",Object(u.jsx)("a",{href:"mailto:".concat(a.email),children:a.email})]}),Object(u.jsxs)("div",{children:["Active: ",a.active?"yes":"no"]}),Object(u.jsxs)("div",{children:["Joined: ",I(a.joined)]}),n,o]})},e.notify=function(e){"granted"===Notification.permission&&new Notification("Papers with Code",{icon:"/static/logo.png",body:e})},e.handleUserClicked=function(t){e.openDetails(t)},e.getPagination=function(){var t=e.props.page;null==t&&(t=1);var a,n,s=e.state,r=s.denormalizedRecords,i=s.hasMorePages;if(0===r.length)a="\u2026",n=!0;else{var l=w.a.orderBy(r,["model_id","date"],["asc","desc"]),c=w.a.map(w.a.uniqBy(l,"model_id"),"date");a=_(new Date(w.a.max(c))),n=!1}return[n,Object(u.jsx)(g.a,{className:"justify-content-center",children:Object(u.jsxs)(v.a,{className:"text-center",children:[Object(u.jsxs)(v.a.First,{href:"/recent_changes/1",disabled:t<=1,children:[Object(u.jsx)("span",{"aria-hidden":"true",children:"\xab"}),"Newest"]}),Object(u.jsxs)(v.a.Item,{href:t>1?"/recent_changes/".concat(t-1):null,disabled:t<=1,children:[Object(u.jsx)("span",{"aria-hidden":"true",children:"\u2039"}),"Newer"]}),Object(u.jsx)(v.a.Item,{children:a}),Object(u.jsxs)(v.a.Item,{href:i?"/recent_changes/".concat(t+1):null,disabled:!i,children:["Older",Object(u.jsx)("span",{"aria-hidden":"true",children:"\u203a"})]})]})})]},e.renderEntries=function(){var t,a=e.state,n=a.denormalizedRecords,s=a.filterAutomatic,r=a.isFetchingRecords;if(s){var l=w.a.groupBy(n,(function(e){return"".concat(e.model_name,"-").concat(e.model_id)}));t=[];for(var c=0,o=Object.values(l);c<o.length;c++){var d,h=o[c];if(!w.a.every(h,(function(e){return null==e.user_id})))(d=t).push.apply(d,Object(i.a)(h))}}else t=n;return Object(u.jsx)(Y,{entries:t,onUserClicked:e.handleUserClicked,onRevert:e.handleRevert,fetchRecentChanges:e.fetchRecentChanges,pageFilter:e.state.filter,changeEntriesStatus:e.changeEntriesStatus,setFilter:e.setFilter,onStatusChanged:e.handleEntriesStatusChanged,isFetching:r,debugMode:e.state.debugMode})},e.handleFilterAutomatic=function(t){e.setState({filterAutomatic:t})},e.setFilter=function(t){e.setState({filter:t})},e.handleEntriesStatusChanged=function(t){e.setState({statusesCounts:t})},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){V.a.setAppElement("body"),b.a.defaults.headers.common["X-CSRFToken"]=this.props.csrfToken;var e="true"===localStorage.getItem("filterAutomatic");e!==this.state.filterAutomatic&&this.setState({filterAutomatic:e});var t=localStorage.getItem("filter");t!==this.state.filter&&["all","to-review","warnings","ok"].includes(t)&&this.setState({filter:t}),this.fetchModerationQueue(),window.addEventListener("hashchange",this.onHashChanged,!1),null!=new URLSearchParams(window.location.search).get("debug")&&this.setState({debugMode:!0})}},{key:"componentDidUpdate",value:function(e,t,a){var n=this.state,s=n.filterAutomatic,r=n.filter,i=this.props.page,l=t.filterAutomatic,c=t.filter;s!==l&&localStorage.setItem("filterAutomatic",s),r!==c&&(localStorage.setItem("filter",r),null!=c&&1!==i?(this.setState({isFetchingRecords:!0}),window.location.pathname="/recent_changes/1"):this.fetchRecentChanges())}},{key:"renderFilters",value:function(){var e=this,t=this.state,a=t.filter,n=t.stats,s=null!==n?n.new:0,r=null!==n?n.warnings:0,i=function(e){return e?Object(u.jsx)("span",{className:"badge badge-pill badge-light",children:e}):null};return Object(u.jsx)(g.a,{children:Object(u.jsx)(O.a,{xs:12,children:Object(u.jsxs)("ul",{className:"nav nav-tabs",children:[Object(u.jsx)("li",{onClick:function(){return e.setFilter("all")},className:"nav-item",children:Object(u.jsx)("a",{className:"nav-link  ".concat("all"===a?"active":""),children:"all"})})," ",Object(u.jsx)("li",{onClick:function(){return e.setFilter("to-review")},className:"nav-item",children:Object(u.jsxs)("a",{className:"nav-link ".concat("to-review"===a?"active":""),children:["to review ",i(s+r)]})})," ",Object(u.jsx)("li",{onClick:function(){return e.setFilter("warnings")},className:"nav-item",children:Object(u.jsxs)("a",{className:"nav-link ".concat("warnings"===a?"active":""),children:["warnings ",i(r)]})}),Object(u.jsx)("li",{onClick:function(){return e.setFilter("ok")},className:"nav-item",children:Object(u.jsx)("a",{className:"nav-link ".concat("ok"===a?"active":""),children:"ok"})})]})})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.filterAutomatic,s=t.denormalizedQueue,r=t.isFetchingQueue,i=(t.filter,this.getPagination()),l=Object(n.a)(i,2),c=l[0],o=l[1];return Object(u.jsxs)("div",{className:"mb-4 w-100 recent-changes-list",children:[Object(u.jsx)(g.a,{className:"title md-3",children:Object(u.jsx)(O.a,{xs:12,children:Object(u.jsx)("h1",{className:"md-0",children:"Recent Changes"})})}),o,Object(u.jsx)(g.a,{className:"md-3",children:Object(u.jsx)(O.a,{xs:4,children:Object(u.jsx)(m,{filterAutomatic:a,onFilterAutomatic:this.handleFilterAutomatic})})}),Object(u.jsx)(Z,{onUserClicked:this.handleUserClicked,onRequestRejected:function(t){return e.handleRequestApproval(t,!1)},onRequestApproved:function(t){return e.handleRequestApproval(t,!0)},isFetching:r,queue:s}),this.renderFilters(),this.renderEntries(),!c&&o,this.renderUserModal()]})}},{key:"renderUserModal",value:function(){var e=this.state,t=e.userDetailsId,a=e.detailsIsOpen;return Object(u.jsx)(V.a,{className:"Modal__Bootstrap modal-dialog recent-changes-user-dialog",isOpen:a,shouldCloseOnOverlayClick:!0,onRequestClose:this.closeDetails,children:Object(u.jsxs)("div",{className:"modal-content",children:[Object(u.jsxs)("div",{className:"modal-header",children:[Object(u.jsx)("h4",{className:"modal-title",children:"User Details"}),Object(u.jsxs)("button",{type:"button",className:"close",onClick:this.closeDetails,children:[Object(u.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(u.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(u.jsx)("div",{className:"modal-body",children:this.formatUserDetails(t)}),Object(u.jsx)("div",{className:"modal-footer",children:Object(u.jsx)("button",{className:"btn btn-primary",onClick:this.closeDetails,children:"Close"})})]})})}}]),a}(j.a.Component);t.default=$},364:function(e,t,a){"use strict";a.r(t);var n=a(12),s=a(13),r=a(15),i=a(14),l=a(17),c=a(0),o=a(1),d=a.n(o),u=a(18),h=a.n(u),b=a(26),p=a(73),j=a(68),f=a.n(j),m=a(56),g=a(7),v=function(e){return e},O=function(e){return Object(c.jsx)("span",{children:e})},x=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).resetHighlightInBlob=function(){s.props.setHighlightInBlob(null,null,null)},s.handleChangeAllBlobs=function(e,t){if(e.preventDefault(),"metric"===s.props.highlightInBlob.name){var a="suggestMetric"+t;s.setState(Object(b.a)({},a,[]))}else if("task"===s.props.highlightInBlob.name){var n="suggestTask"+t;s.setState(Object(b.a)({},n,[]))}else if("dataset"===s.props.highlightInBlob.name){var r="suggestDataset"+t;s.setState(Object(b.a)({},r,[]))}s.props.handleChangeAllBlobs(t),s.resetHighlightInBlob()},s.viewReviewBlobs=function(){var e=[Object(c.jsx)("div",{ref:"ref-filler"},"ref-filler")],t={};s.props.tableData.map((function(e,a){var n=e.metadata.table;n in t?t[n]++:t[n]=1}));var a=[];if(s.props.tableData.map((function(n,r){var i=n.model,l=n.task,o=n.dataset,d=n.metric,u=n.value,h=n.metadata,p=s.props.highlightInBlob,j=h.table+"-"+h.index[0]+"-"+h.index[1],x=s.state["suggestTask"+r],w=s.state["suggestDataset"+r],y=s.state["suggestMetric"+r],C={placeholder:"",value:l,onChange:function(e,t){var a=t.newValue;t.method;s.props.handleChangeNameIdxValue(e,"task",r,a)},onBlur:function(e,t){t.highlightedSuggestion;s.resetHighlightInBlob()}},k={placeholder:"",value:o,onChange:function(e,t){var a=t.newValue;t.method;s.props.handleChangeNameIdxValue(e,"dataset",r,a)},onBlur:function(e,t){t.highlightedSuggestion;s.resetHighlightInBlob()}},N={placeholder:"",value:d,onChange:function(e,t){var a=t.newValue;t.method;s.props.handleChangeNameIdxValue(e,"metric",r,a)},onBlur:function(e,t){t.highlightedSuggestion;s.resetHighlightInBlob()}},D="review-blob";r==s.props.reviewHlRow&&(D+=" review-highlight");var S=Object(c.jsx)("span",{className:g({"blob-changeall":!0,"blob-changeall-show":"model"===p.name&&p.idx===r&&t[h.table]>1}),children:Object(c.jsx)("button",{onMouseDown:function(e){return s.handleChangeAllBlobs(e,r)},onClick:function(e){return e.preventDefault()},children:"Change all"})}),A=Object(c.jsx)("span",{className:g({"blob-changeall":!0,"blob-changeall-show":"task"===p.name&&p.idx===r&&t[h.table]>1}),children:Object(c.jsx)("button",{onMouseDown:function(e){return s.handleChangeAllBlobs(e,r)},onClick:function(e){return e.preventDefault()},children:"Change all"})}),R=Object(c.jsx)("span",{className:g({"blob-changeall":!0,"blob-changeall-show":"dataset"===p.name&&p.idx===r&&t[h.table]>1}),children:Object(c.jsx)("button",{onMouseDown:function(e){return s.handleChangeAllBlobs(e,r)},onClick:function(e){return e.preventDefault()},children:"Change all"})}),_=Object(c.jsx)("span",{className:g({"blob-changeall":!0,"blob-changeall-show":"metric"===p.name&&p.idx===r&&t[h.table]>1}),children:Object(c.jsx)("button",{onMouseDown:function(e){return s.handleChangeAllBlobs(e,r)},onClick:function(e){return e.preventDefault()},children:"Change all"})}),I="";!1===h.validity.task&&(I="New");var E="";!1===h.validity.dataset&&(E="New");var M="";!1===h.validity.tdm&&(M="New"),!1===h.validity.tdm&&!1===h.validity.td&&(I="New",E="New");var T=s.props.existingMetrics(l,o).join(", ");""!==T&&(T="Existing metrics: "+T);var B=Object(c.jsx)("span",{className:g({"blob-new":!0,"blob-new-show":""!==M}),"data-tip":T,children:M}),F=Object(c.jsx)("span",{className:g({"blob-new":!0,"blob-new-show":""!==I}),children:I}),Q=Object(c.jsx)("span",{className:g({"blob-new":!0,"blob-new-show":""!==E}),children:E}),U=!1,q=Object(c.jsx)("div",{className:"blob-left-border-yellow"});h.table<0?(q=Object(c.jsx)("div",{className:"blob-left-border-gray"}),U=!0):"is_approved"in h&&!0===h.is_approved&&(q=Object(c.jsx)("div",{className:"blob-left-border-green"})),j===s.state.dataRefHl&&(D+=" review-highlight"),s.props.evaluationtablerowHl!==h.evaluationtablerow_id||s.props.unsavedChanges||(D+=" review-pulse");var L="",P=l.toLowerCase()+"||"+o.toLowerCase();if(P in s.props.hash.table){var H=s.props.hash.table[P];L=Object(c.jsx)("span",{className:"table-outlink",children:Object(c.jsx)("a",{href:H.url,target:"_blank",children:Object(c.jsx)("i",{className:"fas fa-external-link-alt"})})})}var G="",K=l.toLowerCase();if(K in s.props.hash.task_url){var Y=s.props.hash.task_url[K];G=Object(c.jsx)("span",{className:"table-outlink",children:Object(c.jsx)("a",{href:Y,target:"_blank",children:Object(c.jsx)("i",{className:"fas fa-external-link-alt"})})})}var z=Object(c.jsxs)("div",{className:D,ref:"blob-"+j+"-"+r,"data-col-id":j,onMouseEnter:function(e){return s.reviewCellHover(j)},onMouseLeave:function(e){return s.reviewCellHover(null)},children:[q,Object(c.jsxs)("div",{className:"blob-block blob-first",children:[Object(c.jsx)("div",{className:"blob-header",children:"Value"}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)("input",{type:"text",id:"in_value_"+r,value:u,"data-col-id":j,onChange:s.handleChange,className:"blob-input-value"})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Metric ",B," ",_]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_metric_"+r,suggestions:y,onSuggestionsFetchRequested:function(e){var t="suggestMetric"+r;s.filterSuggestions("metrics",e.value,t),s.props.setHighlightInBlob("metric",h.table,r)},onSuggestionsClearRequested:function(){var e="suggestMetric"+r;s.setState(Object(b.a)({},e,[]))},getSuggestionValue:v,renderSuggestion:O,inputProps:N})})]}),Object(c.jsxs)("div",{className:g({"blob-block":!0}),children:[Object(c.jsxs)("div",{className:"blob-header",children:["Model name ",S]}),Object(c.jsx)("div",{className:"blob-input blob-model",children:Object(c.jsx)("input",{type:"text",id:"in_model_"+r,value:i,onFocus:function(e){return s.props.setHighlightInBlob("model",h.table,r)},onBlur:function(e){return s.resetHighlightInBlob()},onChange:s.handleChange})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Dataset ",L,Q," ",R]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_dataset_"+r,suggestions:w,onSuggestionsFetchRequested:function(e){var t="suggestDataset"+r;s.filterSuggestions("datasets",e.value,t),s.props.setHighlightInBlob("dataset",h.table,r)},onSuggestionsClearRequested:function(){var e="suggestDataset"+r;s.setState(Object(b.a)({},e,[]))},getSuggestionValue:v,renderSuggestion:O,inputProps:k})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Task ",G,F," ",A]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_task_"+r,suggestions:x,onSuggestionsFetchRequested:function(e){var t="suggestTask"+r;s.filterSuggestions("tasks",e.value,t),s.props.setHighlightInBlob("task",h.table,r)},onSuggestionsClearRequested:function(){var e="suggestTask"+r;s.setState(Object(b.a)({},e,[]))},getSuggestionValue:v,renderSuggestion:O,inputProps:C})})]}),Object(c.jsx)("div",{className:"blob-block blob-no-left-padding",children:Object(c.jsx)("div",{className:"blob-x",children:Object(c.jsx)("i",{className:"fas fa-times-circle","data-idx":r,onClick:s.props.handleRemoveBlob})})}),Object(c.jsx)(m.a,{})]},"blobkey-"+j+"-"+r);U?a.push(z):e.push(z)})),s.props.referencesData.map((function(t,a){if(0!==Object.keys(t).length){var n,r=0,i=[],o=Object(l.a)(t.data);try{for(o.s();!(n=o.n()).done;){var d,u=n.value,h=Object(l.a)(u);try{for(h.s();!(d=h.n()).done;){var b=d.value;"verified"in b&&("review"in b.verified?"add"===b.verified.review&&r++:"verified"in b.verified&&r++,"evaluationtablerow_id"in b.verified&&i.push(b.verified.evaluationtablerow_id))}}catch(f){h.e(f)}finally{h.f()}}}catch(f){o.e(f)}finally{o.f()}var p="review-blob";i.indexOf(s.props.evaluationtablerowHl)>=0&&!s.props.unsavedChanges&&(p+=" review-pulse");var j=Object(c.jsxs)("div",{className:p,ref:"references-"+a,"data-idx":a,children:[Object(c.jsx)("div",{className:"blob-left-border-blue"}),Object(c.jsxs)("div",{className:"blob-block blob-first",children:[Object(c.jsx)("div",{className:"blob-header",children:"Parsed references"}),Object(c.jsxs)("div",{className:"blob-input blob-input-references",children:[Object(c.jsx)("button",{"data-idx":a,onClick:s.handleEditParseReferences,children:"Edit"}),"\xa0",r," values imported."]})]}),Object(c.jsx)("div",{className:"blob-block blob-no-left-padding",children:Object(c.jsx)("div",{className:"blob-x",children:Object(c.jsx)("i",{className:"fas fa-times-circle","data-idx":a,onClick:s.props.handleRemoveReferencesBlob})})}),Object(c.jsx)(m.a,{})]},"referenceskey-"+a);e.push(j)}})),a.length>0){var n=Object(c.jsxs)("div",{className:"review-blob",ref:"gray-0","data-idx":0,children:[Object(c.jsx)("div",{className:"blob-left-border-gray"}),Object(c.jsxs)("div",{className:"blob-block blob-first",children:[Object(c.jsx)("div",{className:"blob-header",children:"Unmatched results"}),Object(c.jsxs)("div",{className:"blob-input blob-input-gray",children:[Object(c.jsx)("button",{"data-idx":0,onClick:s.handleGrayClick,children:"Edit"}),"\xa0",a.length," results not in paper tables."]})]}),Object(c.jsx)(m.a,{})]},"referenceskey-0");e.push(n)}return e},s.handleEditParseReferences=function(e){e.preventDefault();var t=parseInt(e.target.getAttribute("data-idx"));s.props.openModal(s.props.referencesData[t])},s.handleGrayClick=function(e){e.preventDefault(),s.props.openGrayBlobsModal()},s.handleChange=function(e){var t=e.target,a=t.id.split("_"),n=a[1],r=parseInt(a[2]),i=t.value;Object(b.a)({},n,i);s.props.handleChangeNameIdxValue(e,n,r,i)},s.filterSuggestions=function(e,t,a){var n=s.props.autosuggests[e],r=[],i=t.toLowerCase();n.map((function(e,t){e.toLowerCase().includes(i)&&r.push(e)})),r.sort((function(e,t){return e.length-t.length})),r.length>10&&(r=r.slice(0,10)),s.setState(Object(b.a)({},a,r))},s.onSuggestionsFetchRequested=function(e){var t=e.value;s.setState({suggestions:getSuggestions(t)})},s.onSuggestionsClearRequested=function(){s.setState({suggestions:[]})},s.state={dataRefHl:null};for(var r=0;r<1e3;r++)s.state["suggestTask"+r]=[],s.state["suggestDataset"+r]=[],s.state["suggestMetric"+r]=[];return s.handleChange=s.handleChange.bind(Object(p.a)(s)),s}return Object(s.a)(a,[{key:"reviewCellHover",value:function(e){this.setState({dataRefHl:e}),this.props.reviewCellHover(e)}},{key:"renderView",value:function(){return Object(c.jsx)("div",{className:"review-blobs",children:this.viewReviewBlobs()})}},{key:"render",value:function(){return Object(c.jsx)("div",{className:"review-container",children:this.renderView()})}},{key:"componentDidMount",value:function(){this.props.updateBlobRefs(this.refs)}},{key:"componentDidUpdate",value:function(){this.props.layoutBlobs()}}]),a}(d.a.Component),w=a(8),y=a(7),C=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).handleParseReferenceOnClick=function(e,t){e.preventDefault(),s.props.handleParseReferenceOnClick(t)},s}return Object(s.a)(a,[{key:"generateRows",value:function(e,t){var a=this,n=[],s=[],r=[],i=[],o=[],d=/(?:[+-]?(?:(?:\d{1,3}(?:,\d{3})+|\d+)(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?)/g;this.props.tableData.map((function(e,t){var n=e.metadata,i=n.table+"-"+n.index[0]+"-"+n.index[1];"is_approved"in n&&!0===n.is_approved?s.push(i):r.push(i),a.props.evaluationtablerowHl===n.evaluationtablerow_id&&o.push(i)}));for(var u=0;u<this.props.referencesData.length;u++){var h=this.props.referencesData[u];if(0!==Object.keys(h).length)for(var b=0;b<h.data.length;b++)for(var p=h.data[b],j=0;j<p.length;j++){var f=u+"-"+b+"-"+j,m=p[j],g=!1;"verified"in m&&("review"in m.verified?"add"===m.verified.review&&(g=!0):"verified"in m.verified&&(g=!0),"evaluationtablerow_id"in m.verified&&m.verified.evaluationtablerow_id===this.props.evaluationtablerowHl&&o.push(f)),g&&i.push(f)}}var v,O=0,x=Object(l.a)(t.data);try{for(x.s();!(v=x.n()).done;){var y,C=v.value,k=[],N=0,D=Object(l.a)(C);try{var S=function(){var n=y.value,l="".concat(e,"-").concat(O,"-").concat(N),u=t.formatted_data[O][N],h=null;if(-1!==u.indexOf("span-cb")){for(var b=[],p=C.length,j=N;j<p&&-1===t.formatted_data[O][j].indexOf("span-ce");)b.push.apply(b,Object(w.a)(t.formatted_data[O][j].split(" "))),j++;j<p&&b.push.apply(b,Object(w.a)(t.formatted_data[O][j].split(" "))),h=j-N+1,u=Object(w.a)(new Set(b)).join(" ")}else if(-1!==u.indexOf("span-ci")||-1!==u.indexOf("span-ce"))return N++,"continue";var f="arxiv-cell";s.indexOf(l)>-1&&(f="highlight-green"),r.indexOf(l)>-1&&(f="highlight-yellow"),i.indexOf(l)>-1&&(f="highlight-blue"),l===a.props.arxivHlId&&(f+=" highlight-hover-green"),o.indexOf(l)>-1&&!a.props.unsavedChanges&&(i.indexOf(l)>-1?f+=" review-pulse-blue":f+=" review-pulse-green"),"proposals"in n&&(f+=" arxiv-addable");var m=function(e){a.props.arxivCellClick(e,l,"td"+l)},g=n.value,v=((g||"").match(d)||[]).length;s.filter((function(e){return e===l})).length+r.filter((function(e){return e===l})).length+i.filter((function(e){return e===l})).length>=v&&(m=null);var x=n.html;g.startsWith("\\")&&(g="",x=""),k.push(Object(c.jsx)("td",{className:u,"data-col-id":l,ref:"ref-"+l,colSpan:h,children:Object(c.jsx)("span",{className:f,ref:"td"+l,"data-col-id":l,onClick:m,onMouseEnter:function(e){return a.props.arxivCellHover(l,"td"+l)},onMouseLeave:function(e){return a.props.arxivCellHover(null)},children:"undefined"===typeof n.html||""===n.html?g:Object(c.jsx)("span",{dangerouslySetInnerHTML:{__html:x}})})},l)),N++};for(D.s();!(y=D.n()).done;)S()}catch(R){D.e(R)}finally{D.f()}var A="".concat(e,"-").concat(O);n.push(Object(c.jsx)("tr",{className:"","data-row-id":A,children:k},O)),O++}}catch(R){x.e(R)}finally{x.f()}return n}},{key:"generateTables",value:function(){var e=this,t=[];if(0===this.props.arxivTables.length)return Object(c.jsx)("div",{className:"alert alert-info",children:"No tables found in the paper."});var a,n=Object(l.a)(this.props.arxivTables);try{var s=function(){var n=a.value;t.push(Object(c.jsx)("b",{dangerouslySetInnerHTML:{__html:n.title}},"table-title-".concat(n.id)));var s=!e.props.arxivParseReferences[n.id]&&!n.hasReferences,r=!e.props.arxivParseReferences[n.id];t.push(Object(c.jsx)("div",{className:"parse-references",children:Object(c.jsx)("button",{disabled:r,className:y({hide:s}),onClick:function(t){e.handleParseReferenceOnClick(t,n.id)},children:"Parse references"})},"div-ref"+n.id)),t.push(Object(c.jsx)("table",{className:"table",children:Object(c.jsx)("tbody",{children:e.generateRows(n.id,n.zipped_data)})},n.id))};for(n.s();!(a=n.n()).done;)s()}catch(r){n.e(r)}finally{n.f()}return t}},{key:"render",value:function(){return Object(c.jsx)("div",{className:"arxiv-table tableWrapper",children:this.generateTables()})}},{key:"componentDidMount",value:function(){this.props.updateArxivRefs(this.refs)}}]),a}(d.a.Component),k=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).handleHelpClicked=function(e){e.preventDefault(),s.props.onHelp()},s.handleSaveClicked=function(e){e.preventDefault(),s.props.setSaving(!0),s.props.onSave(s.props.tableData,s.props.referencesData,s.props.unsavedChanges,s.props.handleResultsSaved,s.props.handleSaveError)},s}return Object(s.a)(a,[{key:"render",value:function(){var e=null;this.props.savingError?e=Object(c.jsx)("span",{className:"saving-error",children:"There was an error during saving, please retry"}):this.props.unsavedChanges?e=Object(c.jsx)("span",{className:"unsaved-changes",children:"Unsaved changes"}):this.props.saved&&(e=Object(c.jsx)("span",{className:"saved-changes",children:"All changes saved"}));var t="Save";document.getElementById("annotate-next-link")&&(t="Save & Next");var a=Object(c.jsx)("i",{className:"fas fa-save"});this.props.saving&&(a=Object(c.jsx)("img",{src:"/static/spin-1s-24px-green.gif"}));var n="save-review-button";return this.props.isUserLoggedIn||(t="Login/Register to save edits",a=Object(c.jsx)("i",{className:"fas fa-lock-alt"}),n="login-review-button"),Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{className:"text-left w-50 d-inline-block",children:Object(c.jsxs)("button",{className:"help-button",onClick:this.handleHelpClicked,children:[Object(c.jsx)("i",{className:"fas fa-question-circle"}),"\xa0 Help"]})}),Object(c.jsxs)("div",{className:"text-right w-50 d-inline-block",children:[e,Object(c.jsxs)("button",{className:n,onClick:this.handleSaveClicked,children:[a,"\xa0 ",t]})]})]})}}]),a}(d.a.Component),N=a(268),D=a(7),S=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(){var e;Object(n.a)(this,a);for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){e.node.contains(t.target)||e.props.proposals.length>0&&e.closeProposals()},e.closeProposals=function(){e.props.arxivCellClick(null,null,null)},e.addNewAnnotation=function(t){t.preventDefault();var a=parseInt(t.target.getAttribute("data-idx"));e.props.addNewAnnotation(e.props.proposals[a]),e.closeProposals()},e.addWithEmptyProposal=function(t,a){e.props.addNewAnnotation({model:"",task:"",value:t,dataset:"",metric:"",metadata:a}),e.closeProposals()},e}return Object(s.a)(a,[{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnMount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this,t="",a={};if(this.props.proposals.length>0){var n=h.a.findDOMNode(this.props.proposalsRef).getBoundingClientRect(),s=n.top+window.scrollY,r=n.right+window.scrollX,i=window.document.body.offsetHeight;s+250>i&&(s-=s+250-i),a={position:"absolute",top:s,left:r,border:"2px solid #04CD00"};var l=this.props.proposals,o=[],d="",u={},b=1,p=N("#00C52B"),j={};l.map((function(t,a){d=t.value,u=t.metadata,b=t.confidence,j={backgroundColor:p.lighten(1-b),borderColor:p.lighten(1-b)},o.push(Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("button",{className:D({"add-annotation-button":!0,"add-annotation-button-10":b>.9,"add-annotation-button-05":b<=.9&&b>.3,"add-annotation-button-00":b<=.3}),"data-idx":a,onClick:e.addNewAnnotation,style:j,children:"->"})}),Object(c.jsx)("td",{children:t.value}),Object(c.jsx)("td",{children:t.metric}),Object(c.jsx)("td",{children:t.model}),Object(c.jsx)("td",{children:t.dataset}),Object(c.jsx)("td",{children:t.task})]},"proposal-"+a))})),t=Object(c.jsxs)("div",{className:"arxiv-proposals-container",children:[Object(c.jsx)("div",{className:"arxiv-proposals-caption",children:"Annotate as:"}),Object(c.jsxs)("table",{children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{}),Object(c.jsx)("th",{children:"Value"}),Object(c.jsx)("th",{children:"Metric"}),Object(c.jsx)("th",{children:"Model"}),Object(c.jsx)("th",{children:"Dataset"}),Object(c.jsx)("th",{children:"Task"})]})}),Object(c.jsx)("tbody",{children:o})]}),Object(c.jsxs)("div",{className:"arxiv-proposals-footer",children:["None of these are right?\xa0",Object(c.jsx)("a",{href:"#",onClick:function(t){t.preventDefault(),e.addWithEmptyProposal(parseFloat(d),u)},children:"Click here to add a custom annotation"})]})]})}return Object(c.jsx)("div",{className:"arxiv-add-wrap",style:a,ref:function(t){return e.node=t},children:t})}}]),a}(d.a.Component),A=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).handleModelChange=function(e){var t=e.target.getAttribute("data-col-id").split("-"),a=parseInt(t[1]),n=parseInt(t[2]),r=e.target.value,i=s.state.modalData;"editable"in i.data[a][n]&&(i.data[a][n].editable.value=r),s.setState({modalData:i})},s.handleCellClick=function(e){var t=e.target.parentNode.getAttribute("data-col-id").split("-"),a=parseInt(t[1]),n=parseInt(t[2]),r=s.state.modalData;"verified"in r.data[a][n]&&("review"in r.data[a][n].verified?"add"===r.data[a][n].verified.review?r.data[a][n].verified.review="remove":r.data[a][n].verified.review="add":"verified"in r.data[a][n].verified?r.data[a][n].verified.review="remove":r.data[a][n].verified.review="add"),s.setState({modalData:r})},s.handleSaveClicked=function(e){s.props.handleAcceptParsedReferences(s.state.modalData),s.props.closeModal()},s.state={modalData:s.props.modalData},s}return Object(s.a)(a,[{key:"generateRows",value:function(){var e=[],t=this.state.modalData,a=[],n=[];this.props.tableData.map((function(e,s){var r=e.metadata;if(r.table===t.tableId){var i="modal-"+r.index[0]+"-"+r.index[1];"is_approved"in r&&!0===r.is_approved?a.push(i):n.push(i)}}));var s,r=0,i="modal",o=Object(l.a)(t.data);try{for(o.s();!(s=o.n()).done;){var d,u=s.value,h=[],b=0,p=!1,j=Object(l.a)(u);try{for(j.s();!(d=j.n()).done;){var f=d.value,m="".concat(i,"-").concat(r,"-").concat(b),g=t.formatted_data[r][b],v="arxiv-cell",O=null;if(-1!==g.indexOf("span-cb")){for(var x=[],y=u.length,C=b;C<y&&-1===t.formatted_data[r][C].indexOf("span-ce");)x.push.apply(x,Object(w.a)(t.formatted_data[r][C].split(" "))),C++;C<y&&x.push.apply(x,Object(w.a)(t.formatted_data[r][C].split(" "))),O=C-b+1,g=Object(w.a)(new Set(x)).join(" ")}else if(-1!==g.indexOf("span-ci")||-1!==g.indexOf("span-ce")){b++;continue}"verified"in f&&"verified"in f.verified?"review"in f.verified&&"remove"===f.verified.review?v+=" arxiv-addable-ref":v="highlight-blue":"verified"in f&&"review"in f.verified&&"add"===f.verified.review?v="highlight-blue":a.indexOf(m)>-1?v="highlight-green":n.indexOf(m)>-1?v="highlight-yellow":p&&"verified"in f&&(v+=" arxiv-addable-ref");var k="";if("verified"in f&&"otherValues"in f.verified&&f.verified.otherValues.length>0){k="NOTE other values found in leadearboard:";var N,D=Object(l.a)(f.verified.otherValues);try{for(D.s();!(N=D.n()).done;){var S=N.value;k+="<br/>"+S.metric+": "+S.value}}catch(M){D.e(M)}finally{D.f()}v+=" red-border",console.log(k)}"fixed"in f&&(k="Task: "+f.fixed.task+"<br/>Dataset: "+f.fixed.dataset+"<br/>Metric: "+f.fixed.metric);var A="";if("editable"in f){p=!0;var R=f.value;"value"in f.editable&&(R=f.editable.value);var _="";if("pwcSlug"in f.editable){var I="/paper/"+f.editable.pwcSlug;_=Object(c.jsxs)("span",{children:["\xa0\xa0",Object(c.jsx)("a",{href:I,target:"_blank",children:Object(c.jsx)("i",{className:"fas fa-external-link-alt"})})]})}A=Object(c.jsxs)("span",{children:[Object(c.jsx)("input",{type:"text",value:R,"data-col-id":m,onChange:this.handleModelChange,className:"arxiv-ref-input-value"}),_]})}else A=Object(c.jsx)("span",{className:v,ref:"td"+m,"data-col-id":m,onClick:this.handleCellClick,"data-tip":k,children:"undefined"===typeof f.html||""===f.html?f.value:Object(c.jsx)("span",{"data-col-id":m,dangerouslySetInnerHTML:{__html:f.html}})});h.push(Object(c.jsx)("td",{className:g,"data-col-id":m,ref:"ref-"+m,colSpan:O,children:A},m)),b++}}catch(M){j.e(M)}finally{j.f()}var E="".concat(i,"-").concat(r);e.push(Object(c.jsx)("tr",{className:"","data-row-id":E,children:h},r)),r++}}catch(M){o.e(M)}finally{o.f()}return e}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"modal-content parse-references-modal",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Import results for referenced papers"}),Object(c.jsxs)("button",{type:"button",className:"close",onClick:this.props.closeModal,children:[Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(c.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsx)("div",{className:"arxiv-table tableWrapper",children:Object(c.jsx)("table",{className:"table",children:Object(c.jsx)("tbody",{children:this.generateRows()})})})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",onClick:this.handleSaveClicked,children:"Accept"})}),Object(c.jsx)(m.a,{html:!0})]})}}]),a}(d.a.Component),R=a(19),_=a.n(R),I=a(67),E=a.n(I),M=a(7),T=function(e){return e},B=function(e){return Object(c.jsx)("span",{children:e})},F=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).filterSuggestions=function(e,t,a){var n=s.props.autosuggests[e],r=[],i=t.toLowerCase();n.map((function(e,t){e.toLowerCase().includes(i)&&r.push(e)})),r.sort((function(e,t){return e.length-t.length})),r.length>10&&(r=r.slice(0,10)),s.setState(Object(b.a)({},a,r))},s.onSuggestionsFetchRequested=function(e){var t=e.value;s.setState({suggestions:getSuggestions(t)})},s.onSuggestionsClearRequested=function(){s.setState({suggestions:[]})},s.handleChange=function(e){var t=e.target,a=t.id.split("_"),n=a[1],r=parseInt(a[2]),i=t.value;s.handleChangeNameIdxValue(e,n,r,i)},s.handleChangeNameIdxValue=function(e,t,a,n){var r=s.state.tableData;r[a][t]=n,r=s.props.recalculateTableDataValidity(r,s.props.hash),s.setState({tableData:r})},s.handleRemoveBlob=function(e){var t=parseInt(e.target.getAttribute("data-idx")),a=s.state.tableData;a.splice(t,1),s.setState({tableData:a})},s.handleSaveClicked=function(){s.props.setNewTable(s.state.tableData),s.props.closeGrayBlobsModal()},s.state={suggestions:[],tableData:JSON.parse(JSON.stringify(s.props.tableData))};for(var r=0;r<1e3;r++)s.state["suggestTask"+r]=[],s.state["suggestDataset"+r]=[],s.state["suggestMetric"+r]=[];return s}return Object(s.a)(a,[{key:"generateRows",value:function(){var e=this,t=[];return this.state.tableData.map((function(a,n){var s=a.model,r=a.task,i=a.dataset,l=a.metric,o=a.value,d=a.metadata;if(d.table<0){var u=d.table+"-"+d.index[0]+"-"+d.index[1],h=e.state["suggestTask"+n],p=e.state["suggestDataset"+n],j=e.state["suggestMetric"+n],g={placeholder:"",value:r,onChange:function(t,a){var s=a.newValue;a.method;e.handleChangeNameIdxValue(t,"task",n,s)}},v={placeholder:"",value:i,onChange:function(t,a){var s=a.newValue;a.method;e.handleChangeNameIdxValue(t,"dataset",n,s)}},O={placeholder:"",value:l,onChange:function(t,a){var s=a.newValue;a.method;e.handleChangeNameIdxValue(t,"metric",n,s)}},x="";!1===d.validity.task&&(x="New");var w="";!1===d.validity.dataset&&(w="New");var y="";!1===d.validity.tdm&&(y="New"),!1===d.validity.tdm&&!1===d.validity.td&&(x="New",w="New");var C=e.props.existingMetrics(r,i).join(", ");""!==C&&(C="Existing metrics: "+C);var k=Object(c.jsx)("span",{className:M({"blob-new":!0,"blob-new-show":""!==y}),"data-tip":C,children:y}),N=Object(c.jsx)("span",{className:M({"blob-new":!0,"blob-new-show":""!==x}),children:x}),D=Object(c.jsx)("span",{className:M({"blob-new":!0,"blob-new-show":""!==w}),children:w}),S=Object(c.jsx)("div",{className:"blob-left-border-gray"}),A="",R=r.toLowerCase()+"||"+i.toLowerCase();if(R in e.props.hash.table){var _=e.props.hash.table[R];A=Object(c.jsx)("span",{className:"table-outlink",children:Object(c.jsx)("a",{href:_.url,target:"_blank",children:Object(c.jsx)("i",{className:"fas fa-external-link-alt"})})})}var I="",E=r.toLowerCase();if(E in e.props.hash.task_url){var F=e.props.hash.task_url[E];I=Object(c.jsx)("span",{className:"table-outlink",children:Object(c.jsx)("a",{href:F,target:"_blank",children:Object(c.jsx)("i",{className:"fas fa-external-link-alt"})})})}var Q=Object(c.jsxs)("div",{className:"review-blob",ref:"blob-"+u+"-"+n,"data-col-id":u,children:[S,Object(c.jsxs)("div",{className:"blob-block blob-first",children:[Object(c.jsx)("div",{className:"blob-header",children:"Value"}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)("input",{type:"text",id:"in_value_"+n,value:o,"data-col-id":u,onChange:e.handleChange,className:"blob-input-value"})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Metric ",k]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_metric_"+n,suggestions:j,onSuggestionsFetchRequested:function(t){var a="suggestMetric"+n;e.filterSuggestions("metrics",t.value,a)},onSuggestionsClearRequested:function(){var t="suggestMetric"+n;e.setState(Object(b.a)({},t,[]))},getSuggestionValue:T,renderSuggestion:B,inputProps:O})})]}),Object(c.jsxs)("div",{className:M({"blob-block":!0}),children:[Object(c.jsx)("div",{className:"blob-header",children:"Model name"}),Object(c.jsx)("div",{className:"blob-input blob-model",children:Object(c.jsx)("input",{type:"text",id:"in_model_"+n,value:s,onChange:e.handleChange})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Dataset ",A,D]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_dataset_"+n,suggestions:p,onSuggestionsFetchRequested:function(t){var a="suggestDataset"+n;e.filterSuggestions("datasets",t.value,a)},onSuggestionsClearRequested:function(){var t="suggestDataset"+n;e.setState(Object(b.a)({},t,[]))},getSuggestionValue:T,renderSuggestion:B,inputProps:v})})]}),Object(c.jsxs)("div",{className:"blob-block",children:[Object(c.jsxs)("div",{className:"blob-header",children:["Task ",I,N]}),Object(c.jsx)("div",{className:"blob-input",children:Object(c.jsx)(f.a,{id:"ac_task_"+n,suggestions:h,onSuggestionsFetchRequested:function(t){var a="suggestTask"+n;e.filterSuggestions("tasks",t.value,a)},onSuggestionsClearRequested:function(){var t="suggestTask"+n;e.setState(Object(b.a)({},t,[]))},getSuggestionValue:T,renderSuggestion:B,inputProps:g})})]}),Object(c.jsx)("div",{className:"blob-block blob-no-left-padding",children:Object(c.jsx)("div",{className:"blob-x",children:Object(c.jsx)("i",{className:"fas fa-times-circle","data-idx":n,onClick:e.handleRemoveBlob})})}),Object(c.jsx)(m.a,{})]},"blobkey-"+u+"-"+n);t.push(Q)}})),t}},{key:"render",value:function(){return Object(c.jsxs)("div",{className:"modal-content-gray gray-blobs-modal",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Additional results not present in paper's tables"}),Object(c.jsxs)("button",{type:"button",className:"close",onClick:this.props.closeModal,children:[Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(c.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(c.jsx)("div",{className:"modal-body",children:Object(c.jsx)("div",{className:"manual-review",children:this.generateRows()})}),Object(c.jsx)("div",{className:"modal-footer",children:Object(c.jsx)("button",{type:"button",onClick:this.handleSaveClicked,children:"Accept"})})]})}}]),a}(d.a.Component),Q=a(69),U=function(e,t){var a=e.task.toLowerCase(),n=e.dataset.toLowerCase(),s=a+"||"+n+"||"+e.metric.toLowerCase(),r=a+"||"+n;return{task:a in t.task,dataset:n in t.dataset,td:r in t.td,tdm:s in t.tdm}},q=function(e,t){for(var a=0;a<e.length;a++)e[a].metadata.validity=U(e[a],t);return e},L=function(e){return e.sort((function(e,t){return 1e4*(e.metadata.table-t.metadata.table)+100*(parseInt(e.metadata.index[0])-parseInt(t.metadata.index[0]))+(parseInt(e.metadata.index[1])-parseInt(t.metadata.index[1]))})),e},P=function(e,t,a){var n=new Array(e.length).fill(!1);return e.map((function(e,s){var r=e.metadata.table;r>=0&&t[r].hasReferences&&!("data"in a[r])&&(n[r]=!0)})),n},H=function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;a++){for(var n=e[a],s=t[a],r=0,i=["model","task","dataset","value","metric"];r<i.length;r++){var l=i[r];if(n[l]!==s[l])return!0}if(n.metadata.table>=0){if(n.metadata.table!==s.metadata.table)return!0;if(n.metadata.index[0]!==s.metadata.index[0]&&n.metadata.index[1]!==s.metadata.index[1])return!0}}return!1},G=document.getElementById("sota-review-table-wrap");void 0!==G&&E.a.setAppElement(G);var K=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var s;Object(n.a)(this,a),(s=t.call(this,e)).openModal=function(e){s.setState({modalData:e,modalIsOpen:!0})},s.closeModal=function(){s.setState({modalData:{},modalIsOpen:!1})},s.openGrayBlobsModal=function(e){s.setState({grayBlobsModalIsOpen:!0})},s.closeGrayBlobsModal=function(){s.setState({grayBlobsModalIsOpen:!1})},s.openHelp=function(){s.setState({helpIsOpen:!0})},s.closeHelp=function(){s.setState({helpIsOpen:!1})},s.handleModalCloseRequest=function(){s.setState({modalIsOpen:!1})},s.exitEdit=function(){s.setState({appState:"view"})},s.startEdit=function(){s.setState({appState:"edit"})},s.reviewCellHover=function(e){s.setState({arxivHlId:e})},s.arxivCellClick=function(e,t,a){if(null===t)s.setState({proposals:[],proposalRef:null});else{var n=t.split("-"),r=n[0],i=n[1],l=n[2],c=s.state.arxivTables[r].zipped_data.data[i][l];"proposals"in c&&(e.metaKey?s.addNewAnnotation(c.proposals[0],t):s.setState({proposals:c.proposals,proposalsRef:s.state.arxivRefs[a]}))}},s.arxivCellHover=function(e,t){null===e?s.setState({reviewHlRow:null}):s.state.tableData.map((function(t,a){var n=t.metadata;n.table+"-"+n.index[0]+"-"+n.index[1]===e&&s.setState({reviewHlRow:a})}))},s.getNonOverlappingSpace=function(e,t,a){for(var n=!0;n;){n=!1;var s,r=Object(l.a)(e);try{for(r.s();!(s=r.n()).done;){var i=s.value;if(t>=i.top&&t<=i.bottom||a<=i.bottom&&a>=i.top){n=!0;var c=i.bottom-t+15;t+=c,a+=c}}}catch(o){r.e(o)}finally{r.f()}}return{top:t,bottom:a}},s.layoutBlobs=function(){var e=-1;if(null!=s.state.arxivRefs&&null!=s.state.blobRefs){var t=[];if("gray-0"in s.state.blobRefs){var a={top:186-window.scrollY}.top+window.scrollY-86,n=s.state.blobRefs["gray-0"],r=a+n.getBoundingClientRect().height,i=s.getNonOverlappingSpace(t,a,r);t.push({top:i.top,bottom:i.bottom}),n.setAttribute("style","position:absolute;top:"+i.top+"px")}s.state.referencesData.map((function(a,n){var r=a.tableId;if(void 0!==r){var i=r+"-0-0",c=h.a.findDOMNode(s.state.arxivRefs["ref-"+i]),o={top:186-window.scrollY};null!==c&&(o=c.getBoundingClientRect());var d=o.top+window.scrollY-86,u=s.state.blobRefs["references-"+r],b=d+u.getBoundingClientRect().height,p=s.getNonOverlappingSpace(t,d,b);t.push({top:p.top,bottom:p.bottom}),u.setAttribute("style","position:absolute;top:"+p.top+"px");var j,f=[],m=Object(l.a)(a.data);try{for(m.s();!(j=m.n()).done;){var g,v=j.value,O=Object(l.a)(v);try{for(O.s();!(g=O.n()).done;){var x=g.value;"verified"in x&&"evaluationtablerow_id"in x.verified&&f.push(x.verified.evaluationtablerow_id)}}catch(w){O.e(w)}finally{O.f()}}}catch(w){m.e(w)}finally{m.f()}f.indexOf(s.props.evaluationtablerowHl)>=0&&(e<0||d<e)&&(e=d)}}));var c={};for(var o in s.state.blobRefs)if("ref-filler"!==o){var d=o.replace("blob-","").replace(/-\d*$/,"");c[d]=c[d]||[],c[d].push(s.state.blobRefs[o])}var u,b={},p=Object(l.a)(s.state.tableData);try{for(p.s();!(u=p.n()).done;){var j=u.value.metadata,f=j.table+"-"+j.index[0]+"-"+j.index[1];if(!(f in b)&&!(j.table<0)){b[f]=!0;var m=h.a.findDOMNode(s.state.arxivRefs["ref-"+f]),g={top:186-window.scrollY};null!==m&&(g=m.getBoundingClientRect());var v,O=Object(l.a)(c[f]);try{for(O.s();!(v=O.n()).done;){var x=v.value,w=g.top+window.scrollY-86,y=w+x.getBoundingClientRect().height,C=s.getNonOverlappingSpace(t,w,y);t.push({top:C.top,bottom:C.bottom}),x.setAttribute("style","position:absolute;top:"+C.top+"px"),s.props.evaluationtablerowHl===j.evaluationtablerow_id&&(e<0||w<e)&&(e=w)}}catch(k){O.e(k)}finally{O.f()}}}}catch(k){p.e(k)}finally{p.f()}}e>0&&s.state.initialLayout&&(s.setState({initialLayout:!1}),Q.animateScroll.scrollTo(e))},s.updateArxivRefs=function(e){s.setState({arxivRefs:e})},s.updateBlobRefs=function(e){s.setState({blobRefs:e})},s.addNewAnnotation=function(e,t){var a=JSON.parse(JSON.stringify(s.state.tableData));void 0===t&&(t=s.state.proposalsRef.getAttribute("data-col-id"));var n=t.split("-"),r=n[0],i=n[1],l=n[2],c={model:e.model,task:e.task,dataset:e.dataset,metric:e.metric,value:parseFloat(e.value),metadata:{table:parseInt(r),index:[i,l]}};c.metadata.validity=U(c,s.hash),a.push(c),a=L(a);var o=s.state.referencesData;o[r]={},s.setState({tableData:a,unsavedChanges:!0,referencesData:o,arxivParseReferences:P(a,s.state.arxivTables,o)}),s.setHighlightInBlob(null,null,null)},s.handleChangeAllBlobs=function(e){for(var t=s.state.tableData,a=s.state.highlightInBlob,n=t[e][a.name],r=0;r<t.length;r++)r!==e&&t[r].metadata.table===a.table&&(t[r][a.name]=n);t=q(t,s.hash),s.setState({tableData:t,arxivParseReferences:P(t,s.state.arxivTables,s.state.referencesData)})},s.setHighlightInBlob=function(e,t,a){s.state.highlightInBlob.idx!==a&&s.state.highlightInBlob.name!==e&&s.setState({highlightInBlob:{name:e,table:t,idx:a}})},s.handleParseReferenceOnClick=function(e){var t=[];s.state.tableData.map((function(a,n){a.metadata.table==e&&t.push(a)})),_.a.post(s.props.parseReferencesUrl,{tableId:e,annotations:t}).then((function(e){console.log(e.data),s.openModal(e.data)})).catch((function(e){console.log(e)}))},s.handleAcceptParsedReferences=function(e){var t=s.state.referencesData;t[e.tableId]=e,s.setState({referencesData:t,arxivParseReferences:P(s.state.tableData,s.state.arxivTables,t)})},s.setNewTable=function(e){s.setState({tableData:e,unsavedChanges:H(e,s.state.originalTableData)})},s.setUnsavedChanges=function(e){s.setState({unsavedChanges:e})},s.handleChangeNameIdxValue=function(e,t,a,n){var r=s.state.tableData;if(r[a][t]=n,!1===s.state.unsavedChanges&&n!==s.state.originalTableData[a][t]&&s.setState({unsavedChanges:!0}),r=q(r,s.hash),"model"!==t){var i=r[a].metadata.table,l=s.state.referencesData;l[i]={},s.setState({referencesData:l,arxivParseReferences:P(r,s.state.arxivTables,l)})}else s.setState({tableData:r});s.setHighlightInBlob(t,r[a].metadata.table,a)},s.handleRemoveBlob=function(e){var t=parseInt(e.target.getAttribute("data-idx")),a=s.state.tableData,n=a[t].metadata.table;a.splice(t,1);var r=s.state.referencesData;r[n]={},s.setState({tableData:a,referencesData:r,unsavedChanges:!0,arxivParseReferences:P(a,s.state.arxivTables,r),arxivHlId:null}),s.setHighlightInBlob(null,null,null)},s.handleRemoveReferencesBlob=function(e){var t=parseInt(e.target.getAttribute("data-idx")),a=s.state.referencesData;a[t]={},s.setState({referencesData:a,unsavedChanges:!0,arxivParseReferences:P(s.state.tableData,s.state.arxivTables,a)}),s.setHighlightInBlob(null,null,null)},s.handleResultsSaved=function(e,t,a){if(s.props.isUserLoggedIn){console.log("saved and references updated"),s.setState({saved:!0,unsavedChanges:!1,saving:!1,savingError:!1,referencesData:a});var n=document.getElementById("annotate-next-link");n&&window.location.replace(n.href)}else s.setState({redirectToLogin:!0}),window.location.replace(s.props.loginUrl)},s.handleSaveError=function(){console.error("unable to save results"),s.setState({saving:!1,savingError:!0})},s.existingMetrics=function(e,t){var a=e.toLowerCase()+"||"+t.toLowerCase();return a in s.hash.existing?s.hash.existing[a]:[]},s.setSaving=function(e){s.setState({saving:e})},s.autosuggests=e.autosuggests;var r={},i={},c={},o={},d={},u={};s.autosuggests.tdm.map((function(e,t){var a=e.task.toLowerCase()+"||"+e.dataset.toLowerCase()+"||"+e.metric.toLowerCase();r[a]=!0;var n=e.task.toLowerCase()+"||"+e.dataset.toLowerCase();i[n]=!0,n in d||(d[n]=[]),d[n].push(e.metric)})),s.autosuggests.tasks.map((function(e,t){c[e.toLowerCase()]=!0})),s.autosuggests.datasets.map((function(e,t){o[e.toLowerCase()]=!0})),s.autosuggests.tables.map((function(e,t){var a=e.task.toLowerCase()+"||"+e.dataset.toLowerCase();u[a]=e})),s.hash={tdm:r,td:i,task:c,dataset:o,existing:d,table:u,task_url:s.autosuggests.task_url};var b=L(e.extractedResults);b=q(b,s.hash);var p=function(e){var t,a=[],n=Object(l.a)(e);try{for(n.s();!(t=n.n()).done;){var s,r=t.value,i=r.zipped_data,c=!1,o=0,d=Object(l.a)(i.data);try{for(d.s();!(s=d.n()).done;){var u,h=s.value,b=0,p=Object(l.a)(h);try{for(p.s();!(u=p.n()).done;){var j=u.value;if("references"in j){var f,m=Object(l.a)(j.references);try{for(m.s();!(f=m.n()).done;)!("pwcSlug"in f.value)||0!==o&&0!==b||(c=!0)}catch(g){m.e(g)}finally{m.f()}}b++}}catch(g){p.e(g)}finally{p.f()}o++}}catch(g){d.e(g)}finally{d.f()}r.hasReferences=c,a.push(r)}}catch(g){n.e(g)}finally{n.f()}return a}(e.arxivTables),j=P(b,p,s.props.referencesData);s.state={appState:"edit",reviewHlRow:null,arxivHlId:null,arxivTables:p,arxivParseReferences:j,tableData:b,arxivRefs:null,blobRefs:null,unsavedChanges:s.props.unsavedChanged,originalTableData:JSON.parse(JSON.stringify(b)),proposals:[],proposalsRef:null,saved:!1,highlightInBlob:{name:null,table:null,idx:null},saving:!1,savingError:!1,modalIsOpen:!1,helpIsOpen:!1,modalData:{},referencesData:s.props.referencesData,grayBlobsExpanded:!1,grayBlobsModalIsOpen:!1,redirectToLogin:!1,evaluationtablerowHl:s.props.evaluationtablerowHl,initialLayout:!0},s.tableContainer=e.tableContainer,s.arxivContainer=e.arxivContainer,s.footerContainer=e.footerContainer,s.arxivAddContainer=e.arxivAddContainer,s.arxivModalContainer=e.arxivModalContainer,s.grayBlobsModalContainer=e.grayBlobsModalContainer,s.isUserLoggedIn=e.isUserLoggedIn;var f=document.getElementById("review-help-content");return s.helpContent=void 0!==f?f.innerHTML:"",s}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",this.beforeunload.bind(this)),Q.Events.scrollEvent.register("begin",(function(e,t){console.log("begin",arguments)})),Q.Events.scrollEvent.register("end",(function(e,t){console.log("end",arguments)})),Q.scrollSpy.update(),this.renderChildren()}},{key:"renderChildren",value:function(){h.a.render(Object(c.jsx)(C,{arxivHlId:this.state.arxivHlId,arxivCellHover:this.arxivCellHover,arxivCellClick:this.arxivCellClick,updateArxivRefs:this.updateArxivRefs,tableData:this.state.tableData,arxivTables:this.state.arxivTables,arxivParseReferences:this.state.arxivParseReferences,handleParseReferenceOnClick:this.handleParseReferenceOnClick,referencesData:this.state.referencesData,evaluationtablerowHl:this.state.evaluationtablerowHl,unsavedChanges:this.state.unsavedChanges}),this.arxivContainer),h.a.render(Object(c.jsx)(x,{reviewHlRow:this.state.reviewHlRow,appState:this.state.appState,reviewCellHover:this.reviewCellHover,tableData:this.state.tableData,originalTableData:this.state.originalTableData,updateBlobRefs:this.updateBlobRefs,autocomplete:this.props.autocomplete,onSave:this.props.onSave,unsavedChanges:this.state.unsavedChanges,handleChangeNameIdxValue:this.handleChangeNameIdxValue,handleRemoveBlob:this.handleRemoveBlob,layoutBlobs:this.layoutBlobs,highlightInBlob:this.state.highlightInBlob,setHighlightInBlob:this.setHighlightInBlob,handleChangeAllBlobs:this.handleChangeAllBlobs,autosuggests:this.autosuggests,hash:this.hash,existingMetrics:this.existingMetrics,referencesData:this.state.referencesData,openModal:this.openModal,handleRemoveReferencesBlob:this.handleRemoveReferencesBlob,openGrayBlobsModal:this.openGrayBlobsModal,evaluationtablerowHl:this.state.evaluationtablerowHl}),this.tableContainer),h.a.render(Object(c.jsx)(k,{onSave:this.props.onSave,onHelp:this.openHelp,tableData:this.state.tableData,unsavedChanges:this.state.unsavedChanges,savingError:this.state.savingError,handleResultsSaved:this.handleResultsSaved,handleSaveError:this.handleSaveError,saved:this.state.saved,saving:this.state.saving,setSaving:this.setSaving,referencesData:this.state.referencesData,isUserLoggedIn:this.props.isUserLoggedIn,loginUrl:this.props.loginUrl}),this.footerContainer),h.a.render(Object(c.jsx)(S,{proposals:this.state.proposals,proposalsRef:this.state.proposalsRef,arxivCellClick:this.arxivCellClick,addNewAnnotation:this.addNewAnnotation}),this.arxivAddContainer),h.a.render(Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(E.a,{className:"Modal__Bootstrap modal-dialog",closeTimeoutMS:150,isOpen:this.state.modalIsOpen,onRequestClose:this.handleModalCloseRequest,shouldCloseOnOverlayClick:!1,children:Object(c.jsx)(A,{modalData:this.state.modalData,closeModal:this.closeModal,tableData:this.state.tableData,handleAcceptParsedReferences:this.handleAcceptParsedReferences})}),Object(c.jsx)(E.a,{className:"Modal__Bootstrap modal-dialog extraction-help-dialog",closeTimeoutMS:150,isOpen:this.state.helpIsOpen,shouldCloseOnOverlayClick:!0,onRequestClose:this.closeHelp,children:Object(c.jsxs)("div",{className:"modal-content",children:[Object(c.jsxs)("div",{className:"modal-header",children:[Object(c.jsx)("h4",{className:"modal-title",children:"Help"}),Object(c.jsxs)("button",{type:"button",className:"close btn-close",onClick:this.closeHelp,children:[Object(c.jsx)("span",{"aria-hidden":"true",children:"\xd7"}),Object(c.jsx)("span",{className:"sr-only",children:"Close"})]})]}),Object(c.jsx)("div",{className:"modal-body",dangerouslySetInnerHTML:{__html:this.helpContent}})]})})]}),this.arxivModalContainer),h.a.render(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(E.a,{className:"Modal__Bootstrap modal-dialog",closeTimeoutMS:150,isOpen:this.state.grayBlobsModalIsOpen,onRequestClose:this.closeGrayBlobsModal,shouldCloseOnOverlayClick:!1,children:Object(c.jsx)(F,{closeModal:this.closeGrayBlobsModal,tableData:this.state.tableData,handleChangeNameIdxValue:this.handleChangeNameIdxValue,autocomplete:this.props.autocomplete,handleRemoveBlob:this.handleRemoveBlob,autosuggests:this.autosuggests,hash:this.hash,existingMetrics:this.existingMetrics,recalculateTableDataValidity:q,closeGrayBlobsModal:this.closeGrayBlobsModal,setNewTable:this.setNewTable})})}),this.grayBlobsModalContainer)}},{key:"componentDidUpdate",value:function(){this.renderChildren()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.beforeunload.bind(this)),Q.Events.scrollEvent.remove("begin"),Q.Events.scrollEvent.remove("end")}},{key:"beforeunload",value:function(e){this.state.unsavedChanges&&!this.state.redirectToLogin&&(e.preventDefault(),e.returnValue=!0)}},{key:"render",value:function(){return null}}]),a}(d.a.Component),Y=new(function(){function e(){Object(n.a)(this,e),this.container=null}return Object(s.a)(e,[{key:"show",value:function(e){e.appContainer;var t=e.taskAutocompleteUrl,a=e.datasetAutocompleteUrl,n=e.metricAutocompleteUrl,s=e.onSave,r=e.arxivTables,i=e.extractedResults,l=e.arxivContainer,o=e.tableContainer,d=e.footerContainer,u=e.arxivAddContainer,b=e.autosuggests,p=e.parseReferencesUrl,j=e.arxivModalContainer,f=e.referencesData,m=e.isUserLoggedIn,g=e.loginUrl,v=e.grayBlobsModalContainer,O=e.unsavedChanged,x=e.evaluationtablerowHl;this.container=o,this.arxivContainer=l,this.footerContainer=d,this.arxivAddContainer=u,this.arxivModalContainer=j,this.grayBlobsModalContainer=v;var w={taskAutocompleteUrl:t,datasetAutocompleteUrl:a,metricAutocompleteUrl:n};this.component=Object(c.jsx)(K,{arxivTables:r,extractedResults:i,arxivContainer:l,footerContainer:d,tableContainer:o,arxivAddContainer:u,autocomplete:w,autosuggests:b,onSave:s,parseReferencesUrl:p,arxivModalContainer:j,referencesData:f,isUserLoggedIn:m,loginUrl:g,grayBlobsModalContainer:v,unsavedChanged:O,evaluationtablerowHl:x}),h.a.render(this.component,document.createElement("div"))}}]),e}());t.default=Y},365:function(e,t,a){"use strict";a.r(t);var n=a(8),s=a(5),r=a(12),i=a(13),l=a(15),c=a(14),o=a(0),d=a(19),u=a.n(d),h=a(9),b=a(167),p=a(1),j=a.n(p),f=a(200),m=a(375),g=a(70);function v(e){if(!e)return!1;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}j.a.Component;var O=a(17),x=a(37),w=a(376),y=a(379),C=a(66),k=a(168),N=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).sortingOptions={"github-stars":{slug:"github-stars",value:"best_papergithubrepo__githubrepo__stars",label:"Github Stars",defaultDirection:"desc"},"published-date":{slug:"published-date",value:"published",label:"Published Date",defaultDirection:"desc"},title:{slug:"title",value:"title",label:"Title",defaultDirection:"asc"}},e.defaultOptions=[{label:"All tasks \u279c",value:"tasksList"},{label:"All authors \u279c",value:"authorsList"}],e.state={order:{field:Object.values(e.sortingOptions)[0],direction:"desc"},tasksList:[],authorsList:[],loaded:!1,inputString:"",defaultOptions:e.defaultOptions,filters:[],maxMenuHeight:500},e.hasSearchString=!1,e.loadEntities=function(t){var a=e.props.proceedingSlug;return u.a.get("/api/v0/".concat(t),{params:{proceeding_slug:a}}).then((function(e){return e.data}))},e.loadOptions=Object(h.debounce)((function(t,a){var n=e.state,s=n.tasksList,r=n.authorsList,i=t.toLowerCase(),l=e.findEntities(s,i),c=e.findEntities(r,i),o=e.hasSearchString?[]:[{label:t,value:t,type:"search-string"}];l.length&&o.push({label:"Tasks",options:l}),c.length&&o.push({label:"Authors",options:c}),a(o)}),200),e.onFiltersChange=function(t,a){if(!a.option||"authorsList"!==a.option.value&&"tasksList"!==a.option.value){e.setState({filters:t});var n={search:null,tasks:[],authors:[]};t=t||[];var s,r=Object(O.a)(t);try{for(r.s();!(s=r.n()).done;){var i=s.value;"search-string"===i.type?n.search=i.value:"task"===i.type?n.tasks.push(i.value):"author"===i.type&&n.authors.push(i.value)}}catch(l){r.e(l)}finally{r.f()}e.hasSearchString=null!==n.search,e.props.onFiltersChange&&e.props.onFiltersChange(n)}else e.setState({defaultOptions:e.state[a.option.value]})},e.onInputChange=function(t){e.setState({defaultOptions:e.defaultOptions})},e.onOrderFieldChange=function(t){if(t!==e.state.order.field.slug){var a=e.sortingOptions[t];e.setState({order:{field:a,direction:a.defaultDirection}},e.onOrderChange)}},e.onOrderDirectionChange=function(){var t=e.state.order;e.setState({order:{field:t.field,direction:"asc"===t.direction?"desc":"asc"}},e.onOrderChange)},e.onOrderChange=function(){if(e.props.onOrderChange){var t=e.state.order,a="asc"===t.direction?"":"-";a+=t.field.value,e.props.onOrderChange(a)}},e.colourStyles={multiValue:function(e,t){var a=t.data.type,n="#cce5ff";return"task"===a?n="#d4edda":"author"===a&&(n="#f8d7da"),Object(s.a)(Object(s.a)({},e),{},{backgroundColor:n})},multiValueLabel:function(e,t){var a=t.data.type,n="#004085";return"task"===a?n="#155724":"author"===a&&(n="#721c24"),Object(s.a)(Object(s.a)({},e),{},{color:n})},option:function(e,t){var a=t.data.value;return"tasksList"!==a&&"authorsList"!==a||(e=Object(s.a)(Object(s.a)({},e),{},{fontWeight:"bold"})),e}},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;Promise.all([this.loadEntities("tasks"),this.loadEntities("authors")]).then((function(t){var a=t[0],n=t[1];function s(e){return e.toLowerCase().replace(/[^a-zA-Z]/g," ").split(" ").filter((function(e){return e}))}e.setState({tasksList:a.map((function(e){return{value:e.id,type:"task",label:e.name,searchField:s(e.name)}})),authorsList:n.map((function(e){return{value:e.id,type:"author",label:e.full_name,searchField:s(e.full_name)}})),loaded:!0})}))}},{key:"findEntities",value:function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,s=[],r=Object(O.a)(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(Object(h.some)(i.searchField,(function(e){return e.startsWith(t)}))&&(s.push(i),0===--n))break}}catch(l){r.e(l)}finally{r.f()}return s}},{key:"render",value:function(){return Object(o.jsxs)(x.a,{className:"omnisearch",inline:!0,onSubmit:function(e){return e.preventDefault()},children:[Object(o.jsx)(k.a,{value:this.state.filters,isDisabled:!this.state.loaded,className:"flex-grow-1 mr-md-3 mb-3 mb-md-0",placeholder:"Filter by task, author or keyword",isMulti:!0,closeMenuOnSelect:!1,maxMenuHeight:this.state.maxMenuHeight,defaultOptions:this.state.defaultOptions,loadOptions:this.loadOptions,onChange:this.onFiltersChange,onInputChange:this.onInputChange,styles:this.colourStyles,classNamePrefix:"omnisearch"}),Object(o.jsxs)(w.a,{className:"omnisearch__order-selector mt-0",children:[Object(o.jsxs)(y.a,{className:"mt-0 flex-grow-1 btn-group",onSelect:this.onOrderFieldChange,children:[Object(o.jsxs)(y.a.Toggle,{id:"order-field-selector",variant:"light",className:"pr-4 my-0",children:[this.state.order.field.label,Object(o.jsx)("i",{className:"fa fa-chevron-down"})]}),Object(o.jsx)(y.a.Menu,{children:Object.values(this.sortingOptions).map((function(e){return Object(o.jsx)(y.a.Item,{eventKey:e.slug,children:e.label},e.slug)}))})]}),Object(o.jsx)(C.a,{className:"omnisearch__order-selector__direction my-0",variant:"light",onClick:this.onOrderDirectionChange,children:Object(o.jsx)("i",{className:"sort-arrow fas ".concat("asc"===this.state.order.direction?"fa-arrow-alt-up":"fa-arrow-alt-down")})})]})]})}}]),a}(j.a.Component);N.defaultProps={proceedingSlug:null,onOrderChange:null,onFiltersChange:null};function D(e){if(!e)return!1;var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}var S=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(){var e;Object(r.a)(this,a);for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];return(e=t.call.apply(t,[this].concat(l))).requestId=0,e.loadingMore=!1,e.loadMoreRef=j.a.createRef(),e.state={loading:!0,loadMoreLoading:!1,itemsCount:0,lastDate:"3000-01-01",items:[],authorFullName:"",authorThumbnail:"",authorLink:""},e.updateAuthorItems=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.data.map((function(e){var t=new Date(e.published),a=t.getDate(),n=t.toLocaleString("default",{month:"short"}),r=t.getFullYear(),i="".concat(a," ").concat(n," ").concat(r);return Object(s.a)(Object(s.a)({},e),{},{publishedDateString:i})})),l=t.meta,c=l.itemsCount,o=l.lastDate;o=o.substring(0,10),e.setState({loading:!1,loadMoreLoading:!1,items:r?[].concat(Object(n.a)(a),Object(n.a)(i)):Object(n.a)(i),itemsCount:c,lastDate:o},e.handleScroll)},e.fetchItems=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=e.props.authorId,n=e.state,s=n.items,r=n.lastDate;e.setState({loading:!t,loadMoreLoading:t},(function(){var n=++e.requestId;u.a.get("/api/v0/author_items/",{params:{author_id:a,last_date:r}}).then((function(a){n===e.requestId&&e.updateAuthorItems(a.data,s,t)}))}))},e.updateAuthorInfo=function(t){e.setState({authorFullName:t.full_name,authorThumbnail:t.thumbnail,authorLink:t.link})},e.fetchAuthor=function(){var t=e.props.authorId;u.a.get("/api/v0/authors/",{params:{author_id:t}}).then((function(t){e.updateAuthorInfo(t.data)}))},e.handleScroll=Object(h.throttle)((function(t){var a=e.state,n=a.itemsCount,s=a.items,r=a.loadMoreLoading;D(e.loadMoreRef.current)&&n>s.length&&!r&&e.setState({loadMoreLoading:!0},(function(){return e.fetchItems(!0)}))}),200),e}return Object(i.a)(a,[{key:"codeButton",value:function(e){if(1==e.has_code){var t="";return e.official_stars>=0&&(t=Object(o.jsxs)("span",{className:"official-stars",children:[Object(o.jsx)("span",{style:{fontSize:"11px"},children:"("}),Object(o.jsx)("ion-icon",{name:"star"}),e.official_stars,Object(o.jsx)("span",{style:{fontSize:"11px"},children:")"})]})),Object(o.jsxs)("a",{href:e.link+"#code",className:"badge badge-code",children:[Object(o.jsx)("ion-icon",{name:"logo-github",role:"img",className:"md hydrated","aria-label":"logo github"})," Code ",t]})}}},{key:"resultsButton",value:function(e){if(1==e.has_evaluation_table_rows)return Object(o.jsxs)("a",{href:e.link+"#evaluation",className:"badge badge-results",children:[Object(o.jsx)("ion-icon",{name:"barcode-outline"})," Results"]})}},{key:"otherAuthors",value:function(e,t){if(e.length>1){if(e[0].full_name==t)return e.length<2?void 0:2==e.length?Object(o.jsxs)("span",{className:"additional",children:["with ",Object(o.jsx)("a",{href:e[1].link,children:e[1].full_name})]}):Object(o.jsxs)("span",{className:"additional",children:["with ",Object(o.jsx)("a",{href:e[1].link,children:e[1].full_name})," and ",Object(o.jsxs)("a",{"data-toggle":"modal","data-target":"#exampleModal",children:[e.length-2," others"]})]});return e.length<2?void 0:2==e.length?Object(o.jsxs)("span",{className:"additional",children:["with ",Object(o.jsx)("a",{href:"",children:t})]}):Object(o.jsxs)("span",{className:"additional",children:["with ",Object(o.jsx)("a",{href:"",children:t})," and ",Object(o.jsxs)("a",{"data-toggle":"modal","data-target":"#exampleModal",children:[e.length-2," others"]})]})}}},{key:"intersperse",value:function(e,t){return 0===e.length?[]:e.slice(1).reduce((function(e,a,n){return e.concat([t,a])}),[e[0]])}},{key:"componentDidMount",value:function(){var e=JSON.parse(document.getElementById("author-info-json").textContent),t=JSON.parse(document.getElementById("author-items-json").textContent);this.updateAuthorInfo(e),this.updateAuthorItems(t),window.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(){window.MathJax&&window.MathJax.typeset&&window.MathJax.typeset()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"authorNameLink",value:function(e){return e.link,this.state.authorLink,e.full_name}},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.loading,s=(t.loadMoreLoading,t.itemsCount),r=t.authorFullName,i=t.authorLink,l=t.authorThumbnail;return Object(o.jsxs)("div",{className:"author-page mb-4 w-100",children:[Object(o.jsxs)("div",{style:{position:"relative",minHeight:200},children:[n&&Object(o.jsx)("div",{className:"text-center",style:{backgroundColor:"rgba(255, 255, 255, 0.75)",zIndex:1,width:"100%",height:"100%",position:"absolute",top:0,left:0},children:Object(o.jsx)(m.a,{animation:"border",variant:"primary",style:{marginTop:75,width:"4rem",height:"4rem",borderWidth:"0.4em"}})}),a.map((function(t){return Object(o.jsxs)("div",{className:"status-update",children:[Object(o.jsx)("div",{className:"modal author-modal",id:"exampleModal",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:Object(o.jsx)("div",{className:"modal-dialog author-dialog",role:"document",children:Object(o.jsx)("div",{className:"modal-content author-pop-up",children:e.intersperse(t.authors.map((function(e){return Object(o.jsxs)("div",{className:"row author-row",children:[Object(o.jsx)("div",{className:"col-lg-3",children:Object(o.jsx)("img",{src:e.author_thumbnail})}),Object(o.jsx)("div",{className:"col-lg-9 author-name",children:Object(o.jsx)("a",{href:e.link,children:e.full_name},e.id)})]})})))})})}),Object(o.jsxs)("div",{className:"row status-header center-mobile",children:[Object(o.jsx)("div",{className:"col-lg-1 status-header-image",children:Object(o.jsx)("a",{href:i,children:Object(o.jsx)("img",{src:l})})}),Object(o.jsxs)("div",{className:"col-lg-11 status-header-description",children:[Object(o.jsx)("a",{href:i,children:r})," ",Object(o.jsx)("div",{className:"additional",children:"published a paper"})," ",Object(o.jsx)("br",{}),Object(o.jsx)("div",{className:"text-muted",children:t.publishedDateString})]})]}),Object(o.jsxs)("div",{className:"row status-paper",children:[Object(o.jsx)("div",{className:"col-lg-4 status-paper-image",children:Object(o.jsx)("a",{href:t.link,children:Object(o.jsx)("img",{src:t.thumbnail})})}),Object(o.jsxs)("div",{className:"col-lg-8 status-paper-description",children:[Object(o.jsx)("h1",{children:Object(o.jsx)("a",{href:t.link,children:t.title})}),Object(o.jsx)("div",{className:"author-span",children:Object(o.jsx)(o.Fragment,{children:e.intersperse(t.authors.map((function(t){return Object(o.jsx)("a",{href:t.link,children:e.authorNameLink(t)},t.id)}))," \u2022 ")})}),Object(o.jsxs)("div",{className:"artefact-links",children:[Object(o.jsxs)("a",{href:t.link,className:"badge badge-paper",children:[Object(o.jsx)("ion-icon",{name:"document",role:"img",className:"md hydrated","aria-label":"document"})," Paper"]}),e.codeButton(t),e.resultsButton(t)]})]})]})]},t.id)}))]}),s>a.length&&Object(o.jsx)(f.a,{className:"justify-content-center",ref:this.loadMoreRef,children:Object(o.jsx)(m.a,{animation:"border",variant:"primary"})})]})}}]),a}(j.a.Component);t.default=S},366:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(1),r=a(18),i=a.n(r),l=a(44),c=(a(208),a(209),a(76)),o=a.n(c),d=a(107),u=a(26),h=a(5),b=a(21),p=a(8),j=a(22),f=[{path:"/conference/:slug",loader:function(){return Promise.all([a.e(0),a.e(2),a.e(5)]).then(a.bind(null,582))}},{path:"/newsletter",loader:function(){return Promise.all([a.e(0),a.e(2),a.e(10)]).then(a.bind(null,583))}},{path:"/newsletter/create",loader:function(){return Promise.all([a.e(0),a.e(3),a.e(8)]).then(a.bind(null,578))}},{path:"/newsletter/:id/edit",loader:function(){return Promise.all([a.e(0),a.e(3),a.e(9)]).then(a.bind(null,579))}},{path:"/example",loader:function(){return a.e(6).then(a.bind(null,580))}}];function m(){return Object(n.jsx)(j.c,{children:f.map((function(e){return Object(n.jsx)(j.a,{exact:!0,path:e.path,component:g.bind(null,e.loader)},e.path)}))})}function g(e){var t=Object(j.h)(),a=Object(p.a)(new URLSearchParams(Object(j.g)().search)).reduce((function(e,t){var a=Object(b.a)(t,2),n=a[0],s=a[1];return Object(h.a)(Object(h.a)({},e),{},Object(u.a)({},n,s))}),{}),r=Object(s.useState)(),i=Object(b.a)(r,2),l=i[0],c=i[1],f=Object(s.useState)(),m=Object(b.a)(f,2),g=m[0],v=m[1];return Object(s.useEffect)((function(){Object(d.a)(o.a.mark((function n(){var s;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e();case 2:if(s=n.sent.default,c((function(){return s})),n.t0=v,!s.getInitialProps){n.next=11;break}return n.next=8,s.getInitialProps({params:t,query:a});case 8:n.t1=n.sent,n.next=12;break;case 11:n.t1={};case 12:n.t2=n.t1,(0,n.t0)(n.t2);case 14:case"end":return n.stop()}}),n)})))()}),[]),l&&g?Object(n.jsx)(l,Object(h.a)({},g)):null}window.run_after_frontend_loaded=window.run_after_frontend_loaded||[],window.run_after_frontend_loaded.push((function(){var e=document.getElementById("root");e&&i.a.render(Object(n.jsx)(l.a,{children:Object(n.jsx)(m,{})}),e)}))}},[[366,11,13]]]);